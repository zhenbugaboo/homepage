function Accessories(){var e=$("#accessories"),t=this;this.show=function(){e.show()},this.hide=function(){e.hide()},this.updateInterface=function(){$.each(t.accessories,function(e,t){var i=new Accessory(t.vpc);window.bugaboo.configuratorproductmenu.addMenuItem(i.getData())}),window.bugaboo.configuratorproductmenu.init()}}function Accessory(e,t){var i=this;return this.id,this.vpc,this.label,this.price,this.wheel,this.position,this.colours,this.colour,this.defaultColour,this.angle,this.originalPrice,this.overridePosition,this.bundledAccessory,t&&(e=t.vpc),$.each(Configurator.Accessories.accessories,function(t,o){return o.vpc==e?(i.id=Configurator.Basket.getNextAccessoryId(),i.vpc=o.vpc,i.label=o.label?o.label:"",i.show=o.show,i.price=o.price,i.wheel=o.wheel,i.position=o.position,i.colours=o.colours,i.colour=o.colour,i.defaultColour=o.defaultColour?o.defaultColour:this.colour,i.angle=o.angle,i.icons=o.icons,i.originalPrice=o.price,_.has(o,"vpcIncluded")&&(i.vpcIncluded=o.vpcIncluded,i.bundledAccessory=!0),!1):void 0}),i.id?(t&&(i.id=t.id,i.colour=t.colour),i.icons&&$.each(i.icons,function(e,t){""==i.icons[e]?i.icons[e]=Configurator.urls.iconsPrefix+"/dot-com-origional-theme/images/spacer.png":i.icons[e].substr(0,Configurator.urls.iconsPrefix.length)!=Configurator.urls.iconsPrefix&&(i.icons[e]=Configurator.urls.iconsPrefix+t)}),this.updatePrice=function(){this.price=this.colours[this.colour]&&this.colours[this.colour].price?this.colours[this.colour].price:this.originalPrice},this.setColour=function(e,t){this.colour=e,this.updatePrice(),Configurator.Total.calculateTotal(),$.each(i.colours,function(t){i.colours[t].selected=t==e}),Configurator.setLocalStorageItem("Basket.accessories."+this.id,JSON.stringify({vpc:this.vpc,colour:this.colour,id:this.id})),t&&(Configurator.Basket.updateInterfaceUpdateAccessory(this),Configurator.Selected.updateInterface(),Configurator.Total.updateInterface(),Configurator.Stroller.updateInterface())},this.getPosition=function(e){return e?this.overridePosition?"L":this.position:this.overridePosition?"X":this.position},this.generateAccVPC=function(e){var t="";return t+=this.vpc,t+=this.colour,t+="-"+this.getPosition(e)},this.generateAdditionalAccVPC=function(e,t,i){var o="";return o+=e,o+=t,o+="-"+this.getPosition(i)},this.calculatePosition=function(){this.position.length>1?"DKY"===Configurator.Stroller.stroller.virtualProductId&&(this.overridePosition=!0):this.overridePosition=!1},this.isAvailable=function(){return this.colour in this.colours?this.colours[this.colour].atp>0:!1},this.getData=function(){if(!this.colours)return!1;this.calculatePosition();var e=this.generateAccVPC()+"&angle="+this.angle;return this.updatePrice(),{id:this.id,vpc:this.vpc,from:!1,price:this.price,available:this.isAvailable(),img_sml:Configurator.urls.virtualStudioUrlPrefix+e+"&width=100&shadow=false",img_lrg:Configurator.urls.virtualStudioUrlPrefix+e+"&width=200&shadow=false",label:this.label.replace("3","³"),currency:Configurator.currency}},!1):i=!1}function Action(e){var t=this;require(["generic-loader","generic-cart"],function(e,i){t.GenericLoader=e,t.GenericCart=i});var i=$("#action");this.addNotSave=e,this.bOutOfStock=!1,this.StrollerOOS=!1,this.$buyButton=i.find("#buy_url"),this.$resetButton=i.find("#reset_url"),this.$alerticon=i.find(".alert-icon"),this.$outofstock=i.find(".outofstock"),this.$buttonPopupContinue=$("#popup2").find("#buttonContinue"),this.$buttonPopupCancel=$("#popup2").find("#buttonCancel"),this.$oosItemListPopup=$("#popup2").find(".oositems"),this.$oosItemListPopupTemplate=this.$oosItemListPopup.clone(!1),this.oosItemListLabelBase=$("#popup2").data("labelbase"),this.oosItemListLabelTF=$("#popup2").data("labeltf"),this.$addtowishlistButton=$("#wishlist_url"),this.allowAjaxCall=!0,this.nWishList="#"+this.$addtowishlistButton.attr("data-notification"),this.nCart="#"+this.$buyButton.attr("data-notification"),this.init=function(){this.addNotSave?($("#action_add").show(),$("#action_save").hide()):($("#action_save").show(),$("#action_add").hide()),this.$buyButton.click($.proxy(this.onSelectAdd,this)),this.$addtowishlistButton.click($.proxy(this.onWishListAdd,this)),this.$resetButton.click($.proxy(this.onSelectReset,this))},this.show=function(){i.show()},this.hide=function(){i.hide()},this.hidePriceData=function(){this.hide()},this.onSelectAdd=function(e){if(void 0,void 0,this.bOutOfStock)e.preventDefault(),this.initPopupOOSInteraction();else{if(!this.allowAjaxCall)return;var t={loader:new this.GenericLoader(this.$buyButton),cart:new this.GenericCart,notification:this.nCart,url:Configurator.urls.wishAndbuyUrl,data:{productCode:Configurator.Stroller.buyVpc,sId:Configurator.strollerId,type:"cart",isActive:Configurator.Stroller.active}};this.executeAjaxCall(t)}},this.onWishListAdd=function(){if(void 0,this.allowAjaxCall){var e={loader:new this.GenericLoader(this.$addtowishlistButton),notification:this.nWishList,url:Configurator.urls.wishAndbuyUrl,data:{productCode:Configurator.Stroller.fullVpc,sId:Configurator.strollerId,type:"wishlist",isActive:Configurator.Stroller.active}};this.executeAjaxCall(e)}},this.initPopupOOSInteraction=function(){t.$oosItemListPopup.empty(),$.each(Configurator.Stroller.getOosItems(),function(e,i){if("stroller"===e){var o=$("<li>");$.each(i,function(e,i){function s(e,i){t.$oosItemListPopupTemplate.find(".oosmodulename").clone(!1).text(e).appendTo(o),t.$oosItemListPopupTemplate.find(".oosmodulecolour").clone(!1).text(i.selected).appendTo(o)}t.StrollerOOS=!0,Configurator.Stroller.active&&(t.$oosItemListPopupTemplate.find(".oositemtitle").clone(!1).text(i.label).appendTo(o),i.sublabel&&t.$oosItemListPopupTemplate.find(".oositemsubtitle").clone(!1).text(i.sublabel).appendTo(o),$.each(this.modules,function(e,i){null!==i&&i.atp<1&&("base"==e&&s(t.oosItemListLabelBase,i),("tf"==e||"tf2"==e)&&s(t.oosItemListLabelTF,i))}))})}if("accessories"===e){var o=$("<li>");$.each(i,function(e,i){t.$oosItemListPopupTemplate.find(".oositemtitle").clone(!1).text(i).appendTo(o)})}o.appendTo(t.$oosItemListPopup)}),$.magnificPopup.open({items:{src:"#popup2"},closeMarkup:'<button title="%title%" class="mfp-close"><span class="icon-small-close"></span></button>'}),t.StrollerOOS&&(Object.keys(Configurator.Basket.accessories).length<1||Object.keys(Configurator.Basket.accessories).length===Object.keys(Configurator.Stroller.getOosItems().accessories).length)?(void 0,this.$buttonPopupContinue.hide(),this.$buttonPopupCancel.off(),this.$buttonPopupCancel.on("click",function(){$.magnificPopup.close()})):this.initPopupContinueInteraction(t.StrollerOOS)},this.initPopupContinueInteraction=function(e){void 0;var t=this,i=e?!1:Configurator.Stroller.active;this.$buttonPopupContinue.off(),this.$buttonPopupCancel.off(),this.$buttonPopupContinue.show(),this.$buttonPopupContinue.on("click",function(){if(void 0,t.allowAjaxCall){var e={loader:new t.GenericLoader(this),cart:new t.GenericCart,notification:t.nCart,url:Configurator.urls.wishAndbuyUrl,data:{productCode:Configurator.Stroller.buyVpc,sId:Configurator.strollerId,type:"cart",isActive:i}};t.executeAjaxCall(e,$.magnificPopup.close)}}),this.$buttonPopupCancel.on("click",function(){$.magnificPopup.close()})},this.onSelectReset=function(e){e.preventDefault(),$.magnificPopup.open({items:{src:"#popup1"},closeMarkup:'<button title="%title%" class="mfp-close"><span class="icon-small-close"></span></button>'})},this.executeAjaxCall=function(e,t){var i=this;this.allowAjaxCall=!1,Configurator.gtm&&Configurator.gtm.updateGTM("C3","addToCart","add",i.StrollerOOS),$.ajax({type:"POST",url:e.url,data:e.data,success:function(o,s,n){void 0,void 0;var o=$.parseJSON(o);i.executeNotification(e,o),t&&t(),i.allowAjaxCall=!0},error:function(t,i,o){void 0,void 0,e.loader.kill()}})},this.executeNotification=function(e,t){var i=$(e.notification).find(".text p"),o=t.message;i.empty().text(o),e.cart&&e.cart.update.cart_items(t.cart_items),$(e.notification).trigger("triggerB11Notification"),e.loader.kill()}}function Basket(e,t,i){this.configId=t,this.wishlistId=i,this.accessoriesCount=0,this.currentIdCounter=1,this.accessories={},this.$buttonPopupAddWithoutAdapter=$("#popup3").find("#buttonAddWithoutAdapter"),this.$buttonPopupAddWithAdapter=$("#popup3").find("#buttonAddWithAdapter");var o=$("#basket"),s=this;this.init=function(){e&&($.each(e,function(e,t){var i=new Accessory(!1,t);i.id?(s.accessories[i.id]=i,i.colours[i.colour]||(i.colour=i.defaultColour),278!=i.vpc&&s.accessoriesCount++,s.updateInterfaceAddAccessory(s.accessories[i.id]),Configurator.gtm&&Configurator.gtm.updateGTM("C3","accessoryadded","detail",i)):Configurator.updateLocalStorage&&localStorage.removeItem("Basket.accessories."+t.id)}),Configurator.Basket.setNextAccessoryId(),Configurator.Total.calculateTotal(),Configurator.Total.updateInterface(),this.updateInterface())},this.show=function(){o.show()},this.hide=function(){o.hide()},this.hidePriceData=function(){$(".menu-item .info h5").hide(),$(".basket .items .item").each(function(){$(this).hasClass("add")||$(this).find(".price").html("")})},this.getNextAccessoryId=function(){return this.currentIdCounter++},this.setNextAccessoryId=function(){var e=0;$.each(this.accessories,function(t,i){e<i.id&&(e=i.id)}),e++,this.currentIdCounter=e},this.getAccessoryById=function(e){var t=!1;return $.each(this.accessories,function(i,o){return o.id==e?(t=o,!1):void 0}),t?t:!1},this.getAccessoryIndex=function(e){var t=!1;return $.each(this.accessories,function(i,o){return o.id==e?(t=i,!1):void 0}),t},this.addStroller=function(){Configurator.Total.calculateTotal(),this.updateInterfaceAddStroller(),Configurator.Total.updateInterface(),Configurator.Basket.updateInterface()},this.updateInterfaceAddStroller=function(){window.bugaboo.configuratorproductmenu.addStroller(Configurator.Stroller.getData()),Configurator.countryHasStore||this.hidePriceData()},this.addAccessory=function(e){var t=new Accessory(e,!1);t&&(this.accessories[t.id]=t,s.accessoriesCount++,Configurator.Total.calculateTotal(),Configurator.setLocalStorageItem("Basket.accessories."+t.id,JSON.stringify({vpc:t.vpc,colour:t.colour,id:t.id})),this.updateInterfaceAddAccessory(t),Configurator.Total.updateInterface(),Configurator.Basket.updateInterface(),Configurator.Accessories.hide(),Configurator.gtm&&Configurator.gtm.updateGTM("C3","accessoryadded","detail",t),void 0)},this.updateInterfaceUpdateStroller=function(){window.bugaboo.configuratorproductmenu.updateStroller(Configurator.Stroller.getData()),Configurator.countryHasStore||this.hidePriceData()},this.updateInterfaceUpdateAccessory=function(e){window.bugaboo.configuratorproductmenu.updateAccessory(e.getData()),Configurator.countryHasStore||this.hidePriceData()},this.updateInterfaceAddAccessory=function(e){window.bugaboo.configuratorproductmenu.addAccessory(e.getData()),Configurator.countryHasStore||this.hidePriceData()},this.removeAccessory=function(e){void 0;var t=this.getAccessoryById(e);this.getAccessoryIndex(e),t&&(delete s.accessories[e],278!=t.vpc&&s.accessoriesCount--,Configurator.Total.calculateTotal(),Configurator.updateLocalStorage&&localStorage.removeItem("Basket.accessories."+t.id),Configurator.Total.updateInterface(),Configurator.Controls.updateInterface())},this.removeStroller=function(){Configurator.Stroller.setActive(!1),Configurator.Total.calculateTotal(),Configurator.setLocalStorageItem("Stroller.active",!1),this.updateInterfaceRemoveStroller(),Configurator.Total.updateInterface(),Configurator.Controls.updateInterface(),Configurator.Stroller.updateInterface()},this.unremoveStroller=function(){Configurator.Stroller.setActive(!0),Configurator.Total.calculateTotal(),Configurator.setLocalStorageItem("Stroller.active",!0),this.updateInterfaceUnremoveStroller(),Configurator.Total.updateInterface(),Configurator.Controls.updateInterface(),Configurator.Stroller.updateInterface()},this.updateInterfaceRemoveStroller=function(){window.bugaboo.configuratorproductmenu.update()},this.updateInterfaceUnremoveStroller=function(){window.bugaboo.configuratorproductmenu.update()},this.updateInterface=function(){},this.getBasketState=function(){return window.bugaboo.configuratorproductmenu.getState()}}function Configurator(){_this=this,this.localStorageSupported=!0,this.debugmode=window.location.hostname.search("dev.bugaboo.com")>-1?!0:!1,this.initialize=function(e,t,i,o){this.resizeToWindow(o),void 0,this.localStorageSupported=_this.testLocalStorage(),this.setLocalStorageItem=function(e,t){this.localStorageSupported&&this.updateLocalStorage&&localStorage.setItem(e,t)},this.updateLocalStorage=e.configId||e.wishlistId||e.shareVpc?!1:!0,(!this.updateLocalStorage||e.clearConf)&&_this.clearLocalStorage(),this.urls=t,this.apiKey=i.apiKey,this.countryHasStore=i.countryHasStore,this.currency=i.currency,this.currencyCode=i.currencyCode,this.priceFormat=i.priceFormat,this.strollerId=e.strollerId,void 0,require(["./gtm"],function(e){_this.gtm=e,e.load("C3","landing")}),this.$parent=o,this.$total=o.find(".total"),this.$selected=o.find(".selected"),this.$background=o.find(".background-image"),this.$sideBar=o.find(".sidebar"),this.$productExplorerContainer=o.find(".product-explorer-container"),this.$productMenuContainer=o.find(".product-menu-container"),this.$productMenu=o.find(".configurator-product-menu"),this.$colorpickersContainer=o.find(".colorpickers-container"),this.$colorpickerMenu=o.find(".colorpicker-menu"),this.$colorpickerMenuButton1=this.$colorpickerMenu.find("[data-id='wheel1']"),this.$colorpickerMenuButton2=this.$colorpickerMenu.find("[data-id='wheel2']"),this.$colorpickerMenuButton3=this.$colorpickerMenu.find("[data-id='wheel3']"),this.$wheel1=$("#wheel1"),this.$wheel2=$("#wheel2"),this.$wheel3=$("#wheel3"),this.$buttonStartFromScratch=$("#buttonStartFromScratch"),this.$buttonRemoveStroller=$("#buttonRemoveStroller"),this.$mobilePositionMenu=o.find(".positions-mobile-container"),this.$a1TextMobile=o.next(),this.$a1TextNoConfigurator=this.$a1TextMobile.next(),this.sColorpickerMode="",this.bTouch=window.bugaboo.isTouch,this.bMobile=!1,this.bIE=-1!=navigator.userAgent.indexOf("MSIE"),$.ajax({type:"GET",url:_this.urls.getData,beforeSend:function(e){e.setRequestHeader("apikey",_this.apiKey)},dataType:"json",data:""}).complete(function(t){var i=JSON.parse(t.responseText);if(i.modules=_this.parseModulesData(i.modules,i.setup,i.virtualProductId),!i.modules)return void _this.showErrorNotification();i.accessories=_this.parseAccessoriesData(i.accessories,i.vpc),_.has(i,"incompatibility")&&(i.incompatibilities=_this.parseIncompatibilitiesData(i.incompatibility)),void 0;var o=[],s={},n=!1,r="",a=!0;if(void 0,!e.clearConf)if(e.shareVpc||e.wishVpc){var l=e.shareVpc?e.shareVpc:e.wishVpc,c=l.split("!"),h=c[0],u=h.split("_");if(1==c.length||""==c[1])var d=!1;else var d=c[1].split("_");for(var p,m=[],f=/\(([^\)]+)\)/g;p=f.exec(u[4]);)m.push(p[1]);u[4]=m,r=u[0],$.each(i.setup,function(e,t){return t.setup==u[1]&&t.moduleType+""+t.facing==u[2]?(n=e,!1):void 0}),s.Frame=u[3],"("==s.Frame[0]&&(s.Frame=s.Frame.substr(1,2)),s.Base=u[4][0],s.TF=u[4][1],u[4].length>=4&&(s.TF2=u[4][3]),$.each(d,function(e,t){var i=/^([0-9]+)([A-Z]{2})(-[A-Z])?$/g,s=i.exec(t);if(4==s.length){var n={id:e+1,vpc:s[1],colour:s[2]};o.push(n)}})}else if(_this.updateLocalStorage)for(var g=0;g<localStorage.length;g++){var v=localStorage.key(g).split(".");"Basket"==v[0]&&"accessories"==v[1]&&o.push(JSON.parse(localStorage.getItem(localStorage.key(g)))),"Stroller"==v[0]&&"modules"==v[1]&&(s[v[2]]=localStorage.getItem(localStorage.key(g))),"Positions"==v[0]&&"position"==v[1]&&(n=localStorage.getItem(localStorage.key(g))),"Stroller"==v[0]&&"stroller"==v[1]&&(r=localStorage.getItem(localStorage.key(g))),"Stroller"==v[0]&&"active"==v[1]&&(a=localStorage.getItem(localStorage.key(g)))}e.shareVpc||e.wishVpc||r==i.virtualProductId||(o=[],s={},n=!1,r="",a=!0),(!s||$.isEmptyObject(s))&&$.each(i.modules,function(e,t){t.colour&&(s[e]=t.colour)});var b=e.wishlistId||e.configId?!1:!0;_this.Stroller=new Stroller(i.virtualProductId,i.type,s),_this.Accessories=new Accessories,_this.Selected=new Selected,_this.Basket=new Basket(o,e.configId,e.wishlistId),_this.Total=new Total,_this.Action=new Action(b),_this.Wheel1=new Wheel(1),_this.Wheel2=new Wheel(2),_this.Wheel3=new Wheel(3),_this.Controls=new Controls,_this.Positions=new Positions(n),_this.Options=new Options,_this.Stroller.stroller=i,_this.Accessories.accessories=i.accessories,_this.Accessories.hide(),_this.Positions.init(_this.Stroller.stroller.setup),void 0,_this.Stroller.init(a),_this.Basket.init(),_this.Action.init(),_this.countryHasStore||(_this.Selected.hidePriceData(),_this.Total.hidePriceData(),_this.Action.hidePriceData(),_this.Basket.hidePriceData()),_this.Accessories.updateInterface(),$(window).on("resize",function(){_this.onResize()}),void 0!=window.orientation&&$(window).on("orientationchange",function(){_this.onResize()}),_this.setupColorpickersMenu(),_this.bTouch&&(_this.$productMenuContainer.on("touchstart",function(){_this.blurColorpickers()}),_this.$productExplorerContainer.on("touchstart",function(){_this.blurColorpickers()}),_this.$total.on("touchstart",function(){_this.blurColorpickers()}),_this.$selected.on("touchstart",function(){_this.blurColorpickers()}),_this.$sideBar.on("touchstart",function(){_this.blurColorpickers()}),_this.$background.on("touchstart",function(){_this.blurColorpickers()})),_this.initPopupInteraction(),_this.$background.hide(),$(document).on("fullImageLoaded",function(){_this.$background.fadeIn(2e3)}),_this.onResize(),window.bugaboo.theloadermask.removeMask(_this.$parent),TweenMax.to(_this.$sideBar,.5,{delay:1.2,css:{right:0},ease:Quad.easeOut}),_this.setStackingOrder(_this.$total,32),_this.setStackingOrder(_this.$productMenuContainer,33),_this.setStackingOrder(_this.$productMenu,34),_this.setStackingOrder(_this.$productExplorerContainer,35),_this.setStackingOrder(_this.$colorpickersContainer,40)})},this.testLocalStorage=function(){var e=!1,t="test",i=window.sessionStorage;try{i.setItem(t,"1"),i.removeItem(t),e=!0}catch(o){e=!1}return e},this.clearLocalStorage=function(){void 0,localStorage&&(localStorage.removeItem("Stroller.active"),localStorage.removeItem("Stroller.modules.Base"),localStorage.removeItem("Stroller.modules.Frame"),localStorage.removeItem("Stroller.modules.TF"),localStorage.removeItem("Stroller.stroller"),localStorage.removeItem("Stroller.name"),localStorage.removeItem("Stroller.price"))},this.resizeToWindow=function(e){if(this.bMobile)e.css("height","auto"),e.parentsUntil("body").css("height","auto");else{var t=$(window).height(),i=$(".b1-main-menu").height(),o=t-i-40;e.css("height",o),e.parentsUntil("body").css("height",o)}},this.formatPrice=function(e){return 2==Configurator.priceFormat&&(e+="",e=e.replace(".",",")),Configurator.currency+e},this.parseModulesData=function(e,t){for(node in t)break;t=t[node].colours;var i={Special:{colours:{},originalColours:{}}},o=!1,s=!1;if($.each(e,function(e,n){var r=!1,a=e;if(o="Special"==e?!0:!1,!r)if(n.colours){var l={},c={},h=[],u=!1;if($.each(n.colours,function(i,r){r.id||(void 0,r.id=r.vp),"Frame"==e&&r.special||(u||(u=o?r.frameColor:r.id),o&&(n.colours[i].special=!0),n.colours[i].price=parseFloat(n.colours[i].price),n.colours[i].price||_this.countryHasStore||(n.colours[i].price=0),n.colours[i].atp<1&&!_this.countryHasStore&&(n.colours[i].atp=1),"Frame"==e||n.colours[i].price||(n.colours[i].price=0,s=!0),n.colours[i].selected=t[a]&&n.colours[i].id==t[a]?!0:!1,n.colours[i].code=i,c[i]=n.colours[i],"Extension"==e?l[i]=n.colours[i]:l[r.id]=n.colours[i],h.push(r.id))}),n.colours=l,n.originalColours=c,n.colour=t[a]?t[a]:"",n.colour in n.colours||(n.colour=u),n.icons&&$.each(n.icons,function(e,t){n.icons[e]=_this.urls.iconsPrefix+t}),o){var d=n.colours;$.each(d,function(e,t){i.Special.colours[e]=t});var p=n.originalColours;$.each(p,function(e,t){i.Special.originalColours[e]=t})}else i[e]=n}else s=!0}),$.each(i,function(e,t){if("Special"==e){var o=t.colours;$.each(o,function(e,t){i.Frame.colours[e]=t});var s=t.originalColours;$.each(s,function(e,t){i.Frame.originalColours[e]=t})}}),"Extension"in e){var n=e.Extension,r=e.Frame;$.each(n.originalColours,function(t,i){return i.id==n.colour&&i.frameColor==r.colour?(e.Extension.colour=i.itemcode+"_"+i.id,!1):void 0})}return s&&_this.countryHasStore&&(void 0,!Configurator.debugmode)?(window.location="/maintanance",!1):(void 0,i)},this.parseAccessoriesData=function(e){var t=[],i=[],o=[];return $.each(e,function(e,i){if(i.included.length>0){var o=e;$.each(i.included,function(e,i){var s={};s.master=o,s.slave=i,t.push(s)})}}),$.each(e,function(e,o){var s={};if(o.vpcode&&null!==o.vpcode&&o.label&&null!==o.label&&Object.keys(o.colours).length>0){var n={},r=[];if($.each(o.colours,function(e,t){if(!o.colours[e].price){if(_this.countryHasStore)return void void 0;_this.countryHasStore||(void 0,o.colours[e].price=0)}o.colours[e].price=parseFloat(o.colours[e].price),o.colours[e].selected=!1,n[t.id]=o.colours[e],o.colours[e].atp>0&&r.push(t.id)}),_.keys(n).length<1)return;s.colours=n,s.mainitemcode=e,s.master=o.included.length?!0:!1,s.slave=!1,s.vpc=o.vpcode,s.label=o.label,s.colour=r.length>0?r[0]:_.keys(n)[0],s.position=o.position?o.position:"X",s.angle=o.angle?o.angle:"115",s.price=s.colours[s.colour].price,s.master&&(s.originalPrice=s.price),s.icons=o.icons,s.wheel=o.wheel,$.each(t,function(e,t){t.slave==s.mainitemcode&&(this.slaveLabel=s.label,this.slavePrice=s.price,this.slaveVpc=s.vpc,this.slaveColour=s.colour,s.slave=!0)}),i.push(s)}}),$.each(i,function(e,i){i.master&&(i.vpcIncluded=[],$.each(t,function(e,t){t.master==i.mainitemcode&&($.each(i.colours,function(e,i){i.price+=t.slavePrice}),i.label=i.label+" + "+t.slaveLabel,i.groupedAccessory=!0,i.vpcIncluded.push({additionalVpc:t.slaveVpc,additionalVpcColour:t.slaveColour}))})),i.slave||(i.colour in i.colours&&(i.price=i.colours[i.colour].price),o.push(this))}),void 0,o},this.parseIncompatibilitiesData=function(e){var t={};return $.each(e,function(e,i){e&&(t[e]=[],i=i.split(", "),$.each(i,function(i,o){t[e].push(o)}))}),t},this.setupColorpickersMenu=function(){var e=this;this.$colorpickerMenu.find(".colorpicker-menu-item").on("click",function(){var t="#"+$(this).data("id");e.$wheel1.hide(),e.$wheel2.hide(),e.$wheel3.hide(),e.$colorpickerMenuButton1.removeClass("active"),e.$colorpickerMenuButton2.removeClass("active"),e.$colorpickerMenuButton3.removeClass("active"),$(this).addClass("active"),e.Wheel1.viewMode(e.sColorpickerMode),e.Wheel2.viewMode(e.sColorpickerMode),e.Wheel3.viewMode(e.sColorpickerMode),$(t).show()}),e.$wheel1.on("click",function(){e.onSelectSimpleSwatch($(this))}),e.$wheel2.on("click",function(){e.onSelectSimpleSwatch($(this))}),e.$wheel3.on("click",function(){e.onSelectSimpleSwatch($(this))})},this.onSelectSimpleSwatch=function(e){"simple"==this.sColorpickerMode&&(this.$wheel1.hide(),this.$wheel2.hide(),this.$wheel3.hide(),e.show())},this.onResize=function(){var e=window.innerWidth;if(768>e)this.bMobile=!0,this.$selected.insertBefore(this.$mobilePositionMenu),this.$productExplorerContainer.insertBefore(this.$mobilePositionMenu),this.$total.insertAfter(this.$mobilePositionMenu),this.$colorpickersContainer.insertAfter(this.$mobilePositionMenu),this.$productExplorerContainer.css({margin:0}),this.$colorpickerMenu.css({left:0,right:"auto"});else{this.bMobile=!1,this.$selected.appendTo(this.$parent),this.$total.appendTo(this.$parent),this.$colorpickersContainer.appendTo(this.$parent),this.$productExplorerContainer.appendTo(this.$parent);var t,i,o,s,n,r,a=0,l=10;if(this.Wheel1.resize(),this.Wheel2.resize(),this.Wheel3.resize(),1270>=e)a=155,l=25,t="29%",i=155,n="auto",r="auto",960>=e&&(a=0,l=0,t=50,i=e-409,n="auto",r=0),this.$colorpickersContainer.css({top:t,left:i,pointerEvents:"auto"});else{var c=this.bIE?"auto":"none";this.$colorpickersContainer.css({top:"50%",left:"50%",pointerEvents:c})}o=-(this.$productExplorerContainer.width()/2)+a,s=-(this.$productExplorerContainer.height()/2+l),this.$productExplorerContainer.css({marginLeft:o,marginTop:s})}this.resizeToWindow(this.$parent),this.determineColorpickerMode()},this.determineColorpickerMode=function(){var e=window.innerWidth;1270>=e?"simple"!=this.sColorpickerMode&&(this.sColorpickerMode="simple",this.setColorpickersViewMode()):"normal"!=this.sColorpickerMode&&(this.sColorpickerMode="normal",this.setColorpickersViewMode())},this.setColorpickersViewMode=function(){""!=this.sColorpickerMode&&("simple"==this.sColorpickerMode?(this.$wheel1.hide(),this.$wheel2.hide(),this.$wheel3.hide(),this.Wheel1.getVisible()||this.Wheel2.getVisible()||this.Wheel3.getVisible()?(this.Wheel1.getVisible()?this.$wheel1.show():this.Wheel2.getVisible()?this.$wheel2.show():this.Wheel3.getVisible()&&this.$wheel3.show(),this.$colorpickerMenuButton1.removeClass("active"),this.$colorpickerMenuButton2.removeClass("active"),this.$colorpickerMenuButton3.removeClass("active"),this.$colorpickerMenuButton1.addClass("active"),this.$colorpickerMenu.show()):this.$colorpickerMenu.hide()):(this.$colorpickerMenu.hide(),this.Wheel1.getVisible()&&this.$wheel1.show(),this.Wheel2.getVisible()&&this.$wheel2.show(),this.Wheel3.getVisible()&&this.$wheel3.show()),this.Wheel1.viewMode(this.sColorpickerMode),this.Wheel2.viewMode(this.sColorpickerMode),this.Wheel3.viewMode(this.sColorpickerMode),this.setStackingOrder(this.$total,32),this.setStackingOrder(this.$productExplorerContainer,33),this.setStackingOrder(this.$productMenuContainer,34),this.setStackingOrder(this.$productMenu,35),this.setStackingOrder(this.$colorpickersContainer,36))},this.onColorpickerFocus=function(e){if(!this.Basket.getBasketState()||"simple"==this.sColorpickerMode){switch(e){case"wheel1":this.Wheel2.blur(),this.Wheel3.blur();break;case"wheel2":this.Wheel1.blur(),this.Wheel3.blur();break;case"wheel3":this.Wheel1.blur(),this.Wheel2.blur()}this.setStackingOrder(this.$total,32),this.setStackingOrder(this.$productMenuContainer,33),this.setStackingOrder(this.$productMenu,34),this.setStackingOrder(this.$productExplorerContainer,35),this.setStackingOrder(this.$colorpickersContainer,40)}},this.onColorpickerBlur=function(){this.setStackingOrder(this.$productMenu,36),this.setStackingOrder(this.$productMenuContainer,35),this.setStackingOrder(this.$total,34);var e=this.bIE?32:33,t=this.bIE?33:32;this.setStackingOrder(this.$colorpickersContainer,e),this.setStackingOrder(this.$productExplorerContainer,t)},this.blurColorpickers=function(){this.Wheel1.blur(),this.Wheel2.blur(),this.Wheel3.blur()},this.lockColorpickers=function(e){this.Wheel1.lock(e),this.Wheel2.lock(e),this.Wheel3.lock(e)},this.initPopupInteraction=function(){this.$buttonStartFromScratch.on("click",function(){$.magnificPopup.close()}),this.$buttonRemoveStroller.on("click",function(){Configurator.Basket.removeStroller(),$.magnificPopup.close()})},this.showErrorNotification=function(){this.$parent.hide(),this.$a1TextNoConfigurator.show()},this.setStackingOrder=function(e,t){e.css("z-index",t)}}function Controls(){var e=$("#controls");this.show=function(){e.show()},this.hide=function(){e.hide()},this.updateInterface=function(){}}function Options(){var e=$("#options"),t=($("#wishlist_url"),$("#sharer_url"));t.click(function(){addthis_sendto("more")}),this.show=function(){e.show()},this.hide=function(){e.hide()},this.updateInterface=function(){var e=Configurator.urls.shareUrl+Configurator.Stroller.getFullVPC(!0);Configurator.urls.wishUrl+Configurator.Stroller.getFullVPC(!0),addthis_share={url:e,title:t.data("title"),description:t.data("description")}}}function Positions(e){var t=$(".positions"),i=t.find("li"),o=$(".toggle-position"),s=$(".positions-mobile ul"),n=s.find("li");this.position=e,this.positions={},this.positionsCount=0;var r=this;this.show=function(){t.show()},this.hide=function(){t.hide()},this.init=function(e){var t=1;$.each(e,function(e,i){t++<=2&&(r.positionsCount++,r.positions[e]=i,$.each(Configurator.Stroller.stroller.modules,function(t,i){"Frame"!=t&&(r.positions[e].colours[t]=i.colour)}))}),r.position||(r.position=1),this.updateInterface()},this.getCurrentPosition=function(){return this.positions[this.position]},this.setPosition=function(e){this.position=e,this.setToggle(),Configurator.setLocalStorageItem("Positions.position",e),$.each(Configurator.Basket.accessories,function(e,t){t.calculatePosition()}),Configurator.Basket.updateInterfaceUpdateStroller(),Configurator.Stroller.updateInterface(),Configurator.gtm&&Configurator.gtm.updateGTM("C3","setposition","detail")},this.updateInterface=function(){t.empty();var e,a;r.positionsCount>=2?($.each(this.positions,function(o,l){l.display!==!1&&(e=i.clone(),e.find("span").addClass("icon-stroller-"+l.icon).attr("data-id",o),r.position==o&&e.find("span").addClass("active"),e.show(),t.append(e),a=n.clone(),a.find("span").addClass("icon-stroller-"+l.icon).attr("data-id",o),r.position==o&&a.find("span").addClass("active"),a.show(),s.append(a))}),this.setToggle()):o.hide(),this.initClickHandlers()},this.initClickHandlers=function(){var e;$(".set-position-stroller").off("click").on("click",function(i){i.preventDefault(),e=$(this).attr("data-id"),t.find("span").removeClass("active"),t.find("span[data-id='"+e+"']").addClass("active"),s.find("span").removeClass("active"),s.find("span[data-id='"+e+"']").addClass("active"),r.setPosition($(this).data("id"))})},this.setToggle=function(){var e=$(".toggle-position-slider");1==this.position?e.removeClass("down"):e.addClass("down")}}function Selected(){var e=$("#selected"),t=this;void 0,this.show=function(){e.show()},this.hide=function(){e.hide()},this.hidePriceData=function(){$("#selected-price").hide()},this.getSelectedAccessory=function(){return this.selected?Configurator.Basket.getAccessoryById(this.selected):!1},this.isStrollerSelected=function(){return!this.selected},this.selectStroller=function(){this.selected=!1,this.updateInterface(),Configurator.Wheel1.hide(),Configurator.Wheel2.hide(),Configurator.Wheel3.hide(),Configurator.Stroller.isActive()&&(Configurator.Wheel1.updateInterface(),Configurator.Wheel2.updateInterface(),Configurator.Wheel3.updateInterface(),Configurator.Stroller.updateInterface(),Configurator.Controls.updateInterface(),Configurator.Basket.updateInterface()),Configurator.setColorpickersViewMode()},this.selectAccessory=function(e){this.selected=e,this.updateInterface(),Configurator.Wheel1.hide(),Configurator.Wheel2.hide(),Configurator.Wheel3.hide(),Configurator.Wheel1.updateInterface(),Configurator.Wheel2.updateInterface(),Configurator.Wheel3.updateInterface(),Configurator.Stroller.updateInterface(),Configurator.Controls.updateInterface(),Configurator.Basket.updateInterface(),Configurator.setColorpickersViewMode()},this.updateInterface=function(){var i,o;if(t.selected){this.setSubLabelState(!1);var s=Configurator.Basket.getAccessoryById(t.selected);i=s.label.replace("3","³"),e.find("#selected-label").html(i),e.find("#selected-price").html(Configurator.formatPrice(s.price)),this.show()}else if(Configurator.Stroller.active){i=Configurator.Stroller.stroller.label.replace("3","³");var n=Configurator.Stroller.stroller.modules.Frame.colour,r=Configurator.Stroller.stroller.modules.Special.colours[n];
r?(o=r.label.toLowerCase(),this.setSubLabelState(!0,o)):this.setSubLabelState(!1),e.find("#selected-label").html(i),e.find("#selected-price").html(Configurator.formatPrice(Configurator.Stroller.stroller.price)),this.show()}else this.hide()},this.setColour=function(e,t,i){var o=Configurator.Selected.getSelectedAccessory();o?o.setColour(e,i):Configurator.Stroller.handleColourChange(t,e)},this.setSubLabelState=function(e,t){e?$("#selected-special").html(t):$("#selected-special").empty()}}function Stroller(e,t,i){var o=$("#stroller"),s=this;void 0,this.sortColours=function(e){var t={Frame:!1,Base:!1,TF:!1,TF2:!1};return $.each(t,function(i){e[i]&&(t[i]=e[i],delete e[i])}),$.each(e,function(i){t[i]=e[i]}),$.each(t,function(e,i){i||delete t[e]}),t},this.stroller,this.loadedColours=s.sortColours(i),this.fullVpc=!1,this.buyVpc=!1,this.wheels={1:null,2:null,3:null},this.setActive=function(e){this.active="true"!=e&&1!=e||0==e&&"false"==e?!1:!0},this.isActive=function(){return this.active},this.handleFrameColourChange=function(e,t){function i(e){void 0,s.stroller.modules.Base.colours={},s.stroller.modules.TF.colours={},s.stroller.modules.Base.colours[e]=s.stroller.modules.Frame.colours[e],s.stroller.modules.TF.colours[e]=s.stroller.modules.Frame.colours[e],s.setColour("Frame",e),s.setColour("Base",e),s.setColour("TF",e)}function o(e){void 0,t&&(s.resetSelectedState("Base",s.stroller.modules.Base.colour),s.resetSelectedState("TF",s.stroller.modules.TF.colour),s.stroller.modules.TF2&&s.resetSelectedState("TF2",s.stroller.modules.TF2.colour)),void 0,$.each(s.stroller.modules.Base.originalColours,function(t,i){(i.frameColor==e||null==i.frameColor)&&(void 0,n[i.id]=i)}),$.each(s.stroller.modules.TF.originalColours,function(e,t){r[t.id]=t}),"Extension"in s.stroller.modules&&$.each(s.stroller.modules.Extension.originalColours,function(t,i){i.frameColor==e&&(s.stroller.modules.Extension.colour=i.code)}),s.stroller.modules.Base.colours=n,s.stroller.modules.TF.colours=r,void 0,a=s.returnSelectedColour("Base"),l=s.returnSelectedColour("TF"),void 0,s.stroller.modules.Base.colour=a,s.stroller.modules.TF.colour=l,s.setColour("Frame",e),s.setColour("Base",a),s.setColour("TF",l)}void 0,void 0;var n={},r={},a="",l="";if(t&&s.stroller.modules.Special&&s.stroller.modules.Special.colours[s.stroller.modules.Base.colour]?(i(s.stroller.modules.Base.colour),void 0):s.stroller.modules.Frame.colours[e]&&s.stroller.modules.Frame.colours[e].special?(i(e),void 0):(void 0,o(e)),t)return void this.updateInterface();if(Object.keys(this.stroller.modules.Base.colours).length<2)switch(this.stroller.modules.Base.wheel){case"1":Configurator.Wheel1.hide(),Configurator.Wheel1.updateInterface();break;case"2":Configurator.Wheel2.hide(),Configurator.Wheel2.updateInterface();break;case"3":Configurator.Wheel3.hide(),Configurator.Wheel3.updateInterface()}else switch(this.stroller.modules.Base.wheel){case"1":Configurator.Wheel1.updateInterface();break;case"2":Configurator.Wheel2.updateInterface();break;case"3":Configurator.Wheel3.updateInterface()}if(Object.keys(this.stroller.modules.TF.colours).length<2)switch(this.stroller.modules.TF.wheel){case"1":Configurator.Wheel1.hide(),Configurator.Wheel1.updateInterface();break;case"2":Configurator.Wheel2.hide(),Configurator.Wheel2.updateInterface();break;case"3":Configurator.Wheel3.hide(),Configurator.Wheel3.updateInterface()}else switch(this.stroller.modules.TF.wheel){case"1":Configurator.Wheel1.updateInterface();break;case"2":Configurator.Wheel2.updateInterface();break;case"3":Configurator.Wheel3.updateInterface()}},this.init=function(t){void 0,void 0,void 0,void 0,this.setActive(t),Configurator.setLocalStorageItem("Stroller.name",s.stroller.label),Configurator.setLocalStorageItem("Stroller.stroller",e),Configurator.setLocalStorageItem("Stroller.active",this.isActive()),this.loadedColours.Frame||(this.loadedColours.Frame="AL"),this.loadedColours&&!$.isEmptyObject(this.loadedColours)&&($.each(this.loadedColours,function(e,t){var i=s.stroller.modules[e];void 0,i&&(s.stroller.modules[e].colour=t,$.each(Configurator.Positions.positions,function(i){Configurator.Positions.positions[i].colours[e]=t}))}),s.handleFrameColourChange(s.stroller.modules.Frame.colour,!0)),this.updatePrice(),Configurator.setLocalStorageItem("Stroller.price",s.stroller.price),Configurator.Basket.addStroller(),this.updateInterface(),Configurator.gtm&&Configurator.gtm.updateGTM("C3","landing","detail")},this.show=function(){void 0,o.show()},this.hide=function(){void 0,o.hide()},this.returnSelectedColour=function(e){var t;return $.each(s.stroller.modules[e].colours,function(i){s.stroller.modules[e].colours[i].selected&&(t=i)}),t},this.resetSelectedState=function(e,t){return void 0,$.each(s.stroller.modules[e].colours,function(i){s.stroller.modules[e].colours[i].selected=i==t}),!0},this.handleColourChange=function(e,t){void 0,"Frame"==e?this.handleFrameColourChange(t,!1):(void 0,this.setColour(e,t)),this.updatePrice(),Configurator.Total.calculateTotal(),Configurator.Basket.updateInterfaceUpdateStroller(),this.updateInterface(),Configurator.gtm&&Configurator.gtm.updateGTM("C3","modulecolourchanged","detail")},this.setColour=function(e,t){void 0,this.stroller.modules[e].colour=t,this.resetSelectedState(e,t),$.each(Configurator.Positions.positions,function(i){Configurator.Positions.positions[i].colours[e]=t}),Configurator.setLocalStorageItem("Stroller.modules."+e,t)},this.updatePrice=function(){var e=0;$.each(this.stroller.modules,function(t,i){if(void 0,i.colour){var o=i.colours[i.colour];if(o&&o.price){if(("Base"==t||"TF"==t)&&o.special)return;void 0,e+=o.price,void 0}}}),this.stroller.price=e.toFixed(2)},this.updateInterface=function(){void 0,this.fullVpc=this.getFullVPC(),this.buyVpc=this.getBuyVPC();var e=50;e=this.isActive()?Configurator.Basket.accessoriesCount>0?2:e:2,Configurator.debugmode&&($("#selected").find(".temp").remove().end().append('<div class="temp" style="clear:both;color:orange">fullVpc: '+s.fullVpc+"</div>"),$("#stroller .content img").attr("src",Configurator.urls.virtualStudioUrlPrefix+this.vpc)),Configurator.Options.updateInterface(),Configurator.Selected.updateInterface(),_.delay(function(){Configurator.Total.updateInterface()},0);var t={frames:e,frame:1,src:this.getImagePath(),zoom:!0};window.bugaboo.productexplorer.update(t)},this.getImagePath=function(){var e="";return Configurator.Selected.isStrollerSelected()&&(e+="&stroller=1"),Configurator.Stroller.isActive()||(e+="&ghost=true"),Configurator.urls.virtualStudioUrlPrefix+this.fullVpc+e},this.getOosItems=function(){var e={stroller:{},accessories:{}};return void 0,(this.stroller.modules.Base.colours[this.stroller.modules.Base.colour].atp<1||this.stroller.modules.Frame.colours[this.stroller.modules.Frame.colour].atp<1||this.stroller.modules.TF.colours[this.stroller.modules.TF.colour].atp<1||this.stroller.modules.TF2&&this.stroller.modules.TF2.colours[this.stroller.modules.TF2.colour].atp<1||this.stroller.modules.Extension&&this.stroller.modules.Extension.colours[this.stroller.modules.Extension.colour].atp<1||this.stroller.modules.Adapter&&this.stroller.modules.Adapter.colours[this.stroller.modules.Adapter.colour].atp<1||this.stroller.modules.Bassinet&&this.stroller.modules.Bassinet.colours[this.stroller.modules.Bassinet.colour].atp<1)&&(e.stroller[this.stroller.virtualProductId]={label:this.stroller.label,sublabel:this.stroller.modules.Frame.colours[this.stroller.modules.Frame.colour].special?this.stroller.modules.Frame.colours[this.stroller.modules.Frame.colour].label:"",modules:{frame:{selected:this.stroller.modules.Frame.colours[this.stroller.modules.Frame.colour].label,atp:this.stroller.modules.Frame.colours[this.stroller.modules.Frame.colour].atp},base:{selected:this.stroller.modules.Base.colours[this.stroller.modules.Base.colour].label,atp:this.stroller.modules.Base.colours[this.stroller.modules.Base.colour].atp},tf:{selected:this.stroller.modules.TF.colours[this.stroller.modules.TF.colour].label,atp:this.stroller.modules.TF.colours[this.stroller.modules.TF.colour].atp},tf2:this.stroller.modules.TF2?{selected:this.stroller.modules.TF2.colours[this.stroller.modules.TF2.colour].label,atp:this.stroller.modules.TF2.colours[this.stroller.modules.TF2.colour].atp}:null,extension:this.stroller.modules.Extension?{selected:this.stroller.modules.Extension.colours[this.stroller.modules.Extension.colour].label,atp:this.stroller.modules.Extension.colours[this.stroller.modules.Extension.colour].atp}:null,adapter:this.stroller.modules.Adapter?{selected:this.stroller.modules.Adapter.colours[this.stroller.modules.Adapter.colour].label,atp:this.stroller.modules.Adapter.colours[this.stroller.modules.Adapter.colour].atp}:null,bassinet:this.stroller.modules.Bassinet?{selected:this.stroller.modules.Bassinet.colours[this.stroller.modules.Bassinet.colour].label,atp:this.stroller.modules.Bassinet.colours[this.stroller.modules.Bassinet.colour].atp}:null}}),$.each(Configurator.Basket.accessories,function(t,i){i.colours[i.colour].atp<1&&(e.accessories[i.colours[i.colour].itemcode]=i.label)}),e},this.getFullVPC=function(){var e=this.generateVpcPrefix()+this.generateVpcSuffix(!0,!0);return this.fullVpc||(this.fullVpc=e),e},this.getBuyVPC=function(){var e=this.generateVpcPrefix()+this.generateVpcSuffix(!1,!0);return e},this.getWishVPC=function(){var e=this.generateVpcPrefix()+this.generateVpcSuffix(!0,!0);return e},this.generateVpcPrefix=function(){var e,t,i=this.stroller.virtualProductId,o="",s="",n=Configurator.Positions.getCurrentPosition();o+=2==n.moduleType.length&&2==n.facing.length?n.moduleType[0]+n.facing[0]+n.moduleType[1]+n.facing[1]:n.moduleType+n.facing,e=n.position,t=this.stroller.modules.Frame.colours[this.stroller.modules.Frame.colour]&&this.stroller.modules.Frame.colours[this.stroller.modules.Frame.colour].special?this.stroller.modules.Frame.colours[this.stroller.modules.Frame.colour].frameColor:n.colours.Frame,void 0,s+="(",s+=n.colours.Base?n.colours.Base:"",s+=")(",s+=n.colours.TF,s+=")",n.colours.TF2&&(s+="(",s+=n.colours.Base?n.colours.Base:"",s+=")(",s+=n.colours.TF2,s+=")");var r=i+"_"+e+"_"+o+"_("+t+")_"+s;return r},this.generateVpcSuffix=function(e,t){var i=Configurator.Selected.getSelectedAccessory(),o="";$.each(Configurator.Basket.accessories,function(s,n){if(e||!(n.colours[n.colour].atp<1)){var r="_"+n.generateAccVPC(!0);t&&n.vpcIncluded&&n.vpcIncluded.length&&$.each(n.vpcIncluded,function(e,t){r+="_"+n.generateAdditionalAccVPC(t.additionalVpc,t.additionalVpcColour,!0)}),r&&(i.id==n.id?o=r+o:o+=r)}}),o.length&&(o="!"+o.substr(1,o.length));var s=o;return s},this.getData=function(){var e=this.generateVpcPrefix(),t=!0;return $.each(this.stroller.modules,function(e,i){i.colours[i.colour]&&(void 0==i.colours[i.colour].atp||i.colours[i.colour].atp<1)&&(t=!1)}),{id:0,vpc:this.stroller.vpc,from:"",price:this.stroller.price,available:t,img_sml:Configurator.urls.virtualStudioUrlPrefix+e+"&width=100&shadow=false",img_lrg:Configurator.urls.virtualStudioUrlPrefix+e,label:this.stroller.label,currency:Configurator.currency}}}function Total(){var e=$("#total");this.total=0,this.show=function(){e.show()},this.hide=function(){e.hide()},this.hidePriceData=function(){$("#total-label").hide(),$("#total-price").hide()},this.calculateTotal=function(){var e=0;Configurator.Stroller.isActive()&&(e+=1*Configurator.Stroller.stroller.price);var t=Configurator.Basket.accessories;$.each(t,function(t,i){e+=i.price}),this.total=e.toFixed(2)},this.updateInterface=function(){e.find("#total-price").html(Configurator.formatPrice(this.total)),Configurator.Selected.getSelectedAccessory()||Configurator.Stroller.isActive()?this.show():this.hide()}}function Wheel(e){var t=$("#wheel"+e),i=this;this.number=e,this.init=function(){t.colorpicker({miniconfigurator:!1,countryHasStore:Configurator.countryHasStore})}(),this.showForAccessory=function(){var e=Configurator.Selected.getSelectedAccessory(),i=e.colours,o=e.colour,s=e.icons,n=this.formulateData(i,o,s,null,"accessory");n.colors.length>1?t.colorpicker("show",n):this.hide()},this.showForStrollerModule=function(e){void 0;var i=Configurator.Stroller.stroller.modules[e],o=i.colours,s=i.colour,n=i.icons,r=this.formulateData(o,s,n,e,"Frame"==e?"frame":"stroller");r.colors.length>1?t.colorpicker("show",r):this.hide()},this.hide=function(){t.colorpicker("hide")},this.resize=function(){t.colorpicker("resize")},this.blur=function(){t.colorpicker("blur")},this.lock=function(e){t.colorpicker("lock",e)},this.viewMode=function(e){t.colorpicker("setViewMode",e)},this.getVisible=function(){return t.colorpicker("getVisible")},this.updateInterface=function(){var e=Configurator.Selected.getSelectedAccessory();if(e)e.wheel==this.number?this.showForAccessory():this.hide();else{var t=Configurator.Stroller.stroller.modules;$.each(t,function(e,t){t.colours&&t.wheel&&t.wheel==i.number&&i.showForStrollerModule(e)})}},this.formulateData=function(e,t,i,o,s){var n=[];void 0,$.each(e,function(e,i){i.label=i.label.toLowerCase(),t==i.id&&(i.selected=!0),i.available=i.atp>0?!0:!1,"XX"!=i.id&&n.push(i)});var r="Frame"==o?2:1,a="Frame"==o?"right":"left",l={colors:n,sType:r,sLine:a,sIcon:i&&i["default"]?i["default"]:"",module:o,sMode:s};return l}}require(["conditioner","responsive-images"],function(e,t){e.init(),t.init()}),define("a11-list",["underscore"],function(e){var t={load:function(e){var t=$("li > a",e);this.addEventHandlers(t)},addEventHandlers:function(t){var i=this.toggleItem;$(t).on("click",function(t){t.preventDefault(),e.defer(i,this)})},toggleItem:function(e){$(e).parent().toggleClass("open"),$(e).siblings(".more").slideToggle("fast")},unload:function(){}};return t}),define("a15-intro-header",[],function(){var e={menuHeight:0,fixed:!1,sharebutton:$("#sharer_url"),scrollOffsetShareBtn:$("#sharer_url").offset().top,load:function(e){this.setup(e),this.scrollUpdates(e),$(window).scroll(function(){this.scrollUpdates(e)}.bind(this))},setup:function(){this.sharebutton.click(function(){addthis_sendto("more")})},switchFixation:function(){this.fixed?this.sharebutton.addClass("fixed").css("top",this.menuHeight):this.sharebutton.removeClass("fixed").css("top","inherit")},scrollUpdates:function(e){this.menuHeight=$(".menu-container").height(),this.mobileState||this.touchDevice||this.scrollPageShareBtn(e)},scrollPageShareBtn:function(e){if(window.innerWidth,!this.mobileState&&!this.touchDevice){var t=this.positionY(e);t<this.scrollOffsetShareBtn-this.menuHeight?this.fixed&&(this.fixed=!1,this.switchFixation()):this.fixed||(this.fixed=!0,this.switchFixation())}},positionY:function(e){return window.pageYOffset||e.scrollTop},unload:function(){}};return e}),define("a2-text-image",[],function(){"use strict";var e=function(e,t){this.element=e,this.options=t,this.header=e.querySelector("header"),this.init()};return e.prototype={init:function(){void 0,this.addItemcodeElement(),this.updateItemcode()},addItemcodeElement:function(){var e=this.header.querySelector("h3");$(e).hasClass("heading-margin")&&$(e).removeClass("heading-margin"),this.itemcode=this.header.querySelector(".itemcode"),this.itemcodelabel=this.itemcode.textContent},updateItemcode:function(){var e=this.itemcodelabel,t=this.itemcode;$.subscribe("a2-dynamic-itemcode",function(i,o){$(t).empty().text(e.length>0?e+": "+o:o)})}},e.prototype.unload=function(){},e}),define("a4-video",["underscore"],function(e){"use strict";var t=function(e,t){this.$element=$(e),this.component_id=t.component_id,this.options=t,window.bugaboo.videoPlayer||(window.bugaboo.videoPlayer={}),window.bugaboo.videoPlayer["_"+this.component_id]=this,this.bTouch=$("html").hasClass("touch"),this.init()};return t.prototype={init:function(){this.$currentOverlayContainer,this.$currentItemContainer,this.$videoContainer,this.$closeVideoButton,this.bcplayer,this.experience,this.videoPlayer,this.autoplay=this.bTouch?!1:!0,this.videoObject=this.setupPlayerCode(),this.bTouch||(this.$titlesContainer=$(".titles-container",this.$element),this.repositionPretitle()),this.setupPublicMethods(),this.determineCurrentVideo(),this.setupGlobalBrightcoveHandlers(),this.addResizeEventHandler(),this.bTouch?this.initBrightcoveVideoplayer():this.initMouseHandlers(),this.checkVideoStill()},setupPublicMethods:function(){var t=e.bind(this.beforeMove,this),i=e.bind(this.afterSlideChange,this);bugaboo.videoPlayer["_"+this.component_id]={beforeMove:function(){t()},afterSlideChange:function(e){i(e)}}},setupGlobalBrightcoveHandlers:function(){var e=this;window.bugaboo.videoPlayer["_"+this.component_id].onTemplateLoaded=function(t){e.bcplayer=brightcove.api.getExperience(t)},window.bugaboo.videoPlayer["_"+this.component_id].onTemplateReady=function(){e.videoPlayer=e.bcplayer.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER),e.experience=e.bcplayer.getModule(brightcove.api.modules.APIModules.EXPERIENCE),e.videoPlayer.loadVideoByID(e.nCurrentVideoID),e.videoPlayer.addEventListener(brightcove.api.events.MediaEvent.BEGIN,$.proxy(e.onVideoBegin,e)),e.videoPlayer.addEventListener(brightcove.api.events.MediaEvent.COMPLETE,$.proxy(e.onVideoComplete,e))}},setupPlayerCode:function(){return'<object class="BrightcoveExperience"><param name="bgcolor" value="#FFF" /><param name="wmode" value="opaque"><param name="width" value="100%" /><param name="height" value="100%" /><param name="playerID" value="'+this.options.player_id+'" /><param name="playerKey" value="'+this.options.player_key+'" /><param name="isVid" value="true" /><param name="isUI" value="true" /><param name="dynamicStreaming" value="true" /><param name="htmlFallback" value="true" /><param name="showNoContentMessage" value="false" /><param name="includeAPI" value="true" /><param name="autoStart" value="'+this.autoplay+'" /><param name="templateLoadHandler" value="window.bugaboo.videoPlayer._'+this.component_id+'.onTemplateLoaded" /><param name="templateReadyHandler" value="window.bugaboo.videoPlayer._'+this.component_id+'.onTemplateReady" /><param name="secureConnections" value="true" /><param name="secureHTMLConnections" value="true" /></object>'},determineCurrentVideo:function(e){this.$currentItemContainer=void 0!=e?$(e.content[0]):$(".item-container",this.$element).first(),this.$currentOverlayContainer=$(".overlay-container",this.$currentItemContainer),this.$videoContainer=$(".video-player",this.$currentItemContainer),this.$closeVideoButton=$(".close-video",this.$currentItemContainer),this.nCurrentVideoID=this.$currentItemContainer.data("videoid")},initBrightcoveVideoplayer:function(){this.$videoContainer.append(this.videoObject),brightcove.createExperiences()},initMouseHandlers:function(){var e=this;this.$currentOverlayContainer.on("click",function(t){t.preventDefault(),$(this).hide(),e.$element.toggleClass("playing"),e.initBrightcoveVideoplayer()}),this.$closeVideoButton.on("click",function(t){t.preventDefault(),e.clearBrightcoveVideoplayer()})},clearMouseHandlers:function(){this.$currentOverlayContainer.off("click"),this.$closeVideoButton.off("click")},onVideoBegin:function(){this.bTouch&&this.$element.toggleClass("playing")},onVideoComplete:function(){this.bTouch||this.clearBrightcoveVideoplayer()},clearBrightcoveVideoplayer:function(){null!=this.videoPlayer&&(this.videoPlayer.removeEventListener(brightcove.api.events.MediaEvent.BEGIN),this.videoPlayer.removeEventListener(brightcove.api.events.MediaEvent.COMPLETE),this.videoPlayer=null,this.bcplayer=null),this.$element.removeClass("playing"),this.$videoContainer.empty(),this.bTouch||this.$currentOverlayContainer.show()},checkVideoStill:function(){var e=this,t=$(".item-container",this.$element);t.each(function(){if(e.bTouch){var t=$(this).find(".video-player");e.loadBrightcodeStill(t,$(this).data("videoid"))}else{var i=$(this).find(".overlay-container");i.hasClass("no-image")&&e.loadBrightcodeStill(i,$(this).data("videoid"))}})},loadBrightcodeStill:function(e,t){var i="//api.brightcove.com/services/library?command=find_video_by_id&video_id="+t+"&video_fields=videoStillURL&token=w90JchRq4xe2I6TlvRv5a4kdmwaKiWjj955YhvcYzeNCJVOvupKalA..";$.ajax({dataType:"jsonp",url:i,success:function(t){e.css("background-image","url("+t.videoStillURL+")")}})},addResizeEventHandler:function(){var t=e.bind(this.resizeHandler,this);window.addEventListener("resize",e.throttle(t,1e3),!1)},beforeMove:function(){this.bTouch||(this.repositionPretitle(),this.clearMouseHandlers(),this.clearBrightcoveVideoplayer())},afterSlideChange:function(e){this.bTouch?(this.clearBrightcoveVideoplayer(),this.determineCurrentVideo(e),this.initBrightcoveVideoplayer()):(this.determineCurrentVideo(e),this.initMouseHandlers())},resizeTouchDevice:function(){var e,t=$(".row",this.$element),i=$(window).width();t.length>0&&(i-=2*t.css("padding-left").replace(/px/gi,"")),e=.5625*i,this.experience&&this.experience.setSize(i,e)},repositionPretitle:function(){var e=null,t=0;this.$titlesContainer.length>0&&this.$titlesContainer.each(function(){e=$(this).find("h5"),!$(this).hasClass("no-title")&&e.length>0&&(t=-e.outerHeight(!0),e.css("top",t+"px"))})},resizeHandler:function(){this.bTouch?this.resizeTouchDevice():this.repositionPretitle()}},t.prototype.unload=function(){},t}),define("a7-feature-viewer",[],function(){"use strict";var e=function(e){this.element=e,this.$imageContainer=$(".image-container",e),this.$titleContainer=$(".text-container h3",e),this.$bodyTextContainer=$(".text-container p",e),this.$foldoutSelector=$(".tabSelector",e),this.$allFeatures=$(".features a",e),this.addEventHandlers()};return e.prototype={addEventHandlers:function(){var e=this,t=this.element,i=null;this.$allFeatures.on("click",function(o){o.preventDefault();var s=o.currentTarget.getAttribute("data-index");i=$("a[data-id=feature"+s+"]",t),e.setContainerImgHeight(),e.setActiveItem(i),e.setProductData(i),e.$foldoutSelector.hasClass("open")&&e.toggleFoldout()}),this.$foldoutSelector.on("click",function(t){t.preventDefault(),e.toggleFoldout()})},toggleFoldout:function(){$(".tabFilter").toggle(),this.$foldoutSelector.toggleClass("open")},setContainerImgHeight:function(){var e=this.$imageContainer.find("img").height();this.$imageContainer.css("height",e+"px")},setActiveItem:function(e){var t=e.text();this.$allFeatures.removeClass("active"),e.addClass("active"),this.$foldoutSelector.find(".title").text(t)},setProductData:function(e){var t=this;TweenMax.killTweensOf(this.$imageContainer),TweenMax.to(this.$imageContainer,.3,{css:{opacity:0},onComplete:function(){var i=new Image;i.src=e.attr("data-img"),t.$imageContainer.html(i),t.$titleContainer.html(e.text()),t.$bodyTextContainer.html(e.attr("data-text")),t.onLoadImage(i)}})},onLoadImage:function(e){var t=this;$(e).load(function(){t.$imageContainer.css("height","auto"),TweenMax.to(t.$imageContainer,.3,{css:{opacity:1}})})}},e.prototype.unload=function(){},e}),require(["conditioner","responsive-images"],function(e,t){e.init(),t.init()}),define("b1-main-menu",["image-resize"],function(e){"use strict";var t={mobileState:!1,homepageState:!1,touchDevice:!1,mobileSubmenuOpen:!1,currentYPosition:0,headerChangeOn:200,mobileMaxWidth:767,tabletMaxWidth:1024,load:function(t){var i;this.element=t,this.$logo=$(".logo",t),this.$bgright=$(".background-right",t),this.$primary=$(".primary",t),this.$primaryMenu=$(".primary ul",t),this.$primaryMenuElements=$(".primary ul li",t),this.$iconArrowSimpleDown=$(".icon-arrow-simple-down",this.$primary),this.$iconArrowSimpleUp=$(".icon-arrow-simple-up",this.$primary),this.$secondary=$(".secondary",t),this.$iconBasketSmall=$(".icon-basket-small",this.$secondary),this.$myaccount=$(".myaccount",this.$secondary),this.$iconaccount=$(".icon-account",this.$secondary),this.$submenuContainer=$(".submenu-container",this.element),this.$menuSearch=$(".search",this.element),this.$menuSearchHook=$(".addsearch-hook",this.element),this.$menuSearchWrapper=$(".search-wrapper",this.element),this.$menuSearchIcon=$(".search-wrapper .search-icon",this.element),this.$menuSearchField=$(".search-wrapper .search-input",this.element),this.$menuSearchResults=$("#addsearch-results",this.element),this.$menuSearchLabel=$(".search-label-tablet",this.element),this.$menuSearchMobile=$(".search-mobile",this.element),this.$menuSearchFieldMobile=$(".search-mobile .search-input",this.element),this.nScrollOffsetPercentage=0,this.bUpdateMenuElements=!0,this.currentYPosition=this.positionY(t),this.imageResize=e,this.checkStates(t),this.homepageState?(this.initLoadBackgroundImages(t),this.initHomepageMenu()):this.initMainMenu(),1==$(".addsearch-hook").data("addsearch")&&this.initSearchEngine(t),$(window).resize(function(e){e.preventDefault(),clearTimeout(i),i=setTimeout(function(){this.resizeUpdates(t),this.updateSearchResultsPosition()}.bind(this),10)}.bind(this)),this.resizeUpdates(t)},initMainMenu:function(e){this.initPrimaryMenu(e),this.initMobileMenu(e)},initPrimaryMenu:function(e){var t=this;$(".primary li",e).on("click",function(){t.mobileState||($(this).hasClass("open")&&!t.homepageState?t.closeMenu(e):t.homepageState?t.triggerSubmenuHomepage(e,this):t.openSubmenu(e,this))})},openSubmenu:function(e,t){this.checkClicksOutsideElement();var i="#submenu"+$(t).attr("data-submenu");$(".submenu-container").hasClass("open")&&this.closeMenu(e),$(t).hasClass("submenu-trigger")&&($(t).addClass("open"),$(i).addClass("open"),$(".submenus-container").addClass("show"),$(".icon-arrow-simple-down",t).toggleClass("icon-arrow-simple-down icon-arrow-simple-up"))},initMobileMenu:function(e){var t=this;$(".mobile-trigger",e).on("click",function(){$(this).hasClass("open")?t.closeMenu(e):1==t.mobileState&&t.openMobileMenu(e,this)}),$(".submenu-trigger",e).on("click",function(){1==t.mobileState&&t.openMobileSubmenu(e,this)}),$(".submenu-generic .back").on("click",function(e){t.backToMobileMenu(e)})},openMobileMenu:function(e,t){$(t).addClass("open"),$(".menu-container").addClass("mobile-open"),$(".mobile-trigger .icon-hamburger").addClass("icon-close-small")},openMobileSubmenu:function(e,t){var i="#submenu"+$(t).attr("data-submenu");this.mobileSubmenuOpen||$(t).hasClass("submenu-trigger")&&(this.mobileSubmenuOpen=!0,$(".submenus-container").addClass("show"),setTimeout(function(){$(".menu-container").addClass("menu-hide"),$(".submenus-container").addClass("submenu-show"),$(i).addClass("open")},50))},backToMobileMenu:function(){var e="#"+$(".submenus-container .open").attr("id");$(".menu-container").removeClass("menu-hide"),$(".submenus-container").removeClass("submenu-show"),setTimeout(function(){$(e).removeClass("submenu-open open"),this.homepageState&&$(e).css("display","none"),$(".submenus-container").removeClass("show"),this.mobileSubmenuOpen=!1}.bind(this),500)},initSearchEngine:function(e){var t,i=this,o=$(".addsearch-hook").data("addsearchlanguage"),s=$(".addsearch-hook").data("addsearchkey"),n=document.createElement("script");n.type="text/javascript",n.src="https://addsearch.com/js/?key="+s+"&amp;categories=2x"+o,$(this.$menuSearchWrapper,e).append(n),$(this.$menuSearchField,e).on({keyup:function(){i.updateSearchResultsPosition(),t=$(i.$menuSearchField).val(),0!=t?i.updateSearchResultsPosition():i.$menuSearchResults.hide()},blur:function(){i.updateSearchResultsPosition(),$(i.$menuSearch).is(".is-active")&&(i.$menuSearch.removeClass("is-active"),i.$menuSearchResults.hide(),i.$menuSearchField.val(""))},focus:function(){i.updateSearchResultsPosition()}}),$(this.$menuSearchLabel,e).on({click:function(){i.updateSearchResultsPosition(),i.$menuSearch.addClass("is-active"),i.$menuSearchField.focus()}}),$(this.$menuSearchIcon,e).on({click:function(){i.updateSearchResultsPosition(),i.$menuSearchField.focus()}}),$(this.$menuSearchMobile,e).on({click:function(){i.updateSearchResultsPosition(),i.$menuSearchFieldMobile.focus()}})},updateSearchResultsPosition:function(){var e=2,t=$(this.$menuSearchWrapper),i=t.height();Math.round(i+e),Math.round($(this.$menuSearchField).offset().left),$("#addsearch-results")},initHomepageMenu:function(e){this.positionHomepageMenu(e),this.positionHomepageSubmenus(e),this.animateSubmenuHomepage(e),this.initPrimaryMenu(e),this.initMobileMenu(e)},triggerSubmenuHomepage:function(e,t){var i="#submenu"+$(t).attr("data-submenu");$(".submenu-container").hasClass("open")&&!$(i).hasClass("open")?(this.closeSubmenuHomepage(e),setTimeout(function(){this.openSubmenuHomepage(e,t)}.bind(this),210)):$(i).hasClass("open")?(this.changeBackgroundImage(e),this.closeSubmenuHomepage(e)):this.openSubmenuHomepage(e,t)},openSubmenuHomepage:function(e,t){var i="#submenu"+$(t).attr("data-submenu"),o="#backgroundImage"+$(t).attr("data-submenu"),s=-($(i).height()/2);this.changeBackgroundImage(e,o),TweenMax.to($(t),.5,{css:{top:s},ease:Expo.easeInOut}),setTimeout(function(){this.fadeInHomepageSubmenu(t,i)}.bind(this),150)},closeSubmenuHomepage:function(){setTimeout(this.fadeOutHomepageSubmenu,80)},fadeInHomepageSubmenu:function(e,t){$(".icon-arrow-simple-down",e).addClass("icon-arrow-simple-up"),$(".icon-arrow-simple-up",e).removeClass("icon-arrow-simple-down"),$(e).addClass("open"),$(t).addClass("open"),$(t).stop().delay(100).fadeIn(300)},fadeOutHomepageSubmenu:function(){$(".icon-arrow-simple-up").addClass("icon-arrow-simple-down"),$(".icon-arrow-simple-down").removeClass("icon-arrow-simple-up"),$(".submenu-trigger").removeClass("open"),$(".submenu-container").removeClass("open"),$(".submenu-container").stop().fadeOut(300),TweenMax.to($(".submenu-trigger"),.7,{css:{top:0},ease:Expo.easeInOut})},initLoadBackgroundImages:function(e){this.$backgroundImageContainer=$(".background-image-container",e),this.$backgroundImageContainer.addClass("preloading"),this.setupLoader(e),this.showLoader(e),this.addHomepageBackgroundImageEvents(e)},addHomepageBackgroundImageEvents:function(){$(document).on("homepageImageLoaded",function(){$(window).width()<this.mobileMaxWidth&&this.calculateBackgroundImageSize()}.bind(this)),$(document).on("homepageHiddenImagesLoaded",function(){$(window).width()>this.mobileMaxWidth&&0==this.mobileState&&this.calculateBackgroundImageSize()}.bind(this))},removeHomepageImageLoader:function(){this.canvasLoader.hide(),this.$backgroundImageContainer.fadeIn(800),setTimeout(function(){this.$backgroundImageContainer.removeClass("preloading")}.bind(this),100)},setupLoader:function(e){$(e).append("<div id='b1-image-preloader' class='loader'></div>"),this.canvasLoader=new CanvasLoader("b1-image-preloader"),this.canvasLoader.setColor("#FFFFFF"),this.canvasLoader.setShape("spiral"),this.canvasLoader.setDiameter(25),this.canvasLoader.setDensity(50),this.canvasLoader.setRange(1),this.canvasLoader.setSpeed(2),this.canvasLoader.setFPS(30)
},showLoader:function(e){var t=$(".loader",e);this.canvasLoader.show(),t.fadeIn()},calculateBackgroundImageSize:function(){this.removeHomepageImageLoader();var e=this.$backgroundImageContainer.find("img");new this.imageResize(e,this.$backgroundImageContainer,"b1")},changeBackgroundImage:function(e,t){var i="backgroundImage",o=$(".background-image-container .current"),s=$(t);null==t&&(s=$("#"+i)),s.addClass("current"),o.removeClass("current")},animateSubmenuHomepage:function(){var e=this;this.touchDevice||$(".primary a").hover(function(){0==e.mobileState&&$(this).parent("li").addClass("animate")},function(){$(this).parent("li").removeClass("animate")})},positionHomepageMenu:function(e){var t=$(".primary ul",e),i=$(".mobile-primary",e),o=$(".mobile-bar",e).height(),s=$(".submenu-trigger",t).height();0==this.mobileState?(this.setHomepageMenuWidth(),t.css("margin-left",-(t.width()/2)),t.css("margin-top",-(s/2))):(t.removeAttr("style"),i.css("margin-top",($(window).height()-i.height())/2-o)),$("> ul li",this.$primary).delay(300).animate({opacity:"1"},1e3)},setHomepageMenuWidth:function(){var e=this.$primaryMenu,t=this.$primaryMenuElements,i=this.$primaryMenuElements.length;_.each(t,function(e){i=i+$(e).outerWidth(!0)+1}),e.width(i)},positionHomepageSubmenus:function(e){var t=parseFloat($(".animation-line").css("margin-top"));$.each($(".animation-line",e),function(){var e=$(this).parent().parent(),i="#submenu"+$(e).attr("data-submenu"),o=($(window).height()-$(i).height())/2+2*t;$(i).css("top",o),$(i).css("left",$(this).offset().left),$(i).css("display","none")})},resizeUpdates:function(e){var t=window.innerWidth;this.homepageState||$(e).addClass("no-transitions"),this.currentYPosition=this.positionY(e),$(".submenu-container").is(".open",".show")&&!this.mobileState&&this.closeMenu(e),this.mobileState=this.checkMobileState(t),t<=this.mobileMaxWidth?$(e).removeClass("scrolled normal"):t>=this.mobileMaxWidth&&t<=this.tabletMaxWidth?($(e).addClass("scrolled"),this.$logo.removeAttr("style"),this.$bgright.removeAttr("style"),this.$primary.find("a").removeAttr("style"),this.$iconArrowSimpleDown.removeAttr("style"),this.$iconArrowSimpleUp.removeAttr("style"),this.$secondary.find("a").removeAttr("style"),this.$iconBasketSmall.removeAttr("style"),this.$iconaccount.removeAttr("style"),this.$menuSearchField.removeAttr("style"),this.$menuSearchResults.removeAttr("style")):t>=this.tabletMaxWidth&&this.currentYPosition<=this.headerChangeOn&&$(e).removeClass("scrolled"),1==this.homepageState&&(this.positionHomepageMenu(),this.positionHomepageSubmenus()),this.homepageState||$(e).removeClass("no-transitions");var i=t/2-200;this.$myaccount.css("max-width",i)},closeMenu:function(e){this.mobileState?this.closeMobileMenu(e):this.homepageState?this.closeHomepageMenu(e):this.closeMainMenu(e)},closeMobileMenu:function(e){$(".menu-container",e).removeClass("mobile-open menu-hide"),$(".primary",e).removeClass("mobile-open"),$(".mobile-secondary",e).removeClass("mobile-open"),$(".mobile-trigger",e).removeClass("open"),$(".mobile-trigger .icon-hamburger",e).removeClass("icon-close-small"),$(".submenu-container",e).removeClass("open"),$(".submenus-container",e).removeClass("submenu-show show"),this.mobileSubmenuOpen=!1},closeHomepageMenu:function(e){$(".submenu-container",e).removeClass("open"),$(".primary .icon-arrow-simple-up",e).addClass("icon-arrow-simple-down"),$(".primary .icon-arrow-simple-down",e).removeClass("icon-arrow-simple-up"),$(".submenu-trigger",e).removeClass("animate open"),$(".submenu-trigger",e).removeAttr("style"),this.mobileState||this.changeBackgroundImage(e)},closeMainMenu:function(e){$(".primary .icon-arrow-simple-up",e).addClass("icon-arrow-simple-down"),$(".primary .icon-arrow-simple-down",e).removeClass("icon-arrow-simple-up"),$(".primary li",e).removeClass("open"),$(".submenus-container",e).removeClass("show"),$(".submenu-container",e).removeClass("open"),$("body").off("click.outsidemenu")},closeMenuOnScroll:function(e){if($(".submenus-container").hasClass("show")){var t=this.positionY(e),i=t+300,o=t-50;setTimeout(function(){(i<=this.currentYPosition||o>=this.currentYPosition&&$(".submenu-container").hasClass("open"))&&this.closeMenu(e)}.bind(this),500)}},checkStates:function(e){var t=window.innerWidth;this.mobileState=this.checkMobileState(t),this.homepageState=this.checkHomepageState(e),this.touchDevice=this.checkTouchDevice(e),(!this.mobileState&&t<=this.tabletMaxWidth||this.touchDevice)&&$(e).addClass("scrolled no-transitions")},checkMobileState:function(e){return e<=this.mobileMaxWidth},checkTouchDevice:function(){return $("html").hasClass("touch")&&!this.mobileState?!0:!1},checkHomepageState:function(){return $("body").hasClass("homepage")?!0:!1},checkClicksOutsideElement:function(){var e=this;$("body").on("click.outsidemenu",function(t){var i=e.$submenuContainer.hasClass("open");!$(t.target).closest("section").is(e.element)&&i&&e.closeMenu()})},positionY:function(e){return window.pageYOffset||e.scrollTop},unload:function(){}};return t}),define("b3-breadcrumbs",[],function(){var e={load:function(e){this.setup(e),this.resizeBrowser()},setup:function(e){this.$listContainer=$(e).find("ul"),this.$listItems=this.$listContainer.find("li"),this.optionalFieldWidth=$(e).parent().find(".optional-fields").outerWidth(!1);var t=this;this.getItemSizes(),$(window).on("resize",function(){t.resizeBrowser()})},getItemSizes:function(){var e=[],t=0,i=0;this.$listItems.each(function(){i=$(this).outerWidth(!1),e.push(i),t+=i}),this.aItemsSize=e,this.listContainerSize=t},resizeBrowser:function(){var e=$(window).width();if(!(768>e)){var t=this.$listContainer.width();e>=1024&&(t-=this.optionalFieldWidth),this.recalculateItemsWidth(t)}},recalculateItemsWidth:function(e){for(var t=this.listContainerSize-e,i=this.aItemsSize.length-1,o=147,s=0,n=0,r=i;r>=2;r--)this.aItemsSize[r]>o&&t>0?(n=Math.min(t,this.aItemsSize[r]-o),t-=n,s=this.aItemsSize[r]-n):s=this.aItemsSize[r],this.$listItems[r].style.width=s+"px"},unload:function(){}};return e}),!function(e){"undefined"==typeof bugaboo&&(bugaboo={}),bugaboo.b4productoverview=function(){},bugaboo.b4productoverview.prototype.init=function(t){this.nComponentID=t,this.$productoverview=e("#"+t),this.$top=this.$productoverview.find(".b4-top"),this.$slidenumcurrent=this.$productoverview.find(".b4-slidenum-label.current"),this.$slidenumtotal=this.$productoverview.find(".b4-slidenum-label.total"),this.$slidenumnext=this.$productoverview.find(".b4-slidenum-arrow.next"),this.$slidenumprev=this.$productoverview.find(".b4-slidenum-arrow.prev"),this.$prev=this.$productoverview.find(".b4-arrow.prev"),this.$next=this.$productoverview.find(".b4-arrow.next"),this.$viewall=this.$productoverview.find(".b4-viewall"),this.$viewallbg=this.$productoverview.find(".b4-viewall-bg"),this.$slider=this.$productoverview.find(".b4-items-slider"),this.aProducts=[],this.bTouch=Modernizr.touch,this.bWebkit=/WebKit/.test(navigator.userAgent),this.sTriggerEventNavigate=this.bTouch?"touchstart":"click",this.sViewMode,this.carouselContents=this.$slider.html(),this.bWebkit&&this.$productoverview.find(".b4-slidenum-label-divider").css("margin","6px 10px");var i=this;e(window).on("orientationchange",function(){i.resize()}),e(window).on("resize",function(){i.resize()}),this.resize(),this.initMouseHandlesNavigation(),this.initMouseHandlesViewAll()},bugaboo.b4productoverview.prototype.resize=function(){var t=this,i=0,o=e(window).width();if(o>670){if(960>o?"medium"!=t.sViewMode&&t.setViewMode("medium"):"large"!=t.sViewMode&&t.setViewMode("large"),t.aProducts.length>0){var s,n=42*t.nGroupSize+20,r=2==t.nGroupSize?450:363,a=Math.min(r,Math.floor((o-n)/t.nGroupSize));for(i;i<t.aProducts.length;i++)s=t.aProducts[i],s.adjustWidth(a)}}else"small"!=t.sViewMode&&t.setViewMode("small")},bugaboo.b4productoverview.prototype.setViewMode=function(t){if(this.sViewMode=t,null!=this.slider&&(this.slider.ev.off(),this.slider.destroy(),this.slider=null),this.$slider.empty(),this.$slider.append(this.carouselContents),"small"!=this.sViewMode){var i=[];i[0]=[];var o=0,s=this.$slider.children().size();this.nGroupSize="medium"==this.sViewMode?2:3;for(var n=0;s>n;n++)i[o].length==this.nGroupSize&&(o++,i[o]=[]),i[o].push(this.$slider.children().eq(n));var r;for(n=0;n<i.length;n++){r=this.nComponentID+"-group-"+n,this.$slider.append('<div id="'+r+'"></div>');for(var a=0;a<i[n].length;a++)i[n][a].appendTo(e("#"+r))}}this.initProducts(),this.initSlider()},bugaboo.b4productoverview.prototype.initProducts=function(){this.aProducts.length>0&&this.cleanUpProducts();for(var t,i="small"==this.sViewMode?this.$productoverview.find(".b4-items-slider > div").size():this.$productoverview.find(".b4-items-slider > div > div").size(),o=this,s=0;i>s;s++){t="#"+this.nComponentID+"-"+s;var n=new bugaboo.b4product;n.init(t,this.sViewMode),this.aProducts.push(n),e(t).on("onFocusProduct",function(e,t){for(var i=0;i<o.aProducts.length;i++)o.aProducts[i]!=t&&o.aProducts[i].blur()})}},bugaboo.b4productoverview.prototype.cleanUpProducts=function(){for(var e=this.aProducts.length,t=0;e>t;t++)this.aProducts[t].dispose(),this.aProducts[t]=null;this.aProducts=[]},bugaboo.b4productoverview.prototype.initSlider=function(){var e=this;this.slider=e.$slider.royalSlider({controlNavigation:"none",arrowsNavAutoHide:!1,imageAlignCenter:!1,imageScalePadding:0,controlsInside:!1,fadeinLoadedSlide:!1,slidesSpacing:0,loop:!1,loopRewind:!0,imageScaleMode:"none",usePreloader:!1,navigateByClick:!1}).data("royalSlider"),this.slider.ev.on("rsAfterSlideChange",function(){e.setSlideNum()}),this.$slidenumtotal.text(this.slider.numSlides),this.setSlideNum(),this.$slider.find(".rsArrow").remove()},bugaboo.b4productoverview.prototype.setSlideNum=function(){var e=this,t=e.slider.currSlideId+1;e.$slidenumcurrent.text(t)},bugaboo.b4productoverview.prototype.initMouseHandlesNavigation=function(){var e=this;this.$slidenumnext.on(this.sTriggerEventNavigate,function(){e.slider.next()}),this.$slidenumprev.on(this.sTriggerEventNavigate,function(){e.slider.prev()}),this.$next.on(this.sTriggerEventNavigate,function(){e.slider.next()}),this.$prev.on(this.sTriggerEventNavigate,function(){e.slider.prev()})},bugaboo.b4productoverview.prototype.initMouseHandlesViewAll=function(){var e=this,t=this.bTouch?"touchstart":"mouseover",i=this.bTouch?"touchend":"mouseout";this.$viewall.on(t,function(){e.$viewallbg.css("width","100%")}),this.$viewall.on(i,function(){e.$viewallbg.css("width","0")}),this.$viewall.on("click",function(){void 0})}}(jQuery),define("b5-tabs",[],function(){var e={load:function(e){var t=$(".tabFilter"),i=t.find(".active").find("a").clone();$(e).find(".title").empty().append(i.contents()),$(e).on("click",function(){$(e).toggleClass("open"),$(t).toggle()})},unload:function(){}};return e}),define("b7-form",[],function(){var e={load:function(e){this.initFormToggle(e),this.initNewFormTrigger(e)},initFormToggle:function(e){var t=$('*[data-action="toggle-fields"]',e);t.on("change",function(){var e=$(this).data("toggle-container");$("."+e+".toggle").slideToggle(230)})},initNewFormTrigger:function(e){var t=this,i=$('*[data-action="change-fields"]',e);i.on("change",function(){var e=$(this).data("append"),i=$(this).data("api-url"),o=this.value,s=this.value;t.getNewFormElements(e,i,o,s)})},getNewFormElements:function(e,t,i,o){$.ajax({url:t,type:"GET",dataType:"json",data:o+"="+i,success:function(t){$("."+e).html(t.html)},error:function(){}})},unload:function(){}};return e}),define("c1-header-stroller",["underscore"],function(e){var t={load:function(e,t){this.$element=$(e),this.sUrl=t.virtualStudioUrlPrefix,this.sIconsPrefix=t.iconsPrefix,this.setup()},setup:function(){this.$positionMenu=this.$element.find(".position-menu-container"),this.$productExplorer=this.$element.find(".product-explorer-container"),this.$subtitle=this.$element.find("h6"),this.$buttonContainer=this.$element.find(".button-container"),this.setupGlobalMethods(),this.setupPositionMenu(),this.setupProductExplorer();var t=e.bind(this.resize,this);window.addEventListener("resize",e.throttle(t,250),!1),this.resize(),this.initQuicklinks()},setupGlobalMethods:function(){var e=this;window.bugaboo.headerstroller={},window.bugaboo.headerstroller.selectPosition=function(e){e.addClass("active");var t=e.data("stroller"),i=e.data("position"),o=e.data("mod"),s=e.data("facing"),n=e.data("frame"),r=e.data("colours"),a=e.data("frames"),l=e.data("zoom");window.bugaboo.headerstroller.setPosition(t,i,o,s,n,r,a,l)},window.bugaboo.headerstroller.setPosition=function(t,i,o,s,n,r,a,l){var c=t+"_"+i+"_"+o+s+"_"+n+"_"+r,h={frames:a,frame:1,src:e.sUrl+c,zoom:l?!0:!1};window.bugaboo.productexplorer.update(h)}},setupProductExplorer:function(){var e=$(".position-menu ul").find(".icon-button:eq(0)");window.bugaboo.headerstroller.selectPosition(e)},positionPositionMenu:function(){var e=this.$positionMenu.find("a"),t=e.first().height(),i=e.length;this.offsetTopPositionMenu=-(i*t)/2,this.$positionMenu.css({marginTop:this.offsetTopPositionMenu})},positionProductExplorer:function(){this.offsetTopExplorer=-(this.$productExplorer.height()/2)-this.nOffsetYProductExplorer,this.$productExplorer.css({marginTop:this.offsetTopExplorer})},resize:function(){var e=window.innerWidth;768>e?"mobile"!=this.sMode&&(this.sMode="mobile",this.$subtitle.after(this.$positionMenu),this.$subtitle.after(this.$productExplorer),this.$positionMenu.find("a").each(function(){$(this).removeClass("type1").addClass("type4")})):"normal"!=this.sMode&&(this.sMode="normal",this.$productExplorer.appendTo(this.$element),this.$positionMenu.appendTo(this.$element),this.$positionMenu.find("a").each(function(){$(this).removeClass("type4").addClass("type1")})),this.nOffsetYProductExplorer=e>1366?50:70,768>e?this.$positionMenu.css({marginTop:0}):(this.positionProductExplorer(),this.$positionMenu.css({marginTop:this.offsetTopPositionMenu}))},initQuicklinks:function(){var e=$(".links a",this.element),t=$("html, body");e.on("click",function(e){e.preventDefault(),t.animate({scrollTop:$($.attr(this,"href")).offset().top},350)})},setupPositionMenu:function(){var e=this;this.$positionMenu.find("a").each(function(){$(this).on("click",$.proxy(e.onSelectPosition,e))}),this.positionPositionMenu()},onSelectPosition:function(e){var t=$(e.target).parent();this.$positionMenu.find("a").removeClass("active"),window.bugaboo.headerstroller.selectPosition(t)},unload:function(){}};return t}),define("c2-mini-configurator",["loadermask","gtm","generic-loader","generic-cart"],function(e,t,i,o){var s={options:{},load:function(i,o){void 0;var s=this;this.loaderMask=e,this.$element=$(i),this.settings={sDataJsonUrl:o.getData,sVirtualStudioUrl:o.virtualStudioUrlPrefix,sIconsPrefix:o.iconsPrefix,sApiKey:o.apiKey,sCurrency:o.currency,currencyCode:o.currencyCode,countryHasStore:o.countryHasStore,productIsBroken:!1,wishUrl:o.wishUrl,buyUrl:o.buyUrl,wishAndbuyUrl:o.wishAndbuyUrl,accountUrl:o.accountUrl,loggedIn:o.loggedIn},$.ajax({type:"GET",url:s.settings.sDataJsonUrl,beforeSend:function(e){e.setRequestHeader("apikey",s.settings.sApiKey)},dataType:"json",data:""}).complete(function(e){var i=JSON.parse(e.responseText);$.each(i,function(e,t){"related"===e||"adapter"===e?s.additions=s.parseAdditionsData(t):s.accessory=s.parseAccessoryData(t)});var o,n,r=[],a=0,l=0;$.each(s.accessory.colours,function(e,t){if(0===l++&&(o=t),0===a++&&(n=t.id),t.label=t.label.toLowerCase(),!t.price){if(s.settings.countryHasStore)return;t.price=0}t.selected=0==a++?!0:!1,r.push(t)}),r.length||(r.push(o),s.settings.productIsBroken=!0),s.accessory.colors=r,s.accessory.colour=n,s.setup(),void 0,t.load("C2","landing",s.accessory),window.dispatchEvent(new Event("resize"))})},parseAccessoryData:function(e){var t={id:e.id,vpcode:e.vpcode,wheel:e.wheel?e.wheel:"1",frames:e.frames?e.frames:50,position:"X",angle:e.angle?e.angle:90,icons:e.icons?e.icons:{"default":""},images:e.images?e.images:{},label:e.label?e.label:"",colours:e.colours?e.colours:{},colour:"",price:"",itemcode:""};return t},parseAdditionsData:function(e){var t={};return $.each(e,function(e,i){var o={};o.label=i.label,o.id=i.id,o.colors=i.colours?i.colours:{},$.each(i.colours,function(e,t){o.price=t.price,o.itemcode=t.itemcode,o.available=t.atp>0?!0:!1,o.img=t.src}),t[e]=o}),t},setup:function(){var e=this;this.loaderMask=new this.loaderMask,this.$background=this.$element.find(".fullimage"),this.$productExplorer=this.$element.find(".product-explorer-container"),this.$colorpickerContainer=this.$element.find(".colorpicker-container"),this.$colorpicker=this.$element.find(".colorpicker"),this.$price=this.$element.find(".price"),this.$outofstock=this.$element.find(".outofstock"),this.$title=this.$element.find("h1"),this.$subtitle=this.$element.find("h6"),this.$buttons=this.$element.find(".button-container"),this.$addtocart=this.$buttons.find(".button"),this.$addtowishlist=this.$buttons.find(".icon-button"),this.nWishList="#"+this.$addtowishlist.attr("data-notification"),this.nCart="#"+this.$addtocart.attr("data-notification"),this.selectedProduct={},this.sMode="",this.nSelectedColorIndex=0,this.bTouch=window.bugaboo.isTouch,this.accAvailable=!0,this.addAvailable=!0,this.addition=!1,this.setupGlobalMethods(),this.setupColorpicker(),this.setupProductExplorer(),this.setupAction(),this.nSelectedColorIndex=this.getSelectedColorIndex(!1),this.updatePrice(),this.setOutOfStockState();var t=_.bind(this.resize,this),i=this.$background;i.hide(),$(document).on("fullImageLoaded",function(){i.fadeIn(1500)}),window.addEventListener("resize",_.throttle(t,250),!1),this.additions&&$.subscribe("c2-dropdown",function(t,i){t.preventDefault(),e.handleSelection(t,i)}),this.resize()},setupGlobalMethods:function(){void 0;var e=this;window.bugaboo.miniconfigurator={},window.bugaboo.miniconfigurator.currencyCode=e.settings.currencyCode,window.bugaboo.miniconfigurator.setColour=function(t){e.nSelectedColorIndex=e.getSelectedColorIndex(t),e.updatePrice(),e.setOutOfStockState(),e.updateProductExplorer(t)}},updateProductExplorer:function(e){!e&&this.accessory.colors.length>0&&(e=this.accessory.colors[0].id);var t,i=this.accessory.frames,o=1;this.accessory.vpcode?t=this.settings.sVirtualStudioUrl+this.accessory.vpcode+e+"-"+this.accessory.position:(t=this.accessory.colors.length>0?this.accessory.colors[this.nSelectedColorIndex].src:this.accessory.src,i=1,o=!1),this.itemcode=this.accessory.colors.length>0?this.accessory.colors[this.nSelectedColorIndex].itemcode:"",this.updateProductCode(this.itemcode);var s={frames:i,frame:o,src:t,zoom:!0};window.bugaboo.productexplorer.update(s)},getSelectedColorIndex:function(e){void 0;var i=0,o=this.accessory.colors.length;if(0!=e&&(this.accessory.colour=e),o>0&&e){void 0,t.updateGTM("C2","accessorycolourchanged","detail",this.accessory);for(var s=0;o>s;s++)if(this.accessory.colors[s].id==e){i=s;break}}return this.selectedProduct=this.accessory.colors[i],i},handleSelection:function(e,t){void 0,this.addition=t,this.combine="null"===t?!1:!0,this.updatePrice(),this.updateTitle(),this.setOutOfStockState();var i=this.combine?this.additions[t].itemcode:this.itemcode;this.updateProductCode(i)},updateTitle:function(){var e=this.combine?this.accessory.label+" + "+this.additions[this.addition].label:this.accessory.label;this.$title.text(e)},updatePrice:function(){if(this.settings.countryHasStore&&!this.settings.productIsBroken){if(this.accessory.colors.length>0){var e=this.accessory.colors[this.nSelectedColorIndex].price;this.combine&&this.addition&&this.additions[this.addition]&&(e=parseInt(e)+parseInt(this.additions[this.addition].price));var t=""!=e&&void 0!=e?this.settings.sCurrency+e:"-";this.$price.text(t),this.accessory.price=e,"-"!=t?this.$price.css("visibility","visible"):this.$price.css("visibility","hidden")}}else this.$price.text("-"),this.$price.css("visibility","hidden")},setOutOfStockState:function(){this.accAvailable=!0,void 0,void 0,void 0,this.addAvailable=this.combine&&"null"!=this.addition?this.additions[this.addition].available:!0,this.settings.countryHasStore&&!this.settings.productIsBroken&&this.accessory.colors.length>0&&(this.accAvailable=this.accessory.colors[this.nSelectedColorIndex].available,void 0,window.bugaboo.miniconfigurator.available=!this.accAvailable),this.accAvailable&&this.addAvailable?this.$outofstock.hide():this.$outofstock.show()},setupColorpicker:function(){var e=this;e.accessory.colors.length<2?(this.$colorpickerContainer.addClass("no-color"),this.$price.addClass("no-color")):(this.$colorpicker.colorpicker({miniconfigurator:!0,countryHasStore:this.settings.countryHasStore}),e.accessory.module=null,e.accessory.sLine="right",e.accessory.sIcon=e.accessory.icons["default"],e.accessory.sMode="accessory",e.accessory.sType=1,this.$colorpicker.colorpicker("show",e.accessory),this.bTouch&&(this.$background.on("touchstart",function(){e.blurColorpicker()}),this.$productExplorer.on("touchstart",function(){e.blurColorpicker()}),this.$price.on("touchstart",function(){e.blurColorpicker()}),this.$title.on("touchstart",function(){e.blurColorpicker()}),this.$subtitle.on("touchstart",function(){e.blurColorpicker()}),this.$buttons.on("touchstart",function(){e.blurColorpicker()})))},setupProductExplorer:function(){this.updateProductExplorer(!1)},setupAction:function(){(!this.settings.countryHasStore||this.settings.productIsBroken)&&this.$addtocart.hide(),this.settings.productIsBroken&&this.$addtowishlist.hide(),this.$addtocart.click($.proxy(this.onSelectAddToCart,this)),this.$addtowishlist.click($.proxy(this.onSelectAddToWishList,this))},positionProductExplorer:function(){this.offsetTopExplorer=-(this.$productExplorer.height()/2)-this.nOffsetYProductExplorer,this.$productExplorer.css({marginTop:this.offsetTopExplorer}),window.bugaboo.theloadermask.removeMask(this.$parentElement)},resize:function(){var e=window.innerWidth;768>e?"mobile"!=this.sMode&&(this.sMode="mobile",this.$colorpicker.colorpicker("setViewMode","simple"),this.$price.after(this.$productExplorer)):"normal"!=this.sMode&&(this.sMode="normal",this.$colorpicker.colorpicker("setViewMode","normal"),this.$productExplorer.appendTo(this.$element)),e>=768&&1366>=e&&(this.nOffsetYProductExplorer=0),e>1366&&1920>e&&(this.nOffsetYProductExplorer=18),e>=1920&&(this.nOffsetYProductExplorer=15),this.positionProductExplorer(),this.$colorpicker.colorpicker("resize")},blurColorpicker:function(){"normal"==this.sMode&&this.$colorpicker.colorpicker("blur")},updateProductCode:function(e){void 0;var t=this.itemcode!=e?!0:!1;void 0,void 0,void 0;var i=t?this.itemcode+"_"+e:this.itemcode;this.selectedProduct.itemcode=i,window.bugaboo.miniconfigurator.itemcode=i,$.publish("a2-dynamic-itemcode",window.bugaboo.miniconfigurator.itemcode)},onSelectAddToCart:function(e){var s=this;if(void 0,this.accAvailable){var n={productCode:this.selectedProduct.itemcode,type:"cart"},r=new i(this.$addtocart),a=new o;t.updateGTM("C2","addToCart","add",this.accessory),0!=this.addition&&t.updateGTM("C2","addToCart","add",this.additions[this.addition]),$.ajax({type:"POST",url:this.settings.wishAndbuyUrl,data:n,success:function(e,t,i){void 0,void 0;var e=$.parseJSON(e),o=$(s.nCart).find(".text p"),n=e.message;o.empty().text(n),a.update.cart_items(e.cart_items),$(s.nCart).trigger("triggerB11Notification"),r.kill()},error:function(e,t,i){void 0,void 0,r.kill()}})}else e.preventDefault(),$.magnificPopup.open({items:{src:"#popupOutOfStock"},closeMarkup:'<button title="%title%" class="mfp-close"><span class="icon-small-close"></span></button>'})},onSelectAddToWishList:function(e){var t=this;if(this.settings.loggedIn){var o={productCode:this.selectedProduct.itemcode,type:"wishlist"},s=new i(this.$addtowishlist);$.ajax({type:"POST",url:this.settings.wishAndbuyUrl,data:o,success:function(e,i,o){void 0;var e=$.parseJSON(e),n=$(t.nWishList).find(".text p"),r=e.message;n.empty().text(r),$(t.nWishList).trigger("triggerB11Notification"),s.kill()},error:function(e,t,i){void 0,void 0,s.kill()}})}else e.preventDefault(),$.magnificPopup.open({items:{src:"#popupNotLoggedIn"},closeMarkup:'<button title="%title%" class="mfp-close"><span class="icon-small-close"></span></button>'}),this.initMyAccountUrlPopupButton()},initMyAccountUrlPopupButton:function(){$("#popupNotLoggedIn").find(".button").attr("href",this.settings.accountUrl)},unload:function(){}};return s}),define("c3-configurator",["loadermask"],function(e){var t={options:{},load:function(t,i){this.loaderMask=e;var o={strollerId:i.strollerId,configId:i.configId,wishlistId:i.wishlistId,shareVpc:i.shareVPC,wishVpc:i.wishVpc,clearConf:i.clearConf},s={getData:i.getData,virtualStudioUrlPrefix:i.virtualStudioUrlPrefix,iconsPrefix:i.iconsPrefix,configuratorUrl:i.configuratorUrl,shareUrl:i.shareUrl,wishUrl:i.wishUrl,buyUrl:i.buyUrl,wishAndbuyUrl:i.wishAndbuyUrl},n={apiKey:i.apiKey,countryHasStore:i.countryHasStore,currency:i.currency,currencyCode:i.currencyCode,priceFormat:i.priceFormat};window.Configurator=new Configurator,window.Configurator.initialize(o,s,n,$(t)),this.loaderMask=new this.loaderMask},unload:function(){}};return t}),define("c7-product-basket",["underscore","generic-loader","generic-cart","gtm"],function(e,t,i,o){"use strict";var s=function(e,t){this.el=$(e),this.currency=t.currency,this.url=t.wishAndbuyUrl,this.cart=new i,this.$productquantity=this.el.find(".product .unit-quantity"),this.$productdelete=this.el.find(".product-quantity-wrapper .icon-delete").parent(),this.$productaddcart=this.el.find(".product .optional-buttons .add-cart"),this.$productremovewishlist=this.el.find(".product .optional-buttons .remove-wishlist"),this.summary=this.cart.get.cart_summary(),this.items=this.el.find(".product").length,this.total=this.summary.total,this.discount=this.el.find(".optional-block price")?!0:!1,this.gtm=o,this.init()};return s.prototype={init:function(){void 0,this.events(),this.gtm.load()},events:function(){var i=this,s=this.cart;this.$productquantity.on("change",function(){void 0;var e=$(this).parent().parent().parent().parent().parent(),o=e.find(".price-total"),s={productCode:e.data("itemcode"),quantity:parseFloat($(this).val())};o.empty();var n=new t(o);$.ajax({type:"POST",url:i.url,data:s,success:function(t){var t=$.parseJSON(t);i.update(e,t),n.kill()},error:function(e){void 0,void 0,n.kill()}})}),this.$productdelete.on("click",function(){var s=$(this).parents("section.product"),n={name:s.attr("data-name"),itemcode:s.attr("data-itemcode"),wishlistid:s.attr("data-wishlistitemid"),price:parseFloat(s.attr("data-price").replace(/,/g,".")),category:s.attr("data-category"),variant:s.attr("data-variant"),basetype:s.attr("data-basetype"),basecolour:s.attr("data-basecolour"),framecolour:s.attr("data-framecolour"),TF1:s.attr("data-tf"),TF2:s.attr("data-tf2"),quantity:s.attr("data-quantity")};void 0;var r={productCode:n.itemcode,quantity:0};o&&o.updateGTM("C7","removeFromCart","remove",n);var a=new t(this);$.ajax({type:"POST",url:i.url,data:r,success:function(t){var t=$.parseJSON(t);s.fadeOut(),i.update(s,t),e.delay(function(){s.remove()},500),a.kill()},error:function(e){void 0,a.kill()}})}),this.$productaddcart.on("click",function(){void 0;var o=$(this).parent().parent().parent(),n=o.attr("data-itemcode"),r=o.attr("data-wishlistitemid"),a=$(this).attr("data-notification"),l=$("#"+a),c={productCode:n,wishlistItemID:r,type:"cart"},h=new t(this);$.ajax({type:"POST",url:i.url,data:c,success:function(t){var t=$.parseJSON(t),i=$(l).find(".text p"),n=t.message;i.empty().text(n),$(l).trigger("triggerB11Notification"),o.fadeOut("slow"),e.delay(function(){o.remove(),s.update.cart_items(t.cart_items),s.update.wishlist_items(t.wishlist_items)},10),h.kill()},error:function(){h.kill()}})}),this.$productremovewishlist.on("click",function(){void 0;var o=$(this).parents("section.product"),n={itemcode:o.attr("data-itemcode"),wishlistid:o.attr("data-wishlistitemid")};void 0;var r={productCode:n.itemcode,wishlistItemID:n.wishlistid,type:"wishlist"};if($(this).hasClass("loading"))return void void 0;var a=new t(this);$.ajax({type:"POST",url:i.url,data:r,success:function(t){var t=$.parseJSON(t);o.fadeOut("slow"),e.delay(function(){o.remove(),s.update.wishlist_items(t.wishlist_items)},10),a.kill()},error:function(e,t,i){void 0,void 0,a.kill()}})})},reload:function(e){this.cart.update.cart_items(e.cart_items),this.cart.update.cart_summary(this.currency,e)},get:function(){var t={},i=this.el.find(".product");return t.items=0,t.subtotal=0,t.products=[],e.each(i,function(e){var i={};i.itemcode=$(e).attr("data-itemcode"),i.price=parseFloat($(e).attr("data-price")),i.quantity=parseFloat($(e).attr("data-quantity")),i.total=parseFloat(i.price)*i.quantity,t.products.push(i),t.items=t.items+i.quantity,t.subtotal=t.subtotal+i.total}),t},update:function(t,i){void 0,void 0;var o=$(t);o.attr("data-quantity",i.product_quantity),o.attr("data-total",i.product_total),o.find(".price-total").text(this.currency+" "+i.product_total),this.reload(i),0===parseFloat(i.cart_items)&&e.delay(function(){window.location.reload()},500)}},s}),define("c9-choose-a-stroller",function(){var e={load:function(e){$("a",e).hover(function(){$(".highlight",this).stop(!0,!0).fadeIn(500)},function(){$(".highlight",this).stop(!0,!0).fadeOut("fast")})},unload:function(){}};return e}),!function(e,t){var i,o="example";i=function(e,i){void 0,void 0},i.prototype={update:function(){void 0}},t.fn[o]=function(e,s){var n=[];return this.each(function(){var r,a,l;return r=t(this),a=r.data(o),l="object"==typeof e&&e,a||(n=r.data(o,a=new i(this,l))),"string"==typeof e&&(n=a[e],"function"==typeof n)?n=n.call(a,s):void 0}),n},t.fn[o].fx={}}(this,jQuery),define("a8-dropdown",["generic-loader"],function(e){"use strict";var t=function(e,t){this.element=$(e).find(".d7-selection"),this.options=t,this.url=t.url,this.selector=t.selector,this.init()};return t.prototype={init:function(){var t=this;void 0,void 0,$.subscribe("a8-dropdown",function(i,o){i.preventDefault(),void 0;var s={selected_Option:o},n=new e(t.element);$.ajax({type:"POST",url:t.url,data:s,success:function(e){$(t.selector).empty(),$(t.selector).append(e),n.kill()},error:function(e,t,i){void 0,void 0,n.kill()}})})}},t.prototype.unload=function(){},t}),define("cookienotification",["underscore"],function(){"use strict";var e=function(e,t){this.element=e,this.options=t,this.parent=$(this.element),this.acceptTrigger=$(this.options.acceptTrigger),this.message=this.options.message,this.message_primary=this.options.message_primary,this.message_secondary=this.options.message_secondary,this.localStorageKey=this.options.localStorageKey,this.setClickTreshhold=this.options.clickTreshhold?!0:!1,this.clickTreshhold=this.options.clickTreshhold,this.confirmed=localStorage.getItem(this.localStorageKey+"_accepted")?!0:this.options.confirmed,this.mobileMaxWidth=767,this.fadeTime=600,this.init()
};return e.prototype={init:function(){void 0;var e=this;this.confirmed&&localStorage.getItem(this.localStorageKey+"_accepted")?this.parent.remove():(this.setupStickyNotification(),this.setClickTreshhold&&e.countClicksOutsideNotification())},showStickyNotification:function(e){this.parent.fadeIn(this.fadeTime,function(){e&&e()})},hideStickyNotification:function(e){this.parent.fadeOut(this.fadeTime,function(){e&&e()})},setStickyNotificationMessage:function(e){$(this.message,this.parent).hide(),$(e).show()},setupStickyNotification:function(){void 0;var e=this;this.setClickTreshhold&&localStorage.getItem(e.localStorageKey+"_countingclicks")>e.clickTreshhold&&e.setStickyNotificationMessage(e.message_secondary),setTimeout(function(){e.showStickyNotification(function(){e.acceptTrigger.click(function(){e.acceptStickyNotification()}),$(window).width()<e.mobileMaxWidth&&e.initMobileToggleNotification()})},1e3)},acceptStickyNotification:function(){var e=this;this.hideStickyNotification(function(){e.parent.remove()}),localStorage.setItem(this.localStorageKey+"_accepted",!0)},initMobileToggleNotification:function(){function e(){$("p,.optional-elements",i.parent).slideDown("fast",function(){i.parent.addClass("open").removeClass("closed")})}function t(){$("p,.optional-elements",i.parent).slideUp("fast",function(){i.parent.addClass("closed").removeClass("open")})}var i=this;this.parent.addClass("toggle"),t(),$("h4",this.parent).click(function(){i.parent.hasClass("closed")?e():t()})},countClicksOutsideNotification:function(){var e=this,t=localStorage.getItem(e.localStorageKey+"_countingclicks")?localStorage.getItem(e.localStorageKey+"_countingclicks"):0;t>e.clickTreshhold||$("body").on("click.cookienotification",function(i){$(i.target).is($(e.acceptTrigger))||$(i.target).parent().is($(e.acceptTrigger))?(e.acceptStickyNotification(),$("body").off("click.cookienotification"),localStorage.removeItem(this.localStorageKey+"_countingclicks")):(t++,localStorage.setItem(e.localStorageKey+"_countingclicks",t),t>e.clickTreshhold&&(e.hideStickyNotification(function(){e.setStickyNotificationMessage(e.message_secondary),e.showStickyNotification()}),$("body").off("click.cookienotification")))})}},e.prototype.unload=function(){},e}),define("b11-notification",["underscore"],function(){"use strict";var e=function(e,t){this.element=e,this.options=t,this.type=this.options.type,this.trigger="#"+$(this.element).attr("id"),this.closeTrigger=$(".notification-close",e),this.localStorageKey=this.options.localStorageKey,this.closed=localStorage.getItem(this.localStorageKey+"_closed")?!0:this.options.closed,this.mobileMaxWidth=767,this.fadeTime=600,this.durationSetTimeout=200,this.lockbutton=!1,this.notificationTimer=null,this.lockbuttonTimer=null,this.destroynotificationTimer=null,this.showDuration=this.options.showDuration,this.isMobile=window.innerWidth<=this.mobileMaxWidth&&$("html").hasClass("touch"),this.init()};return e.prototype={init:function(){"sticky"===this.type?this.setupStickyNotification():this.closed&&localStorage.getItem(this.localStorageKey+"_closed")?$(this.element).remove():this.setupStandardNotification()},showStandardNotification:function(e){$(this.element).fadeIn(this.fadeTime,function(){e&&e()})},hideStandardNotification:function(e){$(this.element).fadeOut(this.fadeTime,function(){e&&e()})},setupStandardNotification:function(){var e=this,t=$(this.element);t.addClass("standard"),setTimeout(function(){e.showStandardNotification(function(){e.closeTrigger.click(function(){e.closeNotification()})})},1e3)},setupStickyNotification:function(){void 0;var e=this,t=$(this.element),i=$(this.trigger);t.addClass("sticky"),t.on("mouseenter",function(){void 0,clearTimeout(e.destroynotificationTimer)}),t.on("mouseleave",function(){void 0,e.destroynotificationTimer=setTimeout(function(){e.closeNotification()},e.showDuration/2)}),i.on("triggerB11Notification",function(){void 0,$(".b11-standard-notification.open").length>0||e.lockbutton||(t.hasClass("open")?(e.closeNotification(),setTimeout(function(){e.openStickyNotification()},2*e.durationSetTimeout)):e.openStickyNotification())}),$(document).on("triggerCloseStickyNotification",function(){t.hasClass("open")&&e.closeNotification()}),$(window).resize(function(){t.hasClass("open")&&e.closeNotification()}),this.closeTrigger.click(function(){e.closeNotification()})},openStickyNotification:function(){void 0;var e=this,t=$(this.element);this.lockbutton=!0,t.addClass("open"),this.isMobile||t.css("top",this.getMenuHeight()),this.notificationTimer=setTimeout(function(){$(window).scroll(function(){t.hasClass("fixed")&&(e.isMobile||t.css("top",e.getMenuHeight()))}),t.addClass("fixed")},this.durationSetTimeout),this.lockbuttonTimer=setTimeout(function(){e.lockbutton=!1},2500),this.destroynotificationTimer=setTimeout(function(){e.closeNotification()},this.showDuration)},getMenuHeight:function(){var e=$(".b1-main-menu").find(".navigation-container"),t=e.height();return t},closeNotification:function(){var e=this;return clearTimeout(this.notificationTimer),clearTimeout(this.lockbuttonTimer),clearTimeout(this.destroynotificationTimer),"sticky"===this.type?($(this.element).removeClass("fixed"),$(this.element).removeAttr("style"),void setTimeout(function(){$(e.element).removeClass("open"),e.lockbutton=!1},this.durationSetTimeout)):(this.hideStandardNotification(function(){$(e.element).remove()}),void localStorage.setItem(this.localStorageKey+"_closed",!0))}},e.prototype.unload=function(){},e}),define("popup",["underscore"],function(){"use strict";var e=function(e,t){this.element=e,this.options=t,this.init()};return e.prototype={init:function(){this.getTriggerElement(),this.initMagnificPopup()},initMagnificPopup:function(){var e='<button title="%title%" class="mfp-close"><span class="icon-small-close"></span></button>';"true"===this.options.onPageLoad?$.magnificPopup.open({items:{src:$(this.element)},type:"inline",closeMarkup:e}):$(this.popupTrigger).magnificPopup({type:"inline",closeMarkup:e,midClick:!0})},getTriggerElement:function(){var e=this.element.id;this.popupTrigger=$("[data-id='"+e+"']")}},e.prototype.unload=function(){},e}),define("button",["underscore","generic-loader","generic-cart"],function(e,t,i){var o=function(e,t){this.element=e,this.element.clicked=!1,this.loaderShowDuration=1e4,this.loadingClass="loading",this.hijackClick=!1,this.hasNotification=$(e).data("notification")?!0:!1,this.notificationEl=$(e).data("notification")?"#"+$(e).data("notification"):null,this.notificationType=$(e).data("notification")?t.notificationType:null,this.notificationProductCode=$(e).data("notification")?t.productCode:null,this.wishandbuyurl=$(e).data("notification")?t.wishAndbuyUrl:null,this.blackButtons=["button.type2","type3","type5"],this.defaultColor="#FFFFFF",this.alternativeColor="#000000",this.url="#",this.init()};return o.prototype={init:function(){this.hijackClick=this.determineClickHijack(),this.hijackClick||this.setup()},determineClickHijack:function(){return $(this.element).attr("href")?!0:!1},setup:function(){this.bindFunctions(),this.setupLoaderColor(),this.addEventHandler()},bindFunctions:function(){e.bindAll(this,"setupLoader","showLoader","setResetTimeout","reset","buttonClickHandler")},setupLoaderColor:function(){var t=this.defaultColor,i=this.alternativeColor,o=this.element;e.each(this.blackButtons,function(e){$(o).hasClass(e)&&(t=i)}),this.color=t},addEventHandler:function(){var e=this,t=this.buttonClickHandler;$(this.element).on("click",function(i){i.preventDefault(),e.outofstock=e.productOutOfStock(),e.hasNotification?(void 0,e.triggerNotification()):t(i)})},triggerNotification:function(){void 0;var o=this,s={},s=(new i,{productCode:this.notificationProductCode,type:this.notificationType}),n=new t(this.element);$.ajax({type:"POST",url:o.wishandbuyurl,data:s,success:function(t){void 0;var t=$.parseJSON(t),i=$(o.notificationEl).find(".text p"),s=t.message;i.empty().text(s),$(o.notificationEl).trigger("triggerB11Notification"),t.cart_items&&"cart"===o.notificationType&&genericCart.update.cart_items(t.cart_items),e.delay(function(){n.kill()},500)},error:function(){void 0,n.kill()}})},productOutOfStock:function(){var e=!1;return window.Configurator&&window.Configurator.Action&&window.Configurator.Action.bOutOfStock&&(e=window.Configurator.Action.bOutOfStock),window.bugaboo.miniconfigurator&&window.bugaboo.miniconfigurator.available&&(e=window.bugaboo.miniconfigurator.available),e},buttonClickHandler:function(e){void 0;var t=this.setupLoader,i=this.showLoader,o=this.setResetTimeout;this.element.clicked||this.outofstock||($(e.currentTarget).addClass("loading"),t(),i(),o(),window.location.href=this.element.getAttribute("href"),this.element.clicked=!0)},setupLoader:function(){var e="phButtonLoader"+$(".button,.icon-button").index(this.element);$(this.element).append('<div id="'+e+'" class="loader"></div>'),this.canvasLoader=new CanvasLoader(e),this.canvasLoader.setColor(this.color),this.canvasLoader.setShape("spiral"),this.canvasLoader.setDiameter(25),this.canvasLoader.setDensity(50),this.canvasLoader.setRange(1),this.canvasLoader.setSpeed(2),this.canvasLoader.setFPS(30)},showLoader:function(){var e=$(".loader",this.element);this.canvasLoader.show(),e.fadeIn()},setResetTimeout:function(){var e=this.reset;setTimeout(function(){e()},this.loaderShowDuration)},reset:function(){this.killLoader(),this.element.clicked=!1},killLoader:function(){this.canvasLoader&&(this.canvasLoader.kill(),$(this.element).removeClass("loading"))}},o}),define("c4-image-zoom",[],function(){var e={load:function(e){this.$element=$(e),this.setup()},setup:function(){this.$imagecontainer=this.$element.find(".image-container"),this.$loader=this.$element.find(".loader"),this.$close=this.$element.find(".icon-button"),this.$image=this.$imagecontainer.find("img"),this.sClickEvent=window.bugaboo.isTouch?"touchstart":"click";var e=this;this.$close.on(e.sClickEvent,$.proxy(this.hide,this)),this.setupGlobalMethods()},setupGlobalMethods:function(){var e=this;window.bugaboo.imagezoom={},window.bugaboo.imagezoom.update=function(t){e.sImageURL=t,e.show()}},show:function(){$("html").css({height:"100%"}),$("body").css({overflow:"hidden",height:"100%"}),this.$element.show(),this.initIScroll(),this.initLoadImage()},hide:function(){$("html").css({height:""}),$("body").css({overflow:"visible",height:""}),this.$element.hide(),TweenMax.killTweensOf(this.$loader),TweenMax.killTweensOf(this.$imagecontainer),this.$imagecontainer.off(),this.$imagecontainer.removeClass("cursor-grab"),this.$imagecontainer.removeClass("cursor-grabbing"),this.clearImage(),this.clearIScroll()},initIScroll:function(){this.iscroll=new IScroll(this.$element[0],{scrollX:!0,vScrollbar:!1,hScrollbar:!1,lockDirection:!1,bounce:!1})},clearIScroll:function(){null!=this.iscroll&&(this.iscroll.destroy(),this.iscroll=null)},initLoadImage:function(){null==this.canvasLoader&&this.setupLoader(),this.showLoader()},setupLoader:function(){this.canvasLoader=new CanvasLoader("c4Loader"),this.canvasLoader.setShape("spiral"),this.canvasLoader.setDiameter(50),this.canvasLoader.setDensity(50),this.canvasLoader.setRange(1),this.canvasLoader.setSpeed(2),this.canvasLoader.setFPS(30)},showLoader:function(){var e=this;this.canvasLoader.show(),TweenMax.to(this.$loader,1,{autoAlpha:.4,onComplete:function(){e.loadImage()}})},loadImage:function(){var e=this;this.$image.load(function(){e.loadImageComplete()}),this.$image.attr("src",this.sImageURL)},loadImageComplete:function(){this.hideLoader()},hideLoader:function(){var e=this;TweenMax.to(this.$loader,.5,{autoAlpha:0,onComplete:function(){e.canvasLoader.hide(),e.showImage()}})},showImage:function(){var e=this.$image.width(),t=this.$image.height();this.iscroll.scrollTo(-(e/8),-(t/4),0),this.$imagecontainer.addClass("cursor-grab"),this.$imagecontainer.on("mouseover",function(){$(this).addClass("cursor-grab")}),this.$imagecontainer.on("mousedown",function(){$(this).removeClass("cursor-grab").addClass("cursor-grabbing")}),this.$imagecontainer.on("mouseup",function(){$(this).removeClass("cursor-grabbing").addClass("cursor-grab")}),TweenMax.to(this.$imagecontainer,.5,{autoAlpha:1})},clearImage:function(){this.$imagecontainer.css({visible:"hidden",opacity:0}),this.$image.attr("src","")},unload:function(){}};return e}),define("Carousel",["underscore"],function(){var e={options:{foo:"bar"},load:function(e,t){void 0,void 0,void 0,this.element=e,this.options=t},resizeHandler:function(){void 0},unload:function(){}};return e}),!function(e,t){var i,o="colorpicker";i=function(e,i){this.$element=t(e),this.textureImage="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABF1JREFUeNo8lFlIVX0Uxdf1WKbmUUsz+UumglMm4lSmoJmmoi+KpSgIUpCRQ+mD+iA+JEJPCaUoBD6U4hikOAeCUw5RERkG5pCZgVNqImbad9Z++C4c7uXcc/Ze+7fW/puvrKyorq4uVFRU4OrVq8jKysLly5eRkZGBHz9+wM7OTn6Hhobi1q1bCAgIwNHRER48eIDe3l48f/4cNjY2cHd3R2xsLMxHR0dhZmaG9PR0HDt2DH5+fpibm8PZs2dx/PhxODg4IDg4GL9//8aJEyfkXlRUFDw9PeW/hoYGeHt7S6O0tDRoh4eH+pUrV3D37l1YWFhgZmYGbW1t8sKNGzfg7OyMv3//4uXLl7h//z7s7e3x6dMnfP/+HRRz8+ZNbGxsQCmF7e1taIZcnQptbW0RFhaGzMxMbG1tyZ+XLl2Ch4cHcnNz5Z7JZJKxv379KoiWlpZkouTkZHz8+BE1NTXQCgoK9Ldv34qy9vZ2BAUFSbc/f/7g58+f+PXrl7B0dHTEwsIC/v37J+x8fHwEAYuurq7iy5cvgo4PqKqqKnXmzBkVERGhnj59qowi6tWrV8pgpGJiYlRzc7MyGKr8/Hzl5uam4uPj1dTUlBoeHlZGYRUeHq4Mfmp5eVlpiYmJ+uLiojjJUe7cuSNsxsbGEBcXJyouXLiA3d1dvH//XhwNCQnB9evXYRTA3t6eTHPq1CkYzaAZnXRyYFwCAwPR0dGBnp4eGTslJUVM+PDhAzo7O2GoRVJSkhTl2ENDQygqKpIUEA3d1gzo+s7ODjY3N6VIfX29RIOsmEc6X1JSIkpYiCoo4N69e9jf35dMMqOc4OHDhzBNTk4qdqqurhZDTp8+LYXomrm5OdbW1mBEC76+vnLP0tISJ0+elOv8+fN49+6d5HF2dlbiZUZnyIPf165dk1ylpqbCy8tLYkA+DD2jQ5bM47dv34Tj7du35b2mpqb/2Zpev36tyIiyybClpUWMODg4EH4sGB0djf7+fokVR2deuS0cmZEaHBwUDFxdzXhQ58pxdaiK3V68eCEjJSQkCIKBgQG5OG5OTo6o+fz5M+rq6sAt44QUQDM144auaRqsrKyk+5s3b3Du3DlMT08LE13X0draKk6zKcekokePHol6bo+Li4uYU15eDhPDOT4+Lqro6MWLF1FZWYlnz54JQ0aCa+nk5CRJYN7oKD/ExA3hXlMMU2JmbIccAByXxcjR2Bq5qJq54yFRWloqrhIJFTEiNJCF6DC5Z2dnw2TMrbghPM/IgdtBYziKdDRctLa2lsNhfX1d8kmWkZGRgmJ+fl5U811j66AZidcpnymnCcXFxcKC4WYTvlxWVoaRkRFRQ4Y8dOn4xMQEXF1dpRCf6+7uhlZYWKj7+/uDHBlwBpkxIR8etDSA0eCG8FShGiqtra2VKXhxAci1sbERJiP9ijEwThAZjxvx5MkT0Pm8vDw5AMiMcSH8x48fiyoyp7K+vj4xhocsJ/xPgAEAGp8lp+tC5d0AAAAASUVORK5CYII=",this.bMiniConfigurator=i.miniconfigurator||!1,this.bCountryHasStore=void 0==i.countryHasStore?!0:i.countryHasStore,this.setup()},i.prototype={setup:function(){this.sID=this.$element.attr("id"),this.$pie=this.$element.find(".pie"),this.$svg=this.$element.find(".svg-container"),this.$label=this.$element.find(".info-label"),this.$divider=this.$element.find(".info-divider"),this.$icon=this.$element.find(".info-icon"),this.$outofstock=this.$element.find(".info-outofstock"),this.$line=this.$element.find(".line"),this.$alert=this.$element.find(".alert-icon"),this.$simpleMenuTargetIcon=t(".colorpicker-menu").find("[data-id='"+this.sID+"'] img"),this.bFirstRun=!0,this.bTouch=e.bugaboo.isTouch,this.bLock=!1,this.bColorPickerFocus=!1,this.bPieAnimating=!1,this.bSmallResolution=this.bTouch?!0:!1,this.bAnimation=this.bTouch?!1:!0,this.bLine=!1,this.bShowOutOfStockAlert=!1,this.bSimpleMode=!1,this.sFocusEvent=this.bTouch?"touchstart mouseenter":"mouseenter",this.sClickEvent="click",this.nAnimationSpeed1=300,this.nAnimationSpeed2=450,this.nPosition=90,this.nSvgCanvasSize=180,this.timeOutOutOfStockToolTip,this.$element.css("pointer-events","auto")},resize:function(){if(this.bVisible){var e=this.determineBrowserSize();e&&(this.nAlertOffsetY=this.getAlertOffsetY(),this.getSettings(),this.bAnimation=!1,this.onBlur(),this.bAnimation=this.bSimpleMode||this.bTouch?!1:!0)}},show:function(e){this.parseData(e),this.bVisible&&this.hide(),this.bVisible=!0,this.determineBrowserSize(),this.determineSwatchSizes(),this.setupColorPicker(),this.$simpleMenuTargetIcon.attr("src",this.sIcon),this.$element.show(),this.bShowOutOfStockAlert&&!this.bMiniConfigurator?this.showOutOfStockAlert():this.hideOutOfStockAlert(),this.bMiniConfigurator||this.setPosition(),this.bMiniConfigurator&&this.bSimpleMode?this.onFocus():(this.bSimpleMode&&this.onFocus(),this.initMouseHandlers()),this.bMiniConfigurator&&this.determineLineVisibility(),this.bFirstRun=!1},hide:function(){this.bVisible&&(this.bVisible=!1,this.$element.hide(),this.dispose())},dispose:function(){if(this.bAnimation=!1,this.onBlur(),TweenMax.killTweensOf(this.$simpleswatchescontainer),TweenMax.killTweensOf(this.$alert),TweenMax.killTweensOf(this.$label),TweenMax.killTweensOf(this.$divider),TweenMax.killTweensOf(this.$icon),this.twFadeInShadowCenter&&this.twFadeInShadowCenter.kill(),this.twFadeInShadowBorder&&this.twFadeInShadowBorder.kill(),this.twFadeInShadowPointer&&this.twFadeInShadowPointer.kill(),this.circlecenter&&this.circlecenter.stop(),this.pointer&&this.pointer.stop(),this.circleglowtl&&this.circleglowtl.stop(),this.circleglowbr&&this.circleglowbr.stop(),this.$svg.off(),this.$pie.off(),void 0!=this.$specialsCp&&this.$specialsCp.off(),this.swatches){for(var e=0;e<this.swatches.length;e++)this.swatches[e].unclick(),this.swatches[e].unmouseover(),this.swatches[e].unmouseout(),this.swatches[e]=null;this.swatches=[]}for(e=0;e<this.aSimpleSwatches.length;e++)this.aSimpleSwatches[e].off(),this.aSimpleSwatches[e]=null;this.$simpleswatchescontainer.empty(),this.$simplenext.off(),this.$simpleprevious.off(),void 0!=this.line&&(this.$line.empty(),this.lineset.clear()),this.$svg.empty(),this.bAnimation=this.bSimpleMode||this.bTouch?!1:!0,this.$simpleMenuTargetIcon.attr("src",""),this.$simpleMenuTargetIcon.removeClass("selected")},blur:function(){this.bColorPickerFocus&&this.onBlur()},lock:function(e){this.bLock=e},setPosition:function(){this.$element.removeClass("stroller").removeClass("frame").removeClass("accessory"),this.$element.addClass(this.sMode)},getVisible:function(){return this.bVisible},determineBrowserSize:function(){var t=e.innerWidth,i=!1,o=this.bMiniConfigurator?1366:1440;return o>=t&&"medium"!=this.sSize&&(this.sSize="medium",this.bSmallResolution=!0,i=!0),t>o&&"large"!=this.sSize&&(this.sSize="large",this.bSmallResolution=!1,i=!0),i},setViewMode:function(e){this.bVisible&&(this.bSimpleColorpicker="simple"==e?!0:!1,this.bAnimation=!1,this.onBlur(),this.bShowOutOfStockAlert?this.bMiniConfigurator?this.bSimpleColorpicker&&this.showOutOfStockAlert():this.showOutOfStockAlert():this.hideOutOfStockAlert(),this.bSimpleColorpicker?(TweenMax.killTweensOf(this.$alert),this.$alert.css({display:"none",visibility:"hidden",top:0}),this.$pie.hide(),this.bSimpleMode&&(this.$simplecolorpicker.css("top",0),this.$simplecolorpicker.appendTo(this.$element)),this.$simplecolorpicker.show(),this.$element.addClass("simple")):(this.$element.removeClass("simple"),this.bSimpleMode?(this.$simplecolorpicker.appendTo(this.$specialsCp.find(".specialsCp-swatches-container")),this.$specialsCp.show(),this.$pie.hide(),this.$simplecolorpicker.show()):(this.$simplecolorpicker.hide(),this.setPosition(),this.$pie.show())),this.bAnimation=this.bSimpleMode||this.bTouch?!1:!0)},parseData:function(e){void 0,this.colors=e.colors,this.module=e.module,this.sType=e.sType,this.sLine=e.sLine,this.sIcon=e.sIcon,this.sMode=e.sMode},determineSwatchSizes:function(){this.nNumberOfSwatches=this.colors.length;var e=!1,t=1/this.nNumberOfSwatches;this.nBlurSizePerc=.5/(this.nNumberOfSwatches-1),this.nSelectedSwatch=0,this.nFocusSwatchSize=0,this.nBlurSwatchSize=360*this.nBlurSizePerc,this.aFocusSizes=[],this.aBlurSizes=[];for(var i=0;i<this.nNumberOfSwatches;i++)this.aFocusSizes.push(t),this.colors[i].selected&&(e=!0);var o,s=!1;for(i=0;i<this.nNumberOfSwatches;i++)e?this.colors[i].selected&&!s?(s=!0,this.nSelectedSwatch=i,o=.5):o=this.nBlurSizePerc:o=0==i?.5:this.nBlurSizePerc,this.aBlurSizes.push(o)},setupColorPicker:function(){var e=this;if(this.bPieAnimating=!1,this.bColorPickerFocus=!1,this.setupSimpleColorpicker(),this.$icon.attr("src",this.sIcon),this.$alert.css({top:this.nAlertOffsetY}),this.nAlertOffsetY=this.getAlertOffsetY(),this.bShowOutOfStockAlert=this.colors[this.nSelectedSwatch].available?!1:!0,this.bSimpleMode)this.$pie.hide(),this.bLine=!1,this.createSpecialsColorpicker();else{if(this.getSettings(),""!=this.sLine&&void 0!=this.sLine){this.bLine=!0,this.line=Raphael(this.$line[0],550,180),this.lineset=this.line.set(),this.lineset.push(this.line.rect(140,90,160,2).attr({fill:"0-#FFF:25-#FFF:90",opacity:0,stroke:"none"}));var t=-320;"left"==this.sLine?(t=-280,2==this.sType&&(t+=20),this.$line.css("left",t),this.lineset.attr({transform:"r180"})):this.$line.css("left","auto")}this.colorpicker=Raphael(this.$svg[0],this.nSvgCanvasSize,this.nSvgCanvasSize),this.svgset=this.colorpicker.set(),this.colorpicker.customAttributes.segment=function(t,i,o,s,n){e=e;var r=n-s>180,s=s%360*Math.PI/180,n=n%360*Math.PI/180;return{path:[["M",t,i],["l",o*Math.cos(s),o*Math.sin(s)],["A",o,o,0,+r,1,t+o*Math.cos(n),i+o*Math.sin(n)],["z"]]}},this.buildColorPicker()}},getSettings:function(){this.nDiameterMin=this.getMinDiameter(),this.nDiameterMax=280,this.nRadiusMin=.5*this.nDiameterMin,this.nRadiusMax=.5*this.nDiameterMax,this.nRadiusCenter=this.getCenterRadius(),this.nRadiusSwatches=this.nRadiusMax-10,this.nPointerOffsetY=this.getPointerOffsetY()},getMinDiameter:function(){var e;return e=this.bSmallResolution?1==this.sType?145:112:1==this.sType?180:140},getCenterRadius:function(){var e;return e=this.bSmallResolution?1==this.sType?30:24:1==this.sType?40:30},getPointerOffsetY:function(){var e;return e=this.bSmallResolution?1==this.sType?23:38:1==this.sType?5:25},getAlertOffsetY:function(){var e;return e=this.bSimpleMode?-42:this.bSmallResolution?1==this.sType?-32:-15:1==this.sType?-42:-22},buildColorPicker:function(){var e=this;this.twFadeInShadowCenter=new TweenMax(new Object,0,{}),this.twFadeInShadowBorder=new TweenMax(new Object,0,{}),this.twFadeInShadowPointer=new TweenMax(new Object,0,{});var t=0,i=-180-this.nSelectedSwatch*this.nBlurSwatchSize,o=this.nRadiusMin;o-=10,this.swatchesbackground=this.colorpicker.circle(this.nPosition,this.nPosition,o).attr({stroke:"none",fill:"#9f9d98"}),this.swatches=this.colorpicker.set();for(var s,n,r,a,l=0;l<this.nNumberOfSwatches;l++)t=360*this.aBlurSizes[l],r=180>t?t:r,s=this.colors[l].pattern?"url("+this.colors[l].pattern+")":this.colors[l].rgb,n=this.colors[l].pattern?"none":this.colors[l].rgb,this.colors[l].pattern?(a=this.colorpicker.path(),a.attr({segment:[this.nPosition,this.nPosition,o,i,i+t],fill:s,stroke:"none","stroke-width":0}),a.patternTemp=a.pattern,delete a.pattern):a=this.colorpicker.path().attr({segment:[this.nPosition,this.nPosition,o,i,i+t],stroke:n,"stroke-width":1,fill:s}),this.swatches.push(a),i+=t,this.initSwatchMouseHandlers(this.swatches[l],l);this.nBlurSwatchSize=2==this.nNumberOfSwatches?180:r,1==this.sType&&(this.circletexture=this.colorpicker.circle(this.nPosition,this.nPosition,o).attr({stroke:"none",fill:'url("'+this.textureImage+'")'}),this.circletexture.node.setAttribute("pointer-events","none")),2==this.sType&&(this.circleglowtl=this.colorpicker.circle(this.nPosition,this.nPosition,o).attr({stroke:"none",fill:"none"}),this.circleglowtl.g=this.circleglowtl.glow({color:"#FFF",width:12,offsetx:4,offsety:4,opacity:.2}),this.circleglowbr=this.colorpicker.circle(this.nPosition,this.nPosition,o).attr({stroke:"none",fill:"none"}),this.circleglowbr.g=this.circleglowbr.glow({color:"#FFF",width:12,offsetx:-4,offsety:-4,opacity:.2})),o+=2,this.circleshadow=this.colorpicker.circle(this.nPosition,this.nPosition,o).attr({stroke:"#000",fill:"none"}),this.circleshadow.g=this.circleshadow.glow({color:"#000",width:6,offsetx:0,offsety:4,opacity:.2}),this.pointer=this.colorpicker.path("M0,0 L30,0 L15,16 z").attr({fill:"#FFF",stroke:"none"}),this.pointer.transform("t75,"+this.nPointerOffsetY),this.pointer.g=this.pointer.glow({color:"#000",width:2,offsetx:0,offsety:1,opacity:.1}),this.aniPointer=Raphael.animation({path:"M0,0 L30,0 L15,16 z"},e.nAnimationSpeed1,"backOut",function(){var t=new Object;t.opacity=0,e.twFadeInShadowPointer=new TweenMax(t,1,{opacity:.1,onUpdate:function(){null!=e.pointer.g&&e.pointer.g.remove(),e.pointer.g=e.pointer.glow({color:"#000",width:2,offsetx:0,offsety:1,opacity:t.opacity})}})}),o+=3,this.circleborder=this.colorpicker.circle(this.nPosition,this.nPosition,o).attr({stroke:"#FFF","stroke-width":10,fill:"none"}),o=this.nRadiusCenter,this.circlecenter=this.colorpicker.circle(this.nPosition,this.nPosition,o).attr({stroke:"none",fill:"#FFF"}),this.circlecenter.g=this.circlecenter.glow({color:"#000",width:4,offsetx:0,offsety:2,opacity:.1}),this.svgset.push(this.swatchesbackground,this.circleborder,this.circlecenter,this.circleglowbr,this.circleglowtl,this.circleshadow,this.circletexture,this.swatches)},initSwatchMouseHandlers:function(e,t){var i=this;e.attr("stroke"),e[i.sClickEvent](function(e){e.stopPropagation(),i.bColorPickerFocus&&!i.bPieAnimating&&(i.selectColor(t,i.colors[t].id),i.bCountryHasStore&&(i.colors[i.nSelectedSwatch].available?(i.$outofstock.hide(),i.$icon.show()):(i.$icon.hide(),i.$outofstock.show())),i.bTouch&&i.onBlur())}),e.mouseover(function(){i.bColorPickerFocus&&!i.bPieAnimating&&(i.bCountryHasStore&&(i.colors[t].available?(i.$outofstock.hide(),i.$icon.show()):(i.$icon.hide(),i.$outofstock.show())),i.$label.text(i.colors[t].label).css({color:"#8d8b85",top:i.getLabelOffset()}))}),e.mouseout(function(){i.bColorPickerFocus&&!i.bPieAnimating&&i.$label.text(i.colors[i.nSelectedSwatch].label).css({color:"#000",top:i.getLabelOffset()})})},getLabelOffset:function(){var e;switch(this.$label.css("height")){case"16px":e="55px";break;case"32px":e="42px";break;case"48px":e="36px"}return e},setupSimpleColorpicker:function(){this.$simplecolorpicker=this.$element.find(".colorpicker-simple"),this.$simpleswatches=this.$simplecolorpicker.find(".swatches"),this.$simpleswatchescontainer=this.$simplecolorpicker.find(".swatches-container"),this.$simplenext=this.$simplecolorpicker.find(".next"),this.$simpleprevious=this.$simplecolorpicker.find(".previous"),this.$simplelabel=this.$simplecolorpicker.find(".colorpicker-simple-label.name .value"),this.$simpleoutofstock=this.$simplecolorpicker.find(".colorpicker-simple-label.alert"),this.$simplelabel.text(this.colors[this.nSelectedSwatch].label),this.$simpleswatchescontainer.empty(),this.nCurrentSimpleSwatchSet=0,this.nSwatchesContainerOffset=200,this.aSimpleSwatches=[];for(var e,i,o=0;o<this.nNumberOfSwatches;o++)e=this.colors[o].pattern?"url("+this.colors[o].pattern+")":this.colors[o].rgb,i=t(1==this.sType?'<div class="swatch" style="background:'+e+'"><div class="texture"><div class="inner-shadow"></div></div></div>':'<div class="swatch" style="background:'+e+'"><div class="inner-shadow"></div></div>'),this.nSelectedSwatch==o&&i.find(".inner-shadow").append('<div class="pointer"></div>'),this.aSimpleSwatches.push(i),this.$simpleswatchescontainer.append(i),this.initSimpleSwatchMouseHandlers(i,o);var s=this,n=this.nNumberOfSwatches/5;this.nTotalSimpleSwatchSets=Math.ceil(n);var r=Math.round(5*(this.nTotalSimpleSwatchSets-n));if(r>0)for(o=0;r>o;o++)i=t('<div class="swatch"></div>'),this.$simpleswatchescontainer.append(i);var a=40,l=(this.nNumberOfSwatches+r)*a-5;this.$simpleswatchescontainer.css({width:l}),this.nTotalSimpleSwatchSets>1&&this.$simplenext.addClass("active"),this.$simplenext.on(this.sClickEvent,function(){s.nCurrentSimpleSwatchSet<s.nTotalSimpleSwatchSets-1&&(s.nCurrentSimpleSwatchSet++,s.showCurrentSimpleSwatchSet(!0))}),this.$simpleprevious.on(this.sClickEvent,function(){s.nCurrentSimpleSwatchSet>0&&(s.nCurrentSimpleSwatchSet--,s.showCurrentSimpleSwatchSet(!0))}),this.selectSimpleSwatch()},showCurrentSimpleSwatchSet:function(e){var t=-(this.nCurrentSimpleSwatchSet*this.nSwatchesContainerOffset),i=e?.4:0;TweenMax.to(this.$simpleswatchescontainer,i,{marginLeft:t,ease:Quad.easeInOut}),this.nCurrentSimpleSwatchSet>0&&this.$simpleprevious.addClass("active"),this.nCurrentSimpleSwatchSet==this.nTotalSimpleSwatchSets-1&&this.$simplenext.removeClass("active"),0==this.nCurrentSimpleSwatchSet&&(this.$simpleprevious.removeClass("active"),this.nTotalSimpleSwatchSets>1&&this.$simplenext.addClass("active"))},initSimpleSwatchMouseHandlers:function(e,t){var i=this;i.bTouch||(e.on("mouseover",function(){i.$simplelabel.text(i.colors[t].label),i.colors[t].available?i.hideOutOfStockAlert():i.showOutOfStockAlert()}),e.on("mouseleave",function(){i.$simplelabel.text(i.colors[i.nSelectedSwatch].label),i.colors[i.nSelectedSwatch].available?i.hideOutOfStockAlert():i.showOutOfStockAlert()})),e.on(i.sClickEvent,function(){i.selectColor(t,i.colors[t].id)})},initMouseHandlers:function(){var e=this,t=e.bSimpleMode?e.$specialsCp:e.$svg;t.on(e.sFocusEvent,function(){e.bLock||(e.bSimpleMode?this.bMiniConfigurator||Configurator.onColorpickerFocus(this.sID):e.bColorPickerFocus||e.onFocus(),e.hideOutOfStockTooltip())});var i=e.bSimpleMode?e.$specialsCp:e.$pie;i.on("mouseleave",function(){e.bLock||(e.bSimpleMode?this.bMiniConfigurator||Configurator.onColorpickerBlur():e.bColorPickerFocus&&e.onBlur())})},onFocus:function(){this.bMiniConfigurator||Configurator.onColorpickerFocus(this.sID);var e=this;if(e.bColorPickerFocus=!0,this.hideOutOfStockAlert(),e.bSimpleMode)e.$specialsCp.show(),e.$simplecolorpicker.show();else{if(e.hidePointer(),e.colorpicker.setSize(300,300),e.svgset.attr({transform:"t60,60"}),e.bLine){e.line.setSize(550,360);var t="right"==e.sLine?"t60,60":"t0,60r180";e.lineset.attr({transform:t})}e.resizeColorPicker(e.aFocusSizes,e.nRadiusMax,e.nRadiusMax-60),this.$pie.css({marginLeft:"-60px",marginTop:"-60px"}),TweenMax.killTweensOf(e.$label),e.$label.text(e.colors[e.nSelectedSwatch].label).css({top:e.getLabelOffset()}).show(),TweenMax.killTweensOf(e.$divider),e.$divider.show(),e.bAnimation?(TweenMax.to(e.$label,.4,{delay:.2,css:{autoAlpha:1},ease:Expo.easeOut}),TweenMax.to(e.$icon,.4,{css:{top:"97px"},ease:Expo.easeOut}),TweenMax.to(e.$divider,.3,{css:{width:"75px",left:"53px",autoAlpha:1},ease:Expo.easeInOut})):(e.$label.show().css({visibility:"visible"}),e.$icon.css({top:"97px"}),e.$divider.show().css({width:"75px",left:"53px",visibility:"visible"})),e.pointer.transform("t134,19"),e.showPointer(250)}},onBlur:function(){!this.bMiniConfigurator&&!this.bSimpleColorpicker;var e=this;if(e.bColorPickerFocus=!1,this.$specialsCp&&this.$specialsCp.hide(),!e.bSimpleMode){for(var t=0;t<this.nNumberOfSwatches;t++)this.aBlurSizes[t]=t==this.nSelectedSwatch?.5:this.nBlurSizePerc;e.hidePointer(),e.bCountryHasStore&&e.$outofstock.hide(),e.$icon.show(),e.resizeColorPicker(e.aBlurSizes,e.nRadiusMin,e.nRadiusCenter),TweenMax.killTweensOf(e.$label),e.bAnimation?(TweenMax.to(e.$label,.2,{css:{autoAlpha:0},ease:Expo.easeOut,onComplete:function(){e.$label.hide()}}),TweenMax.to(e.$icon,.4,{css:{top:"65px"},ease:Expo.easeOut}),TweenMax.to(e.$divider,.5,{css:{width:"0px",left:"95px",autoAlpha:0},ease:Expo.easeOut,onComplete:function(){e.$divider.hide()}})):(e.$label.hide().css({visibility:"hidden"}),e.$icon.css({top:"65px"}),e.$divider.hide().css({width:"0px",left:"95px",visibility:"hidden"})),e.pointer.transform("t75,"+e.nPointerOffsetY),e.showPointer(400)}e.bShowOutOfStockAlert&&!this.bMiniConfigurator?this.showOutOfStockAlert():this.hideOutOfStockAlert()},resizeColorPicker:function(e,t,i){this.bPieAnimating=!0;var o=this;this.bColorPickerFocus&&(this.nFocusSwatchSize=360*e[0]);var s=0,n=t-5,r=n-3,a=t-10,i=i;if(this.circleshadow.stop(),this.twFadeInShadowBorder.kill(),this.circleshadow.g.remove(),this.circlecenter.stop(),this.twFadeInShadowCenter.kill(),this.circlecenter.g.remove(),o.bLine)var l="right"==o.sLine?"t0,0":"t0,0r180";
this.bAnimation?(this.circleborder.animate({r:n},this.nAnimationSpeed1,"easeInOut"),this.swatchesbackground.animate({r:a},this.nAnimationSpeed1,"easeInOut"),this.circleshadow.animate({r:r},this.nAnimationSpeed1,"easeInOut",function(){o.bColorPickerFocus||(o.colorpicker.setSize(o.nSvgCanvasSize,o.nSvgCanvasSize),o.svgset.attr({transform:"t0,0"}),o.bLine&&(o.line.setSize(550,180),o.lineset.attr({transform:l})),o.$pie.css({marginLeft:0,marginTop:0}));var e=new Object;e.opacity=0,o.twFadeInShadowBorder=new TweenMax(e,1,{opacity:.2,onUpdate:function(){o.circleshadow.g.remove(),o.circleshadow.g=o.circleshadow.glow({color:"#000",width:6,offsetx:0,offsety:4,opacity:e.opacity})}})}),this.circlecenter.animate({r:i},this.nAnimationSpeed2,"backOut",function(){var e=new Object;e.opacity=0,o.twFadeInShadowCenter=new TweenMax(e,1,{opacity:.1,onUpdate:function(){o.circlecenter.g.remove(),o.circlecenter.g=o.circlecenter.glow({color:"#000",width:4,offsetx:0,offsety:2,opacity:e.opacity})}})})):(o.bColorPickerFocus||(o.colorpicker.setSize(o.nSvgCanvasSize,o.nSvgCanvasSize),o.svgset.attr({transform:"t0,0"}),o.bLine&&(o.line.setSize(550,180),o.lineset.attr({transform:l})),o.$pie.css({marginLeft:0,marginTop:0})),this.circleshadow.attr({r:r}),this.circleshadow.g=this.circleshadow.glow({color:"#000",width:6,offsetx:0,offsety:4,opacity:.2}),this.circlecenter.attr({r:i}),this.circlecenter.g=this.circlecenter.glow({color:"#000",width:4,offsetx:0,offsety:2,opacity:.1}),this.circleborder.attr({r:n}),this.swatchesbackground.attr({r:a})),1==this.sType&&(this.bAnimation?this.circletexture.animate({r:a},this.nAnimationSpeed1,"easeInOut"):this.circletexture.attr({r:a})),2==this.sType&&(this.circleglowtl.stop(),this.circleglowtl.g.remove(),this.circleglowbr.stop(),this.circleglowbr.g.remove(),this.bAnimation?(this.circleglowtl.animate({r:a},this.nAnimationSpeed1,"easeInOut",function(){o.circleglowtl.g.remove(),o.circleglowtl.g=o.circleglowtl.glow({color:"#FFF",width:14,offsetx:4,offsety:4,opacity:.2})}),this.circleglowbr.animate({r:a},this.nAnimationSpeed1,"easeInOut",function(){o.circleglowbr.g.remove(),o.circleglowbr.g=o.circleglowbr.glow({color:"#FFF",width:14,offsetx:-4,offsety:-4,opacity:.2})})):(this.circleglowtl.attr({r:a}),this.circleglowbr.attr({r:a}),this.circleglowtl.g=this.circleglowtl.glow({color:"#FFF",width:14,offsetx:4,offsety:4,opacity:.2}),this.circleglowbr.g=this.circleglowbr.glow({color:"#FFF",width:14,offsetx:-4,offsety:-4,opacity:.2})));var c=0,h=this.bColorPickerFocus?-90-this.nSelectedSwatch*this.nFocusSwatchSize-this.nFocusSwatchSize/2:-180-this.nSelectedSwatch*this.nBlurSwatchSize;for(c=0;c<this.nNumberOfSwatches;c++)s=360*e[c],this.bAnimation?this.swatches[c].animate({segment:[this.nPosition,this.nPosition,a,h,h+s]},this.nAnimationSpeed1,"easeInOut",function(){c==o.nNumberOfSwatches&&(o.bPieAnimating=!1)}):(this.swatches[c].attr({segment:[this.nPosition,this.nPosition,a,h,h+s]}),this.bPieAnimating=!1),h+=s},selectColor:function(t,i){var o=this;if(this.bPieAnimating=!0,this.nSelectedSwatch=t,this.bShowOutOfStockAlert=o.colors[t].available?!1:!0,!this.bSimpleMode){var s=-90-t*this.nFocusSwatchSize-this.nFocusSwatchSize/2,n=0;for(n;n<this.nNumberOfSwatches;n++)this.bAnimation?this.swatches[n].animate({segment:[this.nPosition,this.nPosition,this.nRadiusSwatches,s,s+this.nFocusSwatchSize]},this.nAnimationSpeed1,"easeInOut",function(){n==o.nNumberOfSwatches&&(o.bPieAnimating=!1)}):(this.swatches[n].attr({segment:[this.nPosition,this.nPosition,this.nRadiusSwatches,s,s+this.nFocusSwatchSize]}),this.bPieAnimating=!1),s+=this.nFocusSwatchSize}this.$label.css("color","#000").text(this.colors[this.nSelectedSwatch].label),this.selectSimpleSwatch(),this.bMiniConfigurator?(e.bugaboo.miniconfigurator.setColour(i),this.determineLineVisibility()):Configurator.Selected.setColour(i,this.module,!0)},determineLineVisibility:function(){if(this.bCountryHasStore){var e=this.colors[this.nSelectedSwatch].price;void 0==e||""==e?this.$line.hide():this.$line.show()}else this.$line.hide()},selectSimpleSwatch:function(){for(var e,t=0,i=0,o=0;o<this.aSimpleSwatches.length;o++)e=this.aSimpleSwatches[o].find(".pointer"),5==i&&(t++,i=0),i++,this.nSelectedSwatch==o?(0==e.length&&this.aSimpleSwatches[o].find(".inner-shadow").append('<div class="pointer"></div>'),this.nCurrentSimpleSwatchSet=t,this.showCurrentSimpleSwatchSet()):e.remove();this.$simplelabel.text(this.colors[this.nSelectedSwatch].label),this.bShowOutOfStockAlert?this.bMiniConfigurator?this.bSimpleColorpicker&&this.showOutOfStockAlert():this.showOutOfStockAlert():this.hideOutOfStockAlert()},showPointer:function(e){this.bAnimation?this.pointer.animate(this.aniPointer.delay(e)):(this.pointer.attr({path:"M0,0 L30,0 L15,16 z"}),null!=this.pointer.g&&this.pointer.g.remove(),this.pointer.g=this.pointer.glow({color:"#000",width:2,offsetx:0,offsety:1,opacity:.1}))},hidePointer:function(){this.pointer.stop(),this.twFadeInShadowPointer.kill(),null!=this.pointer.g&&this.pointer.g.remove(),this.pointer.attr({path:"M0,0 L30,0 L15,0 z"})},showOutOfStockAlert:function(){var t=this;if(this.bCountryHasStore)if(0==this.bSimpleColorpicker){TweenMax.killTweensOf(this.$alert),this.$alert.css({top:0,visibility:"hidden"}).show(),this.hideOutOfStockTooltip();var i=this.nAlertOffsetY;TweenMax.to(this.$alert,.4,{delay:.5,css:{top:i,autoAlpha:1},ease:Back.easeOut,onComplete:function(){t.timeOutOutOfStockToolTip=e.setTimeout(function(){t.showOutOfStockTooltip()},500)}})}else this.$simplelabel.css("top","61px"),this.$simpleoutofstock.show()},hideOutOfStockAlert:function(){TweenMax.killTweensOf(this.$alert),this.$alert.css({display:"none",visibility:"hidden",top:0}),this.$simpleoutofstock.hide(),this.$simplelabel.css("top","71px")},showOutOfStockTooltip:function(){var t=this;this.$alert.tooltipster("show"),e.clearTimeout(this.timeOutOutOfStockToolTip),this.timeOutOutOfStockToolTip=e.setTimeout(function(){t.hideOutOfStockTooltip()},4e3)},hideOutOfStockTooltip:function(){e.clearTimeout(this.timeOutOutOfStockToolTip),this.$alert.tooltipster("hide")},createSpecialsColorpicker:function(){this.$specialsCp=t('<div class="specialsCp-container"></div>'),this.bMiniConfigurator&&this.$specialsCp.css({left:"0px"}),this.$element.append(this.$specialsCp),this.$specialsCp.hide();var e=t('<div class="specialsCp-swatches-container"></div>');this.$specialsCp.append(e),this.$simplecolorpicker.appendTo(e),this.$$specialsCpIcon=t('<img class="specialsCp-icon" src="'+this.sIcon+'"/>'),this.$specialsCp.append(this.$$specialsCpIcon)}},t.fn[o]=function(e,s){var n=[];return this.each(function(){var r,a,l;return r=t(this),a=r.data(o),l="object"==typeof e&&e,a||(n=r.data(o,a=new i(this,l))),"string"==typeof e&&(n=a[e],"function"==typeof n)?n=n.call(a,s):void 0}),n},t.fn[o].fx={}}(this,jQuery),define("configurator-product-menu",["tooltip"],function(e){var t={load:function(t,i){this.$element=$(t),this.options=i,this.tooltip=e,this.setup()},setup:function(){this.$basket=this.$element.find(".basket"),this.$basketbg=this.$basket.find(".bg"),this.$basketitems=this.$basket.find(".items"),this.$basketcontainer=this.$basketitems.find(".itemscontainer"),this.$basketoverlay=this.$basket.find(".overlay"),this.$basketup=this.$basket.find(".up"),this.$basketdown=this.$basket.find(".down"),this.$basketguilock=this.$basket.find(".gui-lock"),this.$menu=this.$element.find(".menu"),this.$menucontainer=this.$menu.find(".container"),this.$menuitems=this.$menu.find(".items"),this.$menuitemscontainer=this.$menuitems.find(".itemscontainer"),this.$menuitemslist=this.$menuitemscontainer.find("ul"),this.$basketItemHTML=this.$basket.find(".item"),this.$menuItemHTML=this.$menu.find(".menu-item"),this.bTouch=window.bugaboo.isTouch,this.bFirstRun=!0,this.bMenuOpen=!1,this.bSelectBasketItem=!1,this.sClickEvent=this.bTouch?"touchstart":"click",this.nShowDelayCounter=0,this.nShowDelayOffset=.5,this.nTotalOutOfStock=0,this.nTimerResize,this.MARGIN_TOP=50,this.BASKET_ITEM_HEIGHT=122,this.setupGlobalMethods(),this.setupBasket()},setupGlobalMethods:function(){var e=this;window.bugaboo.configuratorproductmenu={},window.bugaboo.configuratorproductmenu.init=function(){e.init()},window.bugaboo.configuratorproductmenu.update=function(){e.setBasketStrollerState()},window.bugaboo.configuratorproductmenu.addStroller=function(t){e.addBasketStroller(t)},window.bugaboo.configuratorproductmenu.updateStroller=function(t){e.updateBasketStroller(t)},window.bugaboo.configuratorproductmenu.addAccessory=function(t){e.addBasketItem(t),e.nShowDelayCounter++},window.bugaboo.configuratorproductmenu.updateAccessory=function(t){e.updateBasketItem(t)},window.bugaboo.configuratorproductmenu.addMenuItem=function(t){e.addMenuItem(t)},window.bugaboo.configuratorproductmenu.getState=function(){return e.bMenuOpen}},resize:function(){this.nTimerResize&&window.clearTimeout(this.nTimerResize);var e=this;this.nTimerResize=window.setTimeout(function(){var t=$(".c3-configurator").height(),i=50,o=t-2*i;e.nBasketHeight=Math.max(e.BASKET_ITEM_HEIGHT,Math.floor(o/e.BASKET_ITEM_HEIGHT)*e.BASKET_ITEM_HEIGHT),e.$basketitems.css({height:e.nBasketHeight}),e.bFirstRun||Configurator.onColorpickerBlur(),void 0!=e.iScrollBasket&&(e.iScrollBasket.refresh(),e.bMenuOpen?e.$basketcontainer.height()>e.nBasketHeight&&e.iScrollBasket.scrollToElement(e.$addaccessory[0],.1):e.$basketcontainer.height()>e.nBasketHeight&&e.iScrollBasket.scrollToElement(e.$selectedItem[0],.1),e.iScrollBasket.refresh(),e.onBasketScrollerChange()),e.bFirstRun||(e.setMenuItemsHeight(),void 0!=e.iScrollMenu&&e.iScrollMenu.refresh()),e.setOverlayBasketHeight(),e.bFirstRun=!1},1)},init:function(){this.setupMenu(),this.$basket.show(),this.initBasketScroller(),this.onSelectBasketItem(this.$stroller),this.showBasketItem(this.$addaccessory,.6+.1*this.aBasketItems.length,"addaccessory");var e=this;$(window).on("resize",function(){e.resize()}),this.resize(),this.onBasketScrollerChange()},setupBasket:function(){this.aBasketItems=[],this.$addaccessory=this.$basketItemHTML.clone(),this.$addaccessory.addClass("add"),this.$addaccessory.find(".alert-icon").remove(),this.$addaccessory.find(".image").remove(),this.$addaccessory.find("span").removeClass().addClass("icon-add"),this.$addaccessory.find(".price").appendTo(this.$addaccessory).text("add accessory"),this.$basketcontainer.append(this.$addaccessory);var e=this;this.$addaccessory.on(e.sClickEvent,function(){e.showMenu()})},addBasketStroller:function(e){this.bStrollerActive=Configurator.Stroller.isActive(),this.$stroller=this.$basketItemHTML.clone(),this.$stroller.addClass("stroller"),this.bStrollerActive||this.$stroller.addClass("ghost");var t=this.bStrollerActive?"icon-delete":"icon-plus-small";this.$stroller.find("span").removeClass().addClass(t),this.$stroller.find(".price").text(Configurator.formatPrice(e.price)),new this.tooltip(this.$stroller.find(".alert-icon")[0],{orientation:"right"}),this.$stroller.data({id:e.id,available:e.available,outofstock_visible:!1}),this.$stroller.find(".image img").attr({src:e.img_sml,title:e.label}),this.$addaccessory.before(this.$stroller),this.aBasketItems.push(this.$stroller),this.showBasketItem(this.$stroller,0,"stroller")},updateBasketStroller:function(e){this.$stroller.data({id:e.id,available:e.available}),this.$stroller.find(".image img").attr({src:e.img_sml,title:e.label}),e.available?this.hideOutOfStockAlert(this.$stroller):this.showOutOfStockAlert(this.$stroller,0)},setBasketStrollerState:function(){if(this.bStrollerActive=Configurator.Stroller.isActive(),this.bStrollerActive)this.$stroller.removeClass("ghost"),this.onSelectBasketItem(this.$stroller);else{this.$stroller.addClass("ghost");var e=null!=this.aBasketItems[1]?this.aBasketItems[1]:this.$stroller;this.onSelectBasketItem(e),this.hideOutOfStockAlert(this.$stroller)}var t=this.bStrollerActive?"icon-delete":"icon-plus-small";this.$stroller.find("span").removeClass().addClass(t)},addBasketItem:function(e,t){var i=this.$basketItemHTML.clone();i.addClass("accessory"),i.data({outofstock_visible:!1}),this.setupBasketItem(i,e),new this.tooltip(i.find(".alert-icon")[0],{orientation:"right"}),"undefined"!=typeof e.notification&&""!=e.notification&&this.setupNotification(i,e.notification,e.available),this.$addaccessory.before(i),this.aBasketItems.push(i),2==this.aBasketItems.length&&this.$stroller.addClass("shadow-bottom"),this.showBasketItem(i,t,"accessory"),this.bSelectBasketItem&&this.onSelectBasketItem(i),void 0!=this.iScrollBasket&&(this.iScrollBasket.refresh(),this.$basketcontainer.height()>this.nBasketHeight&&(this.iScrollBasket.scrollToElement(this.$addaccessory[0],200),this.$basketdown.removeClass("visible")))},setupBasketItem:function(e,t){e.data({id:t.id,available:t.available}),e.find(".image img").attr({src:t.img_sml,title:t.label}),e.find(".price").text(Configurator.formatPrice(t.price))},updateBasketItem:function(e){for(var t,i=this.aBasketItems.length,o=0;i>o;o++)if(this.aBasketItems[o].data("id")==e.id){t=this.aBasketItems[o],this.setupBasketItem(t,e),e.available?this.hideOutOfStockAlert(t):this.showOutOfStockAlert(t,0);break}},showBasketItem:function(e,t,i){var o=this;void 0==t&&(t=this.bFirstRun?.5+.1*this.aBasketItems.length:0),e.css({display:"block"}),TweenMax.to(e,.3,{delay:t,marginLeft:0,ease:Quad.easeOut,onComplete:function(){"addaccessory"!=i&&o.initBasketItemMouseHandlers(e,i)}}),void 0!=e.data("available")&&0==e.data("available")&&this.showOutOfStockAlert(e,t)},showOutOfStockAlert:function(e,t){if(Configurator.countryHasStore&&!e.data("outofstock_visible")){e.data("outofstock_visible",!0);var i=e.find(".alert-icon");this.nTotalOutOfStock++,this.nTotalOutOfStock>0&&(Configurator.Action.bOutOfStock=!0),TweenMax.killTweensOf(i),i.css({left:116,visibility:"hidden"}).show();var o=t+.3;TweenMax.to(i,.4,{delay:o,css:{left:86,autoAlpha:1},ease:Back.easeOut})}},hideOutOfStockAlert:function(e){if(e.data("outofstock_visible")){e.data("outofstock_visible",!1);var t=e.find(".alert-icon");this.nTotalOutOfStock>0&&this.nTotalOutOfStock--,TweenMax.killTweensOf(t),TweenMax.to(t,.3,{css:{left:116,autoAlpha:0},ease:Expo.easeIn,onComplete:function(){t.hide()}}),0==this.nTotalOutOfStock&&(Configurator.Action.bOutOfStock=!1)}},setupNotification:function(e,t,i){var o=e.find(".notification");i||o.css("margin-top","16px"),o.attr("title",$(t).attr("title"));var s=new this.tooltip(o[0],{orientation:"right"});null==this.aNotifications&&(this.aNotifications=[]);var n=setTimeout(function(){s.show(),n=setTimeout(function(){s.hide()},5e3)},3e3);this.aNotifications.push(new Array(s,n))},hideNotifications:function(){if(null!=this.aNotifications&&this.aNotifications.length>0){for(var e=0;e<this.aNotifications.length;e++)clearTimeout(this.aNotifications[e][1]),this.aNotifications[e][0].hide();this.aNotifications=null}},initBasketItemMouseHandlers:function(e,t){var i=this,o=this.bTouch?"touchstart":"mouseup";e.on(o,function(o){i.hideNotifications(),"stroller"==t&&"SPAN"!=o.target.tagName&&(i.bStrollerActive||Configurator.Basket.unremoveStroller()),e.hasClass("active")||i.onSelectBasketItem(e)}),e.find("span").on(i.sClickEvent,function(){"stroller"==t&&(i.bStrollerActive?$.magnificPopup.open({items:{src:"#popup1"},closeMarkup:'<button title="%title%" class="mfp-close"><span class="icon-small-close"></span></button>'}):Configurator.Basket.unremoveStroller()),"accessory"==t&&i.removeBasketItem(e)})},onSelectBasketItem:function(e){this.bSelectBasketItem=!1,this.$selectedItem=e,this.$selectedItem==this.$stroller?Configurator.Selected.selectStroller():Configurator.Selected.selectAccessory(this.$selectedItem.data("id"));for(var t,i,o=this.aBasketItems.length,s=0;o>s;s++)t=this.aBasketItems[s],t==e?(e.removeClass("shadow-top").removeClass("desaturate"),e.addClass("active"),s!=o-1&&e.addClass("shadow-bottom"),i=this.aBasketItems[s-1],void 0!=i&&i.addClass("shadow-top")):(t.removeClass("active").removeClass("shadow-bottom"),t.addClass("desaturate"),t!=i&&t.removeClass("shadow-top"))},removeBasketItem:function(e){var t,i=this;0==e.data("available")&&this.hideOutOfStockAlert(e);for(var o=0;o<this.aBasketItems.length;o++)if(this.aBasketItems[o]==e){t=void 0!=this.aBasketItems[o+1]?this.aBasketItems[o+1]:this.aBasketItems[o-1],this.aBasketItems.splice(o,1);break}e.off(),e.css({pointerEvents:"none"}),TweenMax.to(e,.2,{marginLeft:-100,autoAlpha:0,ease:Quad.easeInOut,onComplete:function(){e.remove(),e=null,i.iScrollBasket.refresh(),i.onBasketScrollerChange()}}),Configurator.Basket.removeAccessory(e.data("id")),this.onSelectBasketItem(t)},initBasketScroller:function(){var e=this;this.iScrollBasket=new IScroll(this.$basketitems[0],{snap:"a",bounce:!1,vScrollbar:!1,hScrollbar:!1,hScroll:!1,lockDirection:!1,probeType:3}),this.iScrollBasket.on("scroll",function(){e.onBasketScrollerChange()}),this.$basketup.on(e.sClickEvent,function(){e.getBasketScrollOfset()<0&&e.iScrollBasket.scrollBy(0,e.BASKET_ITEM_HEIGHT,200)});var t;this.$basketdown.on(e.sClickEvent,function(){t=-(e.$basketcontainer.height()-e.nBasketHeight),e.getBasketScrollOfset()>t&&e.iScrollBasket.scrollBy(0,-e.BASKET_ITEM_HEIGHT,200)})},getBasketScrollOfset:function(){var e=this.$basketcontainer.css("transform")||this.$basketcontainer.css("-moz-transform")||this.$basketcontainer.css("-webkit-transform")||this.$basketcontainer.css("-ms-transform")||this.$basketcontainer.css("-o-transform"),t=e.match(/-?[0-9\.]+/g),i=6==t.length?t[5]:t[14];return Math.round(i)},onBasketScrollerChange:function(){var e=-(this.$basketcontainer.height()-this.nBasketHeight)+120;this.getBasketScrollOfset()>e?this.$basketdown.addClass("visible"):this.$basketdown.removeClass("visible"),this.getBasketScrollOfset()<0?this.$basketup.addClass("visible"):this.$basketup.removeClass("visible")},showOverlayBasket:function(){this.setOverlayBasketHeight(),this.$basketoverlay.show(),TweenMax.to(this.$basketoverlay,.5,{autoAlpha:.3}),this.$basketbg.show(),TweenMax.to(this.$basketbg,.5,{autoAlpha:.3})},setOverlayBasketHeight:function(){var e=this.$addaccessory.position().top+this.MARGIN_TOP;this.$basketoverlay.css({height:e})},hideOverlayBasket:function(){this.$basketoverlay.hide(),this.$basketoverlay.css({opacity:0,visibility:"hidden"}),this.$basketbg.hide(),this.$basketbg.css({opacity:0,visibility:"hidden"})},setupMenu:function(){this.setMenuItemsHeight(),this.initMenuScroller(),this.$menu.css({width:0});var e=this;this.$menu.find(".title-header").find("span").on(this.sClickEvent,function(){e.hideMenu()})},setMenuItemsHeight:function(){var e=this.$menucontainer.height()-30;this.$menuitems.css({height:e})},addMenuItem:function(e){var t=this.$menuItemHTML.clone();t.css({display:"block"}),t.data("id",e.id),t.data("vpc",e.vpc),t.find("h4").text(e.label);var i=""!=e.from?e.from+" "+e.price:Configurator.formatPrice(e.price);t.find("h5").text(i),t.find("img").attr("src",e.img_lrg),this.$menuitemslist.append(t);var o=this;t.find(".button-container").on(this.sClickEvent,function(){o.bSelectBasketItem=!0,o.nShowDelayOffset=0,o.nShowDelayCounter=0,Configurator.Basket.addAccessory(e.vpc,!0),o.hideMenu()})},showMenu:function(){this.hideNotifications();var e=this;$(document).on("mousedown.clickOutSideConfiguratorMenu",function(t){$(t.target).closest(e.$menucontainer).length||e.bMenuOpen&&e.hideMenu()}),this.bMenuOpen=!0,this.$basketguilock.show(),this.$menu.css({width:"565px"}),this.iScrollMenu.refresh(),this.showOverlayBasket(),this.$addaccessory.addClass("active"),this.bTouch?this.$menucontainer.css("left",0):TweenMax.to(this.$menucontainer,.4,{left:0,ease:Quad.easeOut}),Configurator.onColorpickerBlur()},hideMenu:function(){$(document).off("mousedown.clickOutSideConfiguratorMenu"),this.bMenuOpen=!1,this.$addaccessory.removeClass("active"),this.$menucontainer.css({left:"-565px"}),this.$menu.css({width:0}),void 0!=this.iScrollMenu&&this.iScrollMenu.refresh(),this.hideOverlayBasket(),this.$basketguilock.hide(),Configurator.onColorpickerFocus()},initMenuScroller:function(){var e=this;void 0,void 0,this.iScrollMenu=new IScroll(this.$menuitems[0],{bounce:e.bTouch,interactiveScrollbars:!0,vScrollbar:!0,hScrollbar:!1,hScroll:!1,mouseWheel:!0,scrollbars:"custom",momentum:e.bTouch}),this.$menu.on("DOMMouseScroll mousewheel",function(e){var t=$(this),i=this.scrollTop,o=this.scrollHeight,s=t.height(),n="DOMMouseScroll"==e.type?-40*e.originalEvent.detail:e.originalEvent.wheelDelta,r=n>0,a=function(){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1};return!r&&-n>o-s-i?(t.scrollTop(o),a()):r&&n>i?(t.scrollTop(0),a()):void 0})},unload:function(){}};return t}),define("d1-dropdown",[],function(){var e={load:function(e){$(e).on("change",function(){var e=$(this).data("update-element"),t=$(this).data("api-url"),i=this.value;$.ajax({url:t,type:"GET",dataType:"json",data:this.name+"="+i,success:function(t){$("."+e).html(t.html)},error:function(){}})})},unload:function(){}};return e}),define("tooltip",["underscore"],function(){"use strict";var e=function(e,t){if(this.element=e,this.options=t,void 0!=this.element)var i=this.element.title;void 0!=i&&""!=i&&this.init()};return e.prototype={init:function(){this.orientation=this.options.orientation,this.createTooltip()},createTooltip:function(){this.settings=this.getToolTipSettings(),this.initTooltipster()},initTooltipster:function(){$(this.element).tooltipster(this.settings)},getToolTipSettings:function(){var e=void 0!=this.orientation?this.orientation:"top";return{animation:e,delay:200,speed:300,touchDevices:!0,position:this.orientation}},show:function(){$(this.element).tooltipster("show")},hide:function(){$(this.element).tooltipster("hide")}},e.prototype.unload=function(){},e}),define("d6-3d-product-explorer",[],function(){var e={options:{},load:function(e,t){this.$element=$(e),this.$mainContainer=$(this.$element).closest("section"),this.sColorSetting=t.colorSetting,this.bConfigurator=t.configurator||!1,this.bMiniConfigurator=t.miniconfigurator||!1,this.studioImgVersion=t.studioImgVersion||"0",this.setup()},setup:function(){this.$display=this.$element.find(".display"),this.$hitfield=this.$element.find(".hitfield"),this.$controls=this.$element.find(".controls"),this.$loader=this.$controls.find(".loader"),this.$previousFrame=this.$controls.find(".prev"),this.$nextFrame=this.$controls.find(".next"),this.$zoombutton=this.$controls.find(".zoom"),this.$controlsMobile=this.$element.find(".controls-mobile"),this.$nextFrameMobile=this.$controlsMobile.find(".next-mobile"),this.$bg=this.$element.find(".bg"),this.$bgleft=this.$bg.find(".bg-left"),this.$bgright=this.$bg.find(".bg-right"),this.bProductViewerReady=!1,this.bDragging=!1,this.bArrowControls=!1,this.bFirstRun=!0,this.bProductResize=!1,this.bTouch=window.bugaboo.isTouch,this.bIntroSpin=!0,this.bLocked=!1,this.nPointerStartPosX=0,this.nPointerEndPosX=0,this.nPointerDistance=0,this.nMonitorStartTime=0,this.nMonitorInt=10,this.nTicker=0,this.nSpeedMultiplier=-8,this.nCurrentFrame=0,this.nEndFrame=0,this.nViewWidth=877,this.nOffsetPrevEnd=0,this.nOffsetNextEnd=100,this.nOffsetPrevStart=20,this.nOffsetNextStart=82,this.nFlipSideFrame=26,this.SIZE_S=360,this.SIZE_M=537,this.SIZE_L=702,this.SIZE_XL=877,this.SIZE_ZOOM=2e3,this.nSize=0,"white"==this.sColorSetting&&(this.$bgleft.find("div").addClass("white"),this.$bgright.find("div").addClass("white"),this.$nextFrameMobile.addClass("white"),this.$controlsMobile.find("div").addClass("white")),this.setupGlobalMethods();var e=this;$(window).on("resize",function(){e.resize()}),this.resize(),this.initProductInteraction()},setupGlobalMethods:function(){var e=this;window.bugaboo.productexplorer={},window.bugaboo.productexplorer.update=function(t){e.data=t,e.updateProduct()}},resize:function(){var e=window.innerWidth,t=!1,i=this.bConfigurator?1440:1366;768>e?(this.nSize!=this.SIZE_S&&(this.nSize=this.SIZE_S,t=!0),this.sMouseDown=this.bTouch?"touchstart":"mousedown",this.sMouseUp=this.bTouch?"touchend":"mouseup"):(this.sMouseDown=this.bTouch?"touchstart mousedown":"mousedown",this.sMouseUp=this.bTouch?"touchend mouseup":"mouseup"),e>=768&&i>=e&&this.nSize!=this.SIZE_M&&(this.nSize=this.SIZE_M,t=!0),e>i&&1920>e&&this.nSize!=this.SIZE_L&&(this.nSize=this.SIZE_L,t=!0),e>=1920&&this.nSize!=this.SIZE_XL&&(this.nSize=this.SIZE_XL,t=!0),(this.bConfigurator||this.bMiniConfigurator)&&(768>e||e>=1024?this.$bg.show():this.$bg.hide()),t&&(t=!1,this.bProductResize=!0,this.determineButtonOffset(),this.determineBackgroundSize(),this.adjustBackground(),this.bFirstRun||this.updateProduct())},setupViewer:function(){this.nTotalFrames=this.data.frames,this.bProduct3D=this.nTotalFrames>2?!0:!1,this.bZoom=1==this.nTotalFrames?!1:this.data.zoom,this.nSize==this.SIZE_S?(this.bProduct3D=!1,this.nTotalFrames=Math.min(this.nTotalFrames,2),1==this.nTotalFrames?(this.$controlsMobile.css("visibility","hidden"),this.$controlsMobile.hide(),this.$previousFrame.hide(),this.$nextFrame.hide(),this.$zoombutton.hide()):this.$controlsMobile.show()):(this.$controlsMobile.hide(),this.nTotalFrames>1?(this.$bgleft.css({overflow:"hidden"}),this.$bgright.show(),this.bProduct3D?(this.$previousFrame.children("span").removeClass().addClass("icon-arrow-left-large"),this.$nextFrame.children("span").removeClass().addClass("icon-arrow-right-large")):(this.nTotalFrames=2,this.$previousFrame.children("span").removeClass().addClass("icon-arrow-flip-cw"),this.$nextFrame.children("span").removeClass().addClass("icon-arrow-flip-ccw")),this.bZoom?this.$zoombutton.show():this.$zoombutton.hide(),this.determineButtonOffset()):(this.$previousFrame.hide(),this.$nextFrame.hide(),this.$zoombutton.hide())),this.determineBackgroundSize(),this.initLoadImages(),this.bFirstRun=!1},updateProduct:function(){this.nSize!=this.SIZE_S&&this.$element.css("pointer-events","none");var e=this;if(this.bFirstRun)this.setupViewer();else if(TweenMax.killTweensOf(this.$loader),TweenMax.killTweensOf(this.$display),this.clearImages(),this.nEndFrame=0,this.bProductViewerReady=!1,window.clearInterval(this.nTicker),this.nTicker=0,this.stopRotation(),this.bProductResize&&this.$display.empty().css({visibility:"hidden",opacity:0}),this.nSize!=this.SIZE_S){TweenMax.killTweensOf(this.$bgleft),TweenMax.killTweensOf(this.$bgright),TweenMax.killTweensOf(this.$zoombutton),TweenMax.killTweensOf(this.$nextFrame),TweenMax.killTweensOf(this.$previousFrame);var t=this.bProductResize?0:.4;this.$zoombutton.show(),this.$nextFrame.show(),this.$previousFrame.show(),TweenMax.to(this.$bgleft,t,{width:this.nBgMaskWidthClosed,ease:Expo.easeIn}),TweenMax.to(this.$bgright,t,{width:this.nBgMaskWidthClosed,ease:Expo.easeIn}),TweenMax.to(this.$zoombutton,t,{css:{autoAlpha:0},ease:Expo.easeIn}),TweenMax.to(this.$previousFrame,t,{css:{left:this.nOffsetPrevStart,autoAlpha:0},ease:Expo.easeIn}),TweenMax.to(this.$nextFrame,t,{css:{left:this.nOffsetNextStart,autoAlpha:0},ease:Expo.easeIn,onComplete:function(){e.setupViewer()}})}else TweenMax.killTweensOf(this.$zoombutton),TweenMax.killTweensOf(this.$nextFrame),TweenMax.killTweensOf(this.$previousFrame),this.$zoombutton.hide(),this.$nextFrame.hide(),this.$previousFrame.hide(),TweenMax.to(this.$bgleft,.6,{width:this.nBgMaskWidthClosed,ease:Expo.easeInOut}),TweenMax.to(this.$bgright,.6,{width:this.nBgMaskWidthClosed,ease:Expo.easeInOut,onComplete:function(){e.setupViewer()}});this.bProductResize=!1},determineBackgroundSize:function(){switch(this.nSize){case this.SIZE_XL:this.nBgMaskWidthClosed=390,this.nBgMaskWidthOpen=340,this.bZoom||(this.nBgMaskWidthOpen+=34);break;case this.SIZE_L:this.nBgMaskWidthClosed=306,this.nBgMaskWidthOpen=260,this.bZoom||(this.nBgMaskWidthOpen+=25);break;case this.SIZE_M:this.nBgMaskWidthClosed=225,this.nBgMaskWidthOpen=178,this.bZoom||(this.nBgMaskWidthOpen+=25);break;case this.SIZE_S:this.nBgMaskWidthClosed=110,this.nBgMaskWidthOpen=110}1==this.nTotalFrames&&(this.nBgMaskWidthOpen=this.nBgMaskWidthClosed)},adjustBackground:function(){TweenMax.killTweensOf(this.$bgleft),TweenMax.killTweensOf(this.$bgright);var e=this.bProductViewerReady?this.nBgMaskWidthOpen:this.nBgMaskWidthClosed;this.$bgleft.css({width:e}),this.$bgright.css({width:e})},determineButtonOffset:function(){this.nOffsetPrevStart=this.bZoom?20:45,this.nOffsetNextStart=this.bZoom?80:55,this.nOffsetPrevEnd=this.bZoom?0:25,this.nOffsetNextEnd=this.bZoom?100:75,this.nOffsetYControls=this.bZoom?10:9,(this.nSize==this.SIZE_M||this.nSize==this.SIZE_L)&&(this.nOffsetYControls-=1),this.nSize==this.SIZE_S&&(this.nOffsetYControls=6),this.$controls.css({bottom:this.nOffsetYControls})},clearImages:function(){if(null!=this.aFrames)for(var e=this.aFrames.length,t=0;e>t;t++)null!=this.aFrames[t]&&(this.bFirstImageLoaded?t!=this.getNormalizedCurrentFrame()&&this.aFrames[t].attr("src",""):this.aFrames[t].attr("src","")),this.aFrames[t]=null;this.aFrames=null},initLoadImages:function(){this.bFirstImageLoaded=!1,this.nCurrentImageToLoad=this.bFirstRun?1:Math.max(1,this.getCurrentFrame()+1),this.bProduct3D||(this.nCurrentImageToLoad=1==this.nCurrentImageToLoad?1:this.nFlipSideFrame),this.nLoadedImages=1,this.aFrames=[],null==this.canvasLoader&&this.setupLoader(),this.showLoader()},setupLoader:function(){this.canvasLoader=new CanvasLoader("d6ControlsLoader"),this.canvasLoader.setShape("spiral"),this.canvasLoader.setDiameter(30),this.canvasLoader.setDensity(50),this.canvasLoader.setRange(1),this.canvasLoader.setSpeed(2),this.canvasLoader.setFPS(30),"white"==this.sColorSetting&&this.canvasLoader.setColor("#FFFFFF")},showLoader:function(){var e=this;this.canvasLoader.show();var t="white"==this.sColorSetting?1:.4;TweenMax.to(this.$loader,.8,{css:{autoAlpha:t},onComplete:function(){e.loadImages()}})},loadImages:function(){for(var e=0;e<this.nTotalFrames;e++)this.loadImage(),2==this.nTotalFrames?this.nCurrentImageToLoad=1==this.nCurrentImageToLoad?this.nFlipSideFrame:1:this.nCurrentImageToLoad<this.nTotalFrames?this.nCurrentImageToLoad++:this.nCurrentImageToLoad=1},loadImage:function(){var e,t=this;e=this.data.frame?this.data.src+"&width="+this.nSize+"&frame="+this.nCurrentImageToLoad+"&v="+this.studioImgVersion:this.data.src;var i=$("<img/>");if(this.bProduct3D)this.aFrames[this.nCurrentImageToLoad-1]=i;else{var o=1==this.nCurrentImageToLoad?0:1;this.aFrames[o]=i}$(i).load(function(){t.loadImageComplete()}).attr("src",e)},loadImageComplete:function(){if(1==this.nLoadedImages&&(this.bFirstImageLoaded=!0,this.$display.empty(),this.bProduct3D?null!=this.aFrames[this.nCurrentImageToLoad-1]&&this.$display.append(this.aFrames[this.nCurrentImageToLoad-1]):(this.getCurrentFrame()>1&&(this.nCurrentFrame=0),null!=this.aFrames[this.nCurrentFrame]&&this.$display.append(this.aFrames[this.nCurrentFrame])),"hidden"==this.$display.css("visibility")&&(TweenMax.killTweensOf(this.$display),TweenMax.to(this.$display,.5,{css:{autoAlpha:1}}))),this.nLoadedImages++,this.nLoadedImages>this.nTotalFrames){this.nLoadedImages=0;var e=this;this.nSize!=this.SIZE_S?TweenMax.to(this.$loader,.5,{css:{autoAlpha:0},onComplete:function(){e.canvasLoader.hide(),1==e.nTotalFrames?(TweenMax.to(e.$bgleft,.5,{width:e.nSize/2,ease:Expo.easeOut}),TweenMax.to(e.$bgright,.5,{width:e.nSize/2,ease:Expo.easeOut})):(TweenMax.to(e.$bgleft,.5,{width:e.nBgMaskWidthOpen,ease:Expo.easeOut}),TweenMax.to(e.$bgright,.5,{width:e.nBgMaskWidthOpen,ease:Expo.easeOut}),e.$previousFrame.css({left:e.nOffsetPrevStart}),e.$nextFrame.css({left:e.nOffsetNextStart}),TweenMax.to(e.$zoombutton,.8,{css:{autoAlpha:1}}),TweenMax.to(e.$previousFrame,.5,{delay:.1,css:{left:e.nOffsetPrevEnd,autoAlpha:1},ease:Expo.easeOut}),TweenMax.to(e.$nextFrame,.5,{delay:.1,css:{left:e.nOffsetNextEnd,autoAlpha:1},ease:Expo.easeOut,onComplete:function(){e.imagesLoaded()}}))}}):TweenMax.to(this.$loader,.5,{css:{autoAlpha:0},onComplete:function(){e.canvasLoader.hide(),TweenMax.to(e.$bgleft,.5,{width:140,ease:Expo.easeOut}),TweenMax.to(e.$bgright,.5,{width:140,ease:Expo.easeOut}),e.imagesLoaded()}})}},imagesLoaded:function(){this.bProductViewerReady=!0,this.bProduct3D&&this.bIntroSpin&&(this.bIntroSpin=!1,this.showProductIntro()),this.bLocked||this.$element.css("pointer-events","auto")
},startSpinnerTest:function(){var e=this;setInterval(function(){e.showPreviousFrame()},10)},showProductIntro:function(){this.nEndFrame=this.nCurrentFrame+this.nTotalFrames,this.refresh()},initProductInteraction:function(){var e=this;this.$hitfield.on("mouseover",function(){e.bProduct3D&&e.$element.addClass("cursor-grab")}),this.$hitfield.on("mouseout",function(){e.bProduct3D&&e.$element.removeClass("cursor-grab")}),this.$hitfield.on(e.sMouseDown,function(t){e.bProduct3D&&(e.bConfigurator&&Configurator.lockColorpickers(!0),t.preventDefault(),e.stopRotation(),e.bTouch||e.$element.addClass("cursor-grabbing"),e.nPointerStartPosX=e.getPointerEvent(t).pageX,e.bDragging=!0)}),this.$mainContainer.on("mouseup",function(t){e.bProduct3D&&(e.bConfigurator&&Configurator.lockColorpickers(!1),t.preventDefault(),e.bDragging=!1,e.$element.removeClass("cursor-grabbing"),e.stopRotation())}),this.$mainContainer.on("mousemove",function(t){e.bProduct3D&&(t.preventDefault(),e.trackPointer(t))}),this.$hitfield.on("touchmove",function(t){e.bProduct3D&&(t.preventDefault(),e.trackPointer(t))}),this.$hitfield.on(e.sMouseUp,function(t){e.bProduct3D&&(t.preventDefault(),e.bDragging=!1)}),this.$previousFrame.on(e.sMouseDown,function(t){t.preventDefault(),e.showPreviousFrame(),e.bProduct3D&&e.startRotation("previous")}),this.$previousFrame.on(e.sMouseUp,function(){e.bProduct3D&&e.stopRotation()}),this.$nextFrame.on(e.sMouseDown,function(t){t.preventDefault(),e.showNextFrame(),e.bProduct3D&&e.startRotation("next")}),this.$nextFrame.on(e.sMouseUp,function(){e.bProduct3D&&e.stopRotation()}),this.$nextFrameMobile.on(e.sMouseDown,function(){e.showNextFrame()}),this.$zoombutton.on("click",function(t){t.preventDefault();var i;i=2==e.nTotalFrames?0==e.nCurrentFrame?1:e.nFlipSideFrame:e.getNormalizedCurrentFrame()+1;var o=e.data.src+"&width="+e.SIZE_ZOOM+"&frame="+i;window.bugaboo.imagezoom.update(o)})},render:function(){var e=this;if(e.nCurrentFrame!=e.nEndFrame){var t=e.nEndFrame<e.nCurrentFrame?Math.floor(.1*(e.nEndFrame-e.nCurrentFrame)):Math.ceil(.1*(e.nEndFrame-e.nCurrentFrame));e.nCurrentFrame+=t,e.showCurrentFrame()}else window.clearInterval(e.nTicker),e.nTicker=0},refresh:function(){var e=this;0===this.nTicker&&(this.nTicker=self.setInterval($.proxy(e.render,e),Math.round(1e3/60)))},showCurrentFrame:function(){this.$display.empty().append(this.aFrames[this.getCurrentFrame()])},getCurrentFrame:function(){var e=this.bProduct3D?this.getNormalizedCurrentFrame():this.nCurrentFrame;return e},getNormalizedCurrentFrame:function(){var e=-Math.ceil(this.nCurrentFrame%this.nTotalFrames);return 0>e&&(e+=this.nTotalFrames),e=Math.max(0,e)},startRotation:function(e){this.stopRotation(),this.bArrowControls=!0;var t="next"==e?this.showNextFrame:this.showPreviousFrame;this.timer=setInterval($.proxy(t,this),50)},showNextFrame:function(){var e=this;e.nCurrentFrame++,e.bProduct3D||e.nCurrentFrame>1&&(e.nCurrentFrame=0),e.showCurrentFrame()},showPreviousFrame:function(){var e=this;e.nCurrentFrame--,e.bProduct3D||e.nCurrentFrame<0&&(e.nCurrentFrame=1),e.showCurrentFrame()},stopRotation:function(){clearInterval(this.timer),this.bArrowControls=!1},getPointerEvent:function(e){return e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e},trackPointer:function(e){var t=this;t.bProductViewerReady&&t.bDragging&&!t.bArrowControls&&(t.nPointerEndPosX=t.getPointerEvent(e).pageX,t.nMonitorStartTime<(new Date).getTime()-t.nMonitorInt&&(t.nPointerDistance=t.nPointerEndPosX-t.nPointerStartPosX,t.nEndFrame=t.nCurrentFrame-Math.ceil((t.nTotalFrames-1)*t.nSpeedMultiplier*(t.nPointerDistance/t.nViewWidth)),t.refresh(),t.nMonitorStartTime=(new Date).getTime(),t.nPointerStartPosX=t.getPointerEvent(e).pageX))},unload:function(){}};return e}),define("selection",[],function(){"use strict";var e=function(e,t){this.element=e,this.options=t,this.parent=$(this.element),this.select=$("> a",this.element),this.option=$("> ul > li > span",this.element),this.icons=$("> span",this.element),this.activeClass="open",this.selectedClass="selected",this.eventobserver=this.options.eventobserver,this.init()};return e.prototype={init:function(){this.selectorSetup()},selectorSetup:function(){function e(e){e.preventDefault(),$(s.parent).hasClass(s.activeClass)?i():t(function(e){$(e.target).is($(s.select))||$(e.target).is($(s.icons))||i(),$(e.target).is($(s.option))&&o($(e.target))})}function t(e){$(s.parent).addClass(s.activeClass),$("body").on("click.d7selection",function(t){e(t)})}function i(){$(s.parent).removeClass(s.activeClass),$("body").off("click.d7selection")}function o(e){s.select.attr("data-value",e.parent().attr("data-value")),s.select.text(e.text()),$(s.parent).addClass(s.selectedClass),s.eventobserver?$.publish(s.eventobserver,s.select.attr("data-value")):void 0}var s=this;this.select.on("click",function(t){e(t)}),this.icons.on("click",function(t){e(t)}),s.options.keeplabel||$(".label",this.parent).hide()}},e.prototype.unload=function(){},e}),define("generic-cart",[],function(){"use strict";var e=function(){};return e.prototype={elements:{topBasket:$(".b1-main-menu").find(".navigation-container .cart-items"),discount:$(".optional-block").find(".price")?$(".optional-block").find(".price"):!1,summary:{subtotal:$(".c8-cart-summary .summary-subtotal"),shipping:$(".c8-cart-summary .summary-shipping"),vat:$(".c8-cart-summary .summary-tax"),total:$(".c8-cart-summary .summary-total"),discount:$(".c8-cart-summary .summary-discount")}},update:{cart_items:function(t){var i=e.prototype.elements,o=parseFloat(t);$(i.topBasket).hasClass("active")&&0===o?$(i.topBasket).removeClass("active"):$(i.topBasket).hasClass("active")||$(i.topBasket).addClass("active"),i.topBasket.empty().text(o)},wishlist_items:function(e){var t=$(".b5-tabs").find(".wishlist_items");t.empty().text(e)},cart_summary:function(t,i){void 0;var o=e.prototype.elements.summary,s=e.prototype.elements.discount;o.subtotal.text(t+" "+i.subtotal),o.shipping.text(t+" "+i.shipping),o.vat.text(t+" "+i.vat),o.total.text(t+" "+i.total),s.length>0&&(s.text(t+" "+i.discount),o.discount.text(t+" "+i.discount))}},get:{cart_summary:function(){var t=e.prototype.elements.summary,i={};return i.subtotal=t.subtotal.text(),i.shipping=t.shipping.text(),i.vat=t.vat.text(),i.total=t.total.text(),i}}},e}),define("generic-loader",[],function(){"use strict";var e=function(e){return void 0,e?(this.element=e,$(e).hasClass("type4")&&(this.color="#ffffff"),$(e).addClass("loading"),this.setup(),void this.show()):void void 0};return e.prototype={setup:function(){if(!this.element)return void void 0;var e="phButtonLoader"+$(".button,.icon-button").index(this.element);$(this.element).append('<div id="'+e+'" class="loader"></div>'),this.canvasLoader=new CanvasLoader(e),this.canvasLoader.setColor(this.color),this.canvasLoader.setShape("spiral"),this.canvasLoader.setDiameter(25),this.canvasLoader.setDensity(50),this.canvasLoader.setRange(1),this.canvasLoader.setSpeed(2),this.canvasLoader.setFPS(30)},show:function(){if(!this.element)return void void 0;var e=$(".loader",this.element);this.canvasLoader.show(),e.fadeIn()},kill:function(){return this.element?void(this.canvasLoader&&(this.canvasLoader.kill(),$(this.element).removeClass("loading"),$(this.element).find(".loader").remove())):void void 0}},e}),define("gtm",["underscore"],function(e){var t={load:function(e,t,i){this.setup(),"landing"===t&&this.updateGTM(e,t,"detail",i)},setup:function(){window.dataLayer=window.dataLayer||[],dataLayer.length>0?dataLayer[0]=e.extend(dataLayer[0],{event:null,ecommerce:{}}):dataLayer.push({event:null,ecommerce:{}}),dataLayer[0].ecommerce.currencyCode,dataLayer[0].ecommerce.detail={},dataLayer[0].ecommerce.detail.products=[],dataLayer[0].ecommerce.add={},dataLayer[0].ecommerce.add.products=[],dataLayer[0].ecommerce.remove={},dataLayer[0].ecommerce.remove.products=[]},updateGTM:function(e,t,i,o){if(void 0,this.brand="Bugaboo",this.quantity=1,this.event=t,"C2"===e&&("landing"===t||"accessorycolourchanged"===t||"addToCart"===t))var s=[this.generateProductFieldObjectC2(o)];if("C3"===e){if(this.currencyCode=Configurator.currencyCode,"accessoryadded"===t)var s=[this.generateProductFieldObjectC3Accessory(o)];if("landing"===t||"modulecolourchanged"===t||"setposition"===t)var s=[this.generateProductFieldObjectC3Stroller()];if("addToCart"===t)var s=this.generateProductFieldObjectC3Add(o)}if("C7"===e&&"removeFromCart"===t)var s=[this.generateProductFieldObjectC7Remove(o)];this.pushDataLayer(i,s)},pushDataLayer:function(e,t){void 0;var i=this;dataLayer[0].ecommerce.currencyCode!=i.currencyCode&&(dataLayer[0].ecommerce.currencyCode=i.currencyCode),dataLayer[0].event!=i.event&&(dataLayer[0].event=i.event),$.each(t,function(t,i){"add"==e&&dataLayer[0].ecommerce.add.products.push(i),"remove"==e&&dataLayer[0].ecommerce.remove.products.push(i),"detail"==e&&dataLayer[0].ecommerce.detail.products.push(i)})},generateProductFieldObjectC2:function(e){var t,i;return void 0,$.each(e.colors,function(o,s){e.colour==s.id&&(i=s.itemcode,t=s.label)}),{name:e.label,id:i,price:""+(Math.round(100*e.price)/100).toFixed(2),brand:this.brand,category:"Stroller / Accessory",variant:t,basetype:"",framecolour:"",basecolour:"",TF1:"",TF2:"",quantity:this.quantity}},generateProductFieldObjectC3Accessory:function(e){return{name:e.label,id:e.colours[e.colour].itemcode,price:""+(Math.round(100*e.price)/100).toFixed(2),brand:this.brand,category:"Stroller / Accessory",variant:e.colours[e.colour].label,basetype:Configurator.Positions.positions[Configurator.Positions.position].label,framecolour:"",basecolour:"",TF1:"",TF2:"",quantity:this.quantity}},generateProductFieldObjectC3Stroller:function(){return Configurator.Stroller?{name:Configurator.Stroller.stroller.label,id:Configurator.Stroller.fullVpc.split("!")[0],price:Configurator.Stroller.stroller.price?""+(Math.round(100*Configurator.Stroller.stroller.price)/100).toFixed(2):"0.00",brand:this.brand,category:"Stroller",variant:"Stroller",basetype:Configurator.Positions.positions[Configurator.Positions.position].label,framecolour:Configurator.Stroller.stroller.modules.Frame.colour,basecolour:Configurator.Stroller.stroller.modules.Base.colour,TF1:Configurator.Stroller.stroller.modules.TF.colour,TF2:Configurator.Stroller.stroller.modules.TF2?Configurator.Stroller.stroller.modules.TF2.colour:"",quantity:this.quantity}:void 0},generateProductFieldObjectC3Add:function(e){var t=this,i=[];return e||i.push(t.generateProductFieldObjectC3Stroller()),$.each(Configurator.Basket.accessories,function(e,o){void 0,o.colours[o.colour].atp>0&&i.push(t.generateProductFieldObjectC3Accessory(o))}),i},generateProductFieldObjectC7Remove:function(e){return void 0,{name:e.name,id:e.itemcode,price:""+(Math.round(100*e.price)/100).toFixed(2),brand:this.brand,category:e.category,variant:e.variant,basetype:e.basetype,framecolour:e.framecolour,basecolour:e.basecolour,TF1:e.TF1,TF2:e.TF2,quantity:e.quantity}},unload:function(){}};return t}),define("image-resize",["underscore"],function(e){"use strict";var t=function(e,t,i,o){this.images=e,this.element=t,this.component=i,this.animate=void 0===o||o===!1?!1:!0,this.processed=!1,this.init(),this.addResizeEventHandler()};return t.prototype={addResizeEventHandler:function(){var t=e.bind(this.init,this);window.addEventListener("resize",e.throttle(t,250),!1)},update:function(){this.init()},init:function(){var e=window.innerWidth;if(!("b1"!==this.component&&"a5"!==this.component&&1025>e||"a5"===this.component&&1024>e))for(var t=this.images,i=0;i<t.length;i++){t[i].removeAttribute("width"),t[i].removeAttribute("height"),this.animate?$(t[i]).css({"-ms-interpolation-mode":"bicubic",position:"absolute",left:"0",top:"0","max-width":"none"}).animate({opacity:"1"},800):$(t[i]).css({"-ms-interpolation-mode":"bicubic",position:"absolute",left:"0",top:"0","max-width":"none"});var o=this._aspectRatio(t[i]);this._scale(t[i],o),this._center(t[i],o)}},_centerY:function(e){var t=$(e);t.css({top:($(this.element).height()-t.height())/2})},_centerX:function(e){var t=$(e);t.css({left:($(this.element).width()-t.width())/2})},_center:function(e){this._centerX(e),this._centerY(e)},_aspectRatio:function(e){if(!this.naturalHeight&&!this.naturalWidth){var t=new Image;t.src=e.src,this.naturalHeight=t.height,this.naturalWidth=t.width}return this.naturalHeight/this.naturalWidth},_scale:function(e,t){t=t||this._aspectRatio(e);var i=$(this.element).height()/$(this.element).width(),o=$(e);o.css(i>t?{height:$(this.element).height(),width:$(this.element).height()/t}:{height:$(this.element).width()*t,width:$(this.element).width()})}},t.prototype.unload=function(){},t}),define("loadermask",["underscore"],function(){"use strict";var e=function(){this.init()};return e.prototype={init:function(){this.setupGlobalMethods()},setupGlobalMethods:function(){window.bugaboo.theloadermask={},window.bugaboo.theloadermask.removeMask=function(e){var t=$(".loaderMask",e);t.length&&(t.css({"background-image":"none"}),t.animate({opacity:"0"},800,function(){$(this).remove()}))}}},e.prototype.unload=function(){},e}),define("responsive-images",["Riloadr"],function(e){var t={init:function(){var t={name:"640",maxWidth:640},i={name:"640",maxWidth:320,minDevicePixelRatio:2},o={name:"1024",minWidth:641,maxWidth:1024},s={name:"1366",minWidth:768,maxWidth:1e3,minDevicePixelRatio:2},n={name:"1366",minWidth:1025,maxWidth:1366},r={name:"1920",minWidth:1367,maxWidth:1920},a={name:"1920",minWidth:1001,maxWidth:1600,minDevicePixelRatio:2},l={name:"2560",minWidth:1921},c={name:"2560",minWidth:1601,minDevicePixelRatio:2},h=[t,i,o,n,s,r,a,l,c];this.homehidden=[o,n,s,r,a,l,c],bugaboo.responsiveImages=new e({name:"fullimage",watchViewportWidth:"*",defer:{mode:"invisible",threshold:200},breakpoints:h,oncomplete:function(){void 0},onload:function(){void 0,$(document).trigger("fullImageLoaded")}});var u=_.bind(this.initHomepageHidden,this);new e({name:"homepage",watchViewportWidth:"*",breakpoints:h,oncomplete:function(){$(document).trigger("homepageImageLoaded"),_.defer(u)}}),new e({name:"flags",breakpoints:[{name:"",minWidth:1},{name:"hidpi",minWidth:1,minDevicePixelRatio:2}]})},initHomepageHidden:function(){new e({name:"homepagehidden",watchViewportWidth:"*",breakpoints:this.homehidden,oncomplete:function(){$(document).trigger("homepageHiddenImagesLoaded")},onerror:function(){}})},unload:function(){}};return t}),define("retailer-map",["loadermask","underscore","generic-loader"],function(e,t){"use strict";var i=function(i,o){this.loaderMask=e,this.loaderMask=new this.loaderMask,this.china=Boolean(o.china),this.ie=Boolean(this.ieVersion(9)+this.ieVersion(10)),void 0,void 0,this.element=i,this.parent=$(i).parent(),this.titleElement=this.parent.find(".a8-title"),this.mapElement=document.getElementById("map-canvas"),this.sidebarElement=$(i).find(".sidebar"),this.searchElement=$(i).find(".sidebar .search"),this.searchForm=$(i).find(".sidebar .search .find-retailer"),this.filterSelection=$(i).find(".sidebar .search .retailer-filter"),this.retailersWrapperElement=$(i).find(".sidebar .retailers-wrapper"),this.retailerMobileElement=$(i).find(".sidebar .retailer-mobile"),this.retailerSidebarSize=84,this.sidebarRetailersNumber=50,this.defaultMarker="/static/images/gfx/modules/retailer-map/retailer-map_marker.png",this.defaultMarkerSelected="/static/images/gfx/modules/retailer-map/retailer-map_marker_selected.png",this.bugabooMarker="/static/images/gfx/modules/retailer-map/retailer-map_marker_brandstore.png",this.bugabooMarkerSelected="/static/images/gfx/modules/retailer-map/retailer-map_marker_brandstore_selected.png",this.clusterMarker="/static/images/gfx/modules/retailer-map/retailer-map_cluster.png",this.clusterMarkerHover="/static/images/gfx/modules/retailer-map/retailer-map_cluster_hover.png",this.geolocationMarker="/static/images/gfx/modules/retailer-map/retailer-map_geolocation.png",this.china&&!this.ie&&(this.defaultMarker=new AMap.Icon({size:new AMap.Size(50,50),image:this.defaultMarker}),this.defaultMarkerSelected=new AMap.Icon({size:new AMap.Size(50,50),image:this.defaultMarkerSelected}),this.bugabooMarker=new AMap.Icon({size:new AMap.Size(60,60),image:this.bugabooMarker}),this.bugabooMarkerSelected=new AMap.Icon({size:new AMap.Size(60,60),image:this.bugabooMarkerSelected}),this.clusterMarker=new AMap.Icon({size:new AMap.Size(50,50),image:this.clusterMarker}),this.clusterMarkerHover=new AMap.Icon({size:new AMap.Size(50,50),image:this.clusterMarkerHover}),this.geolocationMarker=new AMap.Icon({size:new AMap.Size(90,90),image:this.geolocationMarker})),this.mobile=$("html").hasClass("touch")||$(window).width()<767?!0:!1,this.setElementsSize(),this.location=o.location,this.userAllowLocation=!1;var s=$.ajax({dataType:"json",url:o.data,async:!1,success:function(){}});if(this.retailers=s.responseJSON,this.markersClusters=null,this.addressComponents=null,this.countryBonds=null,this.markersInViewport=null,this.markersInBounds=null,this.saveSearchLocation=!1,this.locationResults=null,this.distanceActive=!1,this.userGeolocationPosition=!1,this.userSearchLocationPosition=!1,this.userGeolocationMarker=null,this.openSidebarRetailerId=!1,this.retailerTemplate=t.template($("script.retailer").html()),this.ie&&this.china)return void 0,this.setMarkers(),this.titleElement.removeAttr("style"),this.renderRetailers(this.markers),$(i).addClass("iefix"),this.searchElement.remove(),$(this.mapElement).remove(),!1;if(this.titleElement.remove(),this.china){var n=this;AMap.service(["AMap.Geocoder"],function(){void 0,n.geocoder=new AMap.Geocoder}),this.initChina()}else{this.geocoder=new google.maps.Geocoder,this.searchLocation(this.location);var r=[{elementType:"geometry",stylers:[{visibility:"on"},{weight:.4},{gamma:1}]},{featureType:"landscape.natural",stylers:[{color:"#ffffff"}]},{featureType:"water",stylers:[{color:"#c8e2e2"}]},{featureType:"poi.park",stylers:[{color:"#d9edcf"}]},{featureType:"landscape.man_made",stylers:[{color:"#f6f3f3"}]},{featureType:"road.highway",stylers:[{weight:.2}]}];this.mapOptions={zoom:13,styles:r,disableDefaultUI:!0},this.init()}this.resizeEvent()};return i.prototype={init:function(){var e=new google.maps.Map(this.mapElement,this.mapOptions);this.map=e,this.setMarkers();var t={maxZoom:12,styles:[{height:50,url:this.clusterMarker,width:50,textColor:"#ffffff",textSize:15}]},i=new MarkerClusterer(this.map,this.markers,t);this.markersClusters=i;var o=document.createElement("div");this.createControls(o),o.index=1,e.controls[google.maps.ControlPosition.TOP_RIGHT].push(o),this.mapEvents()},initChina:function(){void 0;var e={lang:"zh_cn"},t=new AMap.Map(this.mapElement,e);this.map=t,t.plugin(["AMap.ToolBar","AMap.OverView","AMap.Scale"],function(){var e={},i=new AMap.ToolBar(e);i.hideDirection(),t.addControl(i)}),this.setMarkers(),this.mapEvents()},setElementsSize:function(){void 0;var e=this;return this.ie&&this.china?!1:void(this.mobile?t.delay(function(){$(e.element).height($(window).height()-50),$(e.element).find(".map").height($(e.element).height()-e.searchElement.outerHeight())},150):t.delay(function(){$(e.element).height($(window).height()-$(".b1-main-menu").outerHeight()-$(".b3-breadcrumbs").outerHeight()),e.retailersWrapperElement.height($(e.element).height()-e.searchElement.outerHeight())},10))},createControls:function(e){var i=this,o=document.createElement("div");o.className="map-controls",o.style.cursor="pointer",o.style.marginTop="25px",o.style.marginRight="25px",e.appendChild(o);var s=document.createElement("div"),n=document.createElement("span");n.className="icon-map-zoom-out",s.className="btnControl controlZoomIn",s.appendChild(n),o.appendChild(s);var r=document.createElement("div"),a=document.createElement("span");a.className="icon-map-zoom-in",r.className="btnControl controlZoomOut",r.appendChild(a),o.appendChild(r);var l=document.createElement("div"),c=document.createElement("span");c.className="icon-map-location",l.className="btnControl controlGeolocation",l.appendChild(c),o.appendChild(l),google.maps.event.addDomListener(s,"click",function(){var e=i.map.getZoom();i.map.setZoom(e+1)}),google.maps.event.addDomListener(r,"click",function(){var e=i.map.getZoom();i.map.setZoom(e-1)}),google.maps.event.addDomListener(l,"click",function(){return void 0,i.userGeolocationMarker?void i.map.setCenter(i.userGeolocationMarker.position):void(navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){i.userAllowLocation=!0;var o=$(i.element).find(".controlGeolocation");o.addClass("active"),i.userSearchLocationPosition=!1,i.saveSearchLocation=!1,i.searchForm.find(".search-location").val(""),i.enableDistance();var s=new google.maps.Marker({clickable:!1,icon:new google.maps.MarkerImage(i.geolocationMarker,new google.maps.Size(90,90),new google.maps.Point(0,0),new google.maps.Point(45,45)),zIndex:999,map:i.map}),n=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);s.setPosition(n);var r=i.countryBonds.contains(n);i.userGeolocationMarker=s,i.userGeolocationPosition=n,i.map.panTo(n),r||(void 0,i.geocoder.geocode({location:n},function(e,o){if(o==google.maps.GeocoderStatus.OK){var s=t.filter(e[0].address_components,function(e){return"country"==e.types[0]?e:void 0});i.loadCountryRetailers(s[0].long_name)}var n={};n.results=e,n.status=o,i.saveLocationResults(n)}))},function(e){void 0}))})},sidebarEvents:function(){void 0;var e=this,i=this.retailersWrapperElement.find(".retailer-item"),o=this.retailerMobileElement.find(".retailer-item"),s=this.sidebarElement.find("a").not($("a",this.filterSelection)),n=this.searchElement.find(".search-trigger"),r=this.searchElement.find(".open-selection"),a=this.searchElement.find(".search-location");i.off("click").on("click",function(i){if(i.preventDefault(),i.stopPropagation(),$(this).hasClass("selected"))return e.closeRetailer(),void e.clearMarkers();var o=t.where(e.markers,{bugabooId:parseInt($(this).attr("data-id"))});if(e.openSidebarRetailer(this),e.triggerFromSidebar=!0,e.ie)return!1;if(e.china){var s=e.map.getBounds(),n=s.contains(o[0].getPosition());n||e.map.panTo(o[0].getPosition()),AMap.event.trigger(o[0],"click")}else{if($(this).hasClass("in-cluster"))return e.map.panTo(o[0].getPosition()),e.map.setZoom(13),void setTimeout(function(){google.maps.event.trigger(o[0],"click")},500);google.maps.event.trigger(o[0],"click")}}),o.off("click").on("click",function(t){return t.preventDefault(),void 0,$(this).hasClass("selected")?void e.closeMobileRetailer():void e.openSidebarRetailer(this)}),i.off("mouseenter").on("mouseenter",function(i){i.preventDefault();var o=parseInt($(this).attr("data-id")),s=t.where(e.markers,{bugabooId:o});if(e.china)AMap.event.trigger(s[0],"mouseover");else{var n=e.findClusterOfMarker(o);null!==n&&null!==n.clusterIcon_.div_&&n.clusterIcon_.div_.children.length>0&&(n.clusterIcon_.div_.firstChild.src=e.clusterMarkerHover,$(this).addClass("in-cluster")),google.maps.event.trigger(s[0],"mouseover")}}),i.off("mouseleave").on("mouseleave",function(i){i.preventDefault();var o=parseInt($(this).attr("data-id")),s=t.where(e.markers,{bugabooId:o});if(e.china)AMap.event.trigger(s[0],"mouseout");else{var n=e.findClusterOfMarker(o);null!==n&&null!==n.clusterIcon_.div_.firstChild&&(n.clusterIcon_.div_.firstChild.src=e.clusterMarker,$(this).removeClass("in-cluster")),google.maps.event.trigger(s[0],"mouseout")}}),s.off("click").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=$(this).attr("href"),i=$(this).attr("target");window.open(t,i)}),r.off("click").on("click",function(){return e.filterSelection.hasClass("show")?(e.filterSelection.removeClass("show"),void $(this).removeClass("icon-minus-mobile").addClass("icon-plus-mobile")):($(this).removeClass("icon-plus-mobile").addClass("icon-minus-mobile"),e.filterSelection.addClass("show"),void(e.mobile&&e.retailerMobileElement.hasClass("open")&&(e.retailerMobileElement.removeClass("open"),e.clearMarkers())))}),"undefined"!==$.subscribe("retailer-map-role-filter")&&$.unsubscribe("retailer-map-role-filter"),$.subscribe("retailer-map-role-filter",function(t,i){t.preventDefault(),e.filterMarkers(t,i)}),n.off("click").on("click",function(t){t.preventDefault(),$(e.searchForm).submit()}),a.on("click focusin",function(){this.value=""}),this.searchForm.submit(function(t){t.preventDefault(),t.stopImmediatePropagation();var i=e.searchElement.find(".search-location");return""==i.val()?!1:(e.clearMarkers(),e.saveSearchLocation=!0,e.searchLocation(i.val()),!1)})},mapEvents:function(){var e=this;this.china?(AMap.event.addListener(this.map,"complete",function(){void 0,e.geocoder.getLocation(e.location,function(t,i){"complete"===t&&"OK"===i.info&&e.map.setCenter(i.geocodes[0].location),e.orderRetailersByDistance(),e.renderRetailers(e.markers)})}),AMap.event.addListener(this.map,"dragend",function(){void 0,e.orderRetailersByDistance(),e.renderRetailers(e.markers)}),AMap.event.addListener(this.map,"zoomend",function(){void 0})):(google.maps.event.addListener(this.map,"zoom_changed",function(){e.userGeolocationMarker&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var i=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);e.userGeolocationMarker.setPosition(i)})}),google.maps.event.addListener(this.map,"idle",function(){void 0;var t;e.mobile&&e.retailerMobileElement.hasClass("open")&&(e.retailerMobileElement.removeClass("open"),e.clearMarkers()),t=e.countryBonds?e.getMarkersInBounds(e.countryBonds):e.markers,e.triggerFromSidebar||e.renderRetailers(t),e.triggerFromSidebar=!1}),google.maps.event.addListener(this.map,"bounds_changed",function(){}),google.maps.event.addListener(this.map,"projection_changed",function(){e.mobile&&e.sidebarEvents()}),google.maps.event.addListener(this.markersClusters,"mouseover",function(t){t.clusterIcon_.div_.firstChild.src=e.clusterMarkerHover}),google.maps.event.addListener(this.markersClusters,"mouseout",function(t){t.clusterIcon_.div_.firstChild.src=e.clusterMarker}))},markerEvent:function(e){var i=this;this.china?(AMap.event.addListener(e,"click",function(){if(i.clearMarkers(),i.mobile)void 0,i.openMobileRetailer(e);else{var t=i.retailersWrapperElement.find('.retailer-item[data-id="'+e.bugabooId+'"]');i.openSidebarRetailer(t)}i.selectMarker(e)}),AMap.event.addListener(e,"mouseover",function(){var t=this.bugabooId,o=i.retailersWrapperElement.find('.retailer-item[data-id="'+t+'"]');o.length>0&&o.addClass("highlight"),i.ie||(this.setzIndex(99),e.setIcon(i.defaultMarkerSelected))}),AMap.event.addListener(e,"mouseout",function(){if(!e.selected){i.ie||this.setzIndex(0);var t=this.bugabooId,o=i.retailersWrapperElement.find('.retailer-item[data-id="'+t+'"]');o.length>0&&o.removeClass("highlight"),i.ie||e.setIcon(i.defaultMarker)}})):(google.maps.event.addDomListener(e,"click",function(){if(i.clearMarkers(),i.mobile)i.openMobileRetailer(e);else{var o=i.map.getBounds(),s=o.contains(e.position);if(!s)return i.map.panTo(e.getPosition()),void google.maps.event.trigger(e,"click");var n=i.retailersWrapperElement.find('.retailer-item[data-id="'+e.bugabooId+'"]');if(0===n.length)return void i.geocoder.geocode({location:e.position},function(o,s){if(s==google.maps.GeocoderStatus.OK){var n=t.filter(o[0].address_components,function(e){return"country"==e.types[0]?e:void 0}),r=t.filter(i.addressComponents,function(e){return"country"==e.types[0]?e:void 0});n[0].long_name!=r[0].long_name&&(i.searchLocation(n[0].long_name),setTimeout(function(){google.maps.event.trigger(e,"click"),i.openSidebarRetailerId=e.bugabooId},500))}var a={};a.results=o,a.status=s,i.saveLocationResults(a)});i.openSidebarRetailer(n)}i.selectMarker(e)}),google.maps.event.addDomListener(e,"mouseover",function(){var e=this.bugabooId,o=i.retailersWrapperElement.find('.retailer-item[data-id="'+e+'"]');return o.length>0&&o.addClass("highlight"),this.setZIndex(99),t.contains(this.bugabooRoles,"brandstore")?void this.setIcon(i.bugabooMarkerSelected):void this.setIcon(i.defaultMarkerSelected)}),google.maps.event.addDomListener(e,"mouseout",function(){var e=this.bugabooId,o=i.retailersWrapperElement.find('.retailer-item[data-id="'+e+'"]');return o.length>0&&o.removeClass("highlight"),o.hasClass("selected")||this.selected?void 0:(this.setZIndex(0),t.contains(this.bugabooRoles,"brandstore")?void this.setIcon(i.bugabooMarker):void this.setIcon(i.defaultMarker))}))},resizeEvent:function(){void 0;var e=this;$(window).resize(function(){e.mobile=$("html").hasClass("touch")||$(window).width()<767?!0:!1,e.setElementsSize(),e.china||google.maps.event.trigger(e.map,"resize")})},setMarkers:function(){var e=this,i=[];t.each(this.retailers,function(o){var s,n;e.china?(e.ie?(s={},s.position=null):(n=new AMap.LngLat(o.lon,o.lat),s=new AMap.Marker({map:e.map,position:n}),s.position=n),s.china=!0):(n=new google.maps.LatLng(o.lat,o.lon),s=new google.maps.Marker({position:n})),s.bugabooId=parseInt(o.id),s.bugabooTitle=o.name,s.bugabooLat=o.lat,s.bugabooLon=o.lon,s.bugabooAddress1=o.address1,s.bugabooAddress2=o.address2,s.bugabooAddress3=o.address3,s.bugabooZip=o.zip,s.bugabooCity=o.city,s.bugabooRoles=o.roles,s.bugabooUrl=o.url,s.bugabooPhone=o.phone,s.bugabooDistance=null,s.selected=!1,(e.china&&!e.ie||!e.china&&!e.ie||!e.china&&e.ie)&&s.setIcon(t.contains(o.roles,"brandstore")?e.bugabooMarker:e.defaultMarker),i.push(s),e.markerEvent(s)}),this.markers=i},filterMarkers:function(e,i){e.preventDefault(),void 0;var o,s=this;if(this.filterSelection,s.mobile&&s.retailerMobileElement.hasClass("open")&&s.retailerMobileElement.removeClass("open"),o="brandstore"===i?t.filter(this.markers,function(e){return t.contains(e.bugabooRoles,"brandstore")?e:void 0}):"servicecenter"===i?t.filter(this.markers,function(e){return t.contains(e.bugabooRoles,"servicecenter")?e:void 0}):this.markers,this.china)this.map.clearMap(),this.orderRetailersByDistance(),this.renderRetailers(o),t.each(o,function(e){e.setMap(s.map)});else{this.markersClusters.clearMarkers(),this.markersClusters.addMarkers(o);var n=this.getMarkersInBounds(s.countryBonds);this.renderRetailers(n)}},selectMarker:function(e){return e.selected=!0,this.china?e.setzIndex(100):e.setZIndex(100),t.contains(e.bugabooRoles,"brandstore")?void e.setIcon(this.bugabooMarkerSelected):void e.setIcon(this.defaultMarkerSelected)},findClusterOfMarker:function(e){var i=e,o=this.markersClusters.getClusters(),s=null;return t.each(o,function(e){var o=e.getMarkers(),n=t.where(o,{bugabooId:i});n.length>0&&(s=e)}),s},searchLocation:function(e){void 0;var i=this,o={};return this.china?void this.geocoder.getLocation(e,function(e,t){"complete"===e&&"OK"===t.info&&(i.map.setCenter(t.geocodes[0].location),i.orderRetailersByDistance(),i.renderRetailers(i.markers)),o.results=t,o.status=e,void 0,i.saveLocationResults(o)
}):void this.geocoder.geocode({address:e},function(e,s){if(s===google.maps.GeocoderStatus.OK){if(i.countryBonds=e[0].geometry.bonds,i.addressComponents=e[0].address_components,i.map.setCenter(e[0].geometry.location),i.map.setZoom(13),i.saveSearchLocation){if(i.userGeolocationPosition=!1,i.userSearchLocationPosition=e[0].geometry.location,i.userGeolocationMarker){i.userGeolocationMarker.setMap(null),i.userGeolocationMarker=!1;var n=$(i.element).find(".controlGeolocation");n.removeClass("active")}i.enableDistance()}-1!==navigator.appVersion.indexOf("MSIE 10")&&(i.map.setCenter(e[0].geometry.location),i.map.setZoom(13),google.maps.event.trigger(i.map,"resize"));var r=t.filter(e[0].address_components,function(e){return"country"==e.types[0]?e:void 0});i.loadCountryRetailers(r[0].long_name),i.saveSearchLocation=!1}else void 0;o.results=e,o.status=s,i.saveLocationResults(o)})},saveLocationResults:function(e){this.locationResults=e},clearMarkers:function(){void 0;var e=this,i=t.where(this.markers,{selected:!0}),o=e.retailersWrapperElement.find(".retailer-item.highlight");o.length>0&&o.removeClass("highlight"),t.each(i,function(i){return i.selected=!1,e.china?i.setzIndex(0):i.setZIndex(0),t.contains(i.bugabooRoles,"brandstore")?void i.setIcon(e.bugabooMarker):void i.setIcon(e.defaultMarker)})},removeMarkers:function(){t.each(this.markers,function(e){e.setMap(null)})},getMarkersInViewPort:function(){void 0,void 0;var e=this.map.getBounds(),i=this.getMarkersInBounds(e);return t.sortBy(i,"bugabooDistance")},getMarkersInBounds:function(e){void 0;var i=[],o=this.map.getCenter(),s=this.userGeolocationPosition,n=this.userSearchLocationPosition,r=this.markersClusters.getMarkers();return t.each(r,function(t){if(e.contains(t.getPosition())){var r,a,l=t.getPosition(),c=google.maps.geometry.spherical.computeDistanceBetween(o,l);if(r=c/1e3,a=r.toFixed(1),s){var h=google.maps.geometry.spherical.computeDistanceBetween(s,l);r=h/1e3,a=r.toFixed(1)}if(n){var u=google.maps.geometry.spherical.computeDistanceBetween(n,l);r=u/1e3,a=r.toFixed(1)}r>10&&(a=r.toFixed(0)),t.bugabooMeterDistance=c,t.bugabooDistance=a,i.push(t)}}),void 0,t.sortBy(i,"bugabooMeterDistance")},loadCountryRetailers:function(e){var t=this,i={};this.geocoder.geocode({address:e},function(o,s){if(s==google.maps.GeocoderStatus.OK){if(t.countryBonds=o[0].geometry.bounds,t.markersInViewport=t.getMarkersInViewPort(),0===t.markersInViewport.length)return t.map.setZoom(t.map.zoom-1),void t.loadCountryRetailers(e);t.markersInBounds=t.getMarkersInBounds(o[0].geometry.bounds)}else void 0;i.results=o,i.status=s,t.saveLocationResults(i)})},renderRetailers:function(e){if(void 0,!this.mobile||this.china){var i=this,o=0;if(i.retailersWrapperElement.empty(),i.retailersWrapperElement.scrollTop(0),i.clearMarkers(),t.every(e,function(e){e.bugabooIndex=o,e.china=i.china;var t=i.retailerTemplate(e);return i.retailersWrapperElement.append(t),o++,o===i.sidebarRetailersNumber?!1:!0}),this.sidebarEvents(),this.openSidebarRetailerId){var s=i.retailersWrapperElement.find('.retailer-item[data-id="'+this.openSidebarRetailerId+'"]');this.openSidebarRetailer(s),this.openSidebarRetailerId=!1}window.bugaboo.theloadermask.removeMask(this.element)}},orderRetailersByDistance:function(){if(void 0,this.china){var e=this.markers,i=this.map.getCenter();t.each(e,function(e){var t=parseFloat((e.position.distance(i)/1e3).toFixed(2));e.bugabooDistance=t}),this.markers=t.sortBy(this.markers,"bugabooDistance")}},openSidebarRetailer:function(e){var t=this,i=$(e),o=i.find(".retailer-top-icon");this.closeRetailer(),i.addClass("selected"),o.addClass("icon-minus-mobile").removeClass("icon-plus-mobile"),i.find(".retailer-moreinfo").css("display","block");var s=i[0].getBoundingClientRect(),n=this.retailersWrapperElement[0].getBoundingClientRect(),r=parseInt(i.attr("data-index"))*this.retailerSidebarSize,a=(n.height-s.height)/2;t.scrollTo(r-a)},closeRetailer:function(){this.retailersWrapperElement.find(".selected .retailer-moreinfo").css("display","none"),this.retailersWrapperElement.find(".selected .retailer-top-icon").removeClass("icon-minus-mobile").addClass("icon-plus-mobile"),this.retailersWrapperElement.find(".selected").removeClass("selected")},scrollTo:function(e){this.retailersWrapperElement.animate({scrollTop:e},250,"easeInOutQuad")},openMobileRetailer:function(e){void 0,e.bugabooIndex=0,e.china=this.china;var t=this.retailerTemplate(e);this.retailerMobileElement.addClass("open"),this.retailerMobileElement.empty().append(t),this.sidebarEvents()},closeMobileRetailer:function(){this.retailerMobileElement.find(".selected .retailer-moreinfo").css("display","none"),this.retailerMobileElement.find(".selected .retailer-top-icon").removeClass("icon-minus-mobile").addClass("icon-plus-mobile"),this.retailerMobileElement.find(".selected").removeClass("selected")},enableDistance:function(){this.distanceActive=!0,this.retailersWrapperElement.addClass("distance-active")},disableDistance:function(){this.distanceActive=!1,this.retailersWrapperElement.removeClass("distance-active")},ieVersion:function(e){return RegExp("msie"+(isNaN(e)?"":"\\s"+e),"i").test(navigator.userAgent)}},i}),define("scroll-indicator",["underscore"],function(){"use strict";var e=function(e,t){this.wrapper=e,this.align=t};return e.prototype={el:null,wrapper:null,create:function(){var e=document.createElement("a"),t=document.createElement("div"),i=document.createElement("div"),o=document.createElement("span"),s=document.createElement("span");e.className="left"==this.align?"scroll-indicator align-left":"scroll-indicator",t.className="scroll-indicator-wrapper",o.className="scroll-indicator-border icon-ring",i.className="scroll-indicator-arrow icon-arrow-down-small",s.className="scroll-indicator-icon-fill",e.appendChild(o),t.appendChild(i),t.appendChild(s),e.appendChild(t),$(this.wrapper).append(e),this.$button=$(e),this.$arrow=$(i),this.$fill=$(s),this.initMouseEvents(),this.initAttention()},initMouseEvents:function(){var e=this;this.$button.on("mouseover",function(){TweenMax.to(e.$arrow,.3,{color:"#000"}),TweenMax.to(e.$fill,.4,{height:"100%",ease:Quad.easeInOut})}),this.$button.on("mouseout",function(){TweenMax.to(e.$arrow,.3,{color:"#FFF"}),TweenMax.to(e.$fill,.3,{height:0,ease:Quad.easeInOut})}),this.$button.on("click",function(){TweenMax.killTweensOf(e.$arrow);var t=$("html, body"),i=t.height();t.animate({scrollTop:i},1e3,"easeInOutQuad"),TweenMax.to(e.$button,.2,{autoAlpha:0,onComplete:function(){e.$button.hide()}})})},initAttention:function(){this.attentionArrowDown()},attentionArrowDown:function(){var e=this;TweenMax.to(this.$arrow,.5,{delay:1,top:50,ease:Quad.easeIn,onComplete:function(){e.attentionArrowCenter()}})},attentionArrowCenter:function(){var e=this;this.$arrow.css("top",-50),TweenMax.to(this.$arrow,.5,{top:-4,ease:Quad.easeOut,onComplete:function(){e.attentionArrowDown()}})}},e.prototype.unload=function(){},e}),define("stretch_carousel",["underscore","image-resize","loadermask","scroll-indicator"],function(e,t,i,o){"use strict";var s=function(e,s){if(this.imageResize=t,this.loaderMask=i,this.element=e,this.options=s,"true"===s.first&&"true"===s.stretch&&"false"===s.carousel){var n=new o($(this.element).parent());n.create()}this.init()};return s.prototype={init:function(){this.loaderMask=new this.loaderMask,this.setVariables(),(this.stretch||this.actionComponent)&&this.initStretch(),this.carousel&&this.initCarousel(),(this.stretch||this.carousel||this.actionComponent)&&this.addResizeEventHandler()},setVariables:function(){this.stretch="true"===this.options.stretch,this.carousel="true"===this.options.carousel,this.imageComponent="a3"===this.options.component,this.videoComponent="a4"===this.options.component,this.actionComponent="a5"===this.options.component,this.productOverview="a6"===this.options.component,this.$parentElement=$(this.element).closest("section"),this.productOverviewSmall=1024,this.productOverviewMobile=768,this.minWidthResize=1025,this.minWidthA2carousel=1024,this.carouselState=null,this.newCarouselState=null,this.minWidthResizeA5=1023,this.$items=$(".item",this.element);var e=[];$.each(this.$items,function(){e.push($(this).html())}),this.$products=e,this.$html=$(this.element).html()},initStretch:function(){return this.videoComponent?!1:(this.menuHeight=0,"true"===this.options.first&&this.getMenuItems(),this.resizeImagesInitialised=!1,this.newParentHeight=0,this.originalParentElementHeight=this.$parentElement.outerHeight(!0),this.verticalAlignElement=this.$parentElement.find(".vertical-align-container"),void this.initResize())},initResize:function(){if(!this.determineResize())return!1;var e=this.determineResizeImages(),t=this.determineVerticalAlign();this.stretch&&this.resizeElement(),t&&this.verticalAlign(),e&&!this.resizeImagesInitialised&&this.initResizeImages()},determineVerticalAlign:function(){return this.stretch&&!this.imageComponent&&"a4"!==this.options.component&&"c2"!==this.options.component||this.actionComponent?!0:!1},determineResizeImages:function(){var e=window.innerWidth;return this.actionComponent&&e>this.minWidthResizeA5||this.imageComponent&&e>this.minWidthResize||"a4"==this.options.component&&e>this.minWidthResize?!0:(this.removeInlineStyle(),!1)},determineResize:function(){var e=window.innerWidth;return this.imageComponent&&e>this.minWidthResize?!0:(this.menuHeight=this.getMenuHeight(),this.windowHeight=$(window).height(),this.actionComponent&&e>this.minWidthResizeA5?!0:this.windowHeight>this.originalParentElementHeight+this.menuHeight&&e>this.minWidthResize?!0:(this.removeInlineStyle(),!1))},resizeElement:function(){this.newParentHeight=$(window).height()-this.menuHeight,this.videoComponent&&$(this.element).find(".item-container").height(this.newParentHeight),$(this.$parentElement).css({height:this.newParentHeight})},addResizeEventHandler:function(){var t=e.bind(this.resizeHandler,this);window.addEventListener("resize",e.throttle(t,500),!1)},resizeHandler:function(){(this.stretch||this.actionComponent)&&this.initResize(),this.carousel&&this.resizeCarousel()},removeInlineStyle:function(){var e=window.innerWidth;this.imageComponent&&(this.resetImageInlineStyle(),$(this.element).removeAttr("style"),this.$parentElement.removeAttr("style")),this.actionComponent&&e<this.minWidthResize&&this.resetImageInlineStyle(),this.verticalAlignElement&&$(this.verticalAlignElement).removeAttr("style")},verticalAlign:function(){var e=this.element;this.actionComponent&&(this.verticalAlignElement=this.$parentElement.find(".vertical-align-container")),("a2"===this.options.component||"a6"===this.options.component||"c1"===this.options.component||this.actionComponent)&&(e=this.verticalAlignElement);var t=this.$parentElement.outerHeight(!0),i=t-this.$parentElement.height();$.each($(e),function(){var e=t-$(this).height()-2*parseFloat($(this).css("paddingTop")),o=(e-i)/2;$(this).css({position:"relative",top:o})}),window.bugaboo.theloadermask.removeMask(this.$parentElement)},initResizeImages:function(){var t=!1;this.images=this.element.getElementsByTagName("img"),this.images[0].src&&(t=!0);var i=e.bind(this.newImageResize,this);$(document).on("fullImageLoaded",function(){i()}),t&&i()},newImageResize:function(){this.resizeImagesInitialised?this.imageResize.update&&this.imageResize.update():(void 0,this.imageResize=new this.imageResize(this.images,this.$parentElement,this.options.component,!0),this.resizeImagesInitialised=!0)},resetImageInlineStyle:function(){$(this.images).removeAttr("style")},initCarousel:function(){var t=e.bind(this.resizeCarousel,this),i=!1,o=e.bind(this.initSlider,this);this.carouselState=this.getCarouselState(),this.newCarouselState=this.carouselState,this.$nextSlideArrow=this.$parentElement.find(".arrow-right"),this.$prevSlideArrow=this.$parentElement.find(".arrow-left");var s=window.innerWidth;return"a2"===this.options.component&&s<this.minWidthA2carousel||this.actionComponent&&s<this.minWidthA2carousel?void this.$parentElement.addClass("no-carousel"):(this.actionComponent||this.imageComponent?$(document).on("fullImageLoaded",function(){i?t():(o(),i=!0)}):o(),void this.resizeHandler())},initSlider:function(){this.$parentElement.removeClass("no-carousel"),this.settings=this.getCarouselSettings(),this.initRoyalSlider()},initRoyalSlider:function(){this.productOverview&&this.rebuildCarouselHtml(),this.setCorrectElementHeight(),$(this.element).royalSlider(this.settings),this.slider=$(this.element).data("royalSlider");var t=e.bind(this.resizeHandler,this);$(window).load(function(){t()}),$(".rsNav",this.element).appendTo(this.$parentElement),this.setEventListenersCarousel(),this.toggleDisplayElements()},resizeCarousel:function(){return this.imageComponent&&this.slider?(this.slider.updateSliderSize(!0),this.setCorrectElementHeight(),!1):(this.carouselState=this.getCarouselState(),void(this.carouselState!=this.newCarouselState?("a4"!==this.options.component&&this.resetSlider(),this.newCarouselState=this.carouselState):("a2"===this.options.component&&"normal"===this.carouselState||"a4"===this.options.component||"a6"===this.options.component)&&(this.setCorrectElementHeight(),this.slider&&this.slider.updateSliderSize(!0))))},resetSlider:function(){return this.slider&&(this.slider.destroy(),"a6"!==this.options.component&&(this.slider=null)),"a2"==this.options.component||this.actionComponent||this.imageComponent?(this.slider,"normal"!=this.carouselState?($(".rsNav",this.$parentElement).remove(),this.rebuildHtml()):this.slider||this.initSlider(),!1):($(".rsNav",this.$parentElement).remove(),void this.initRoyalSlider())},rebuildHtml:function(){this.$parentElement.addClass("no-carousel"),this.removeInlineStyle(),$(this.element).html(this.$html),this.actionComponent&&bugaboo.responsiveImages.riload()},toggleDisplayElements:function(){(this.imageComponent||"a6"===this.options.component||"a4"===this.options.component)&&$(this.element).find(".item-container").css("display","block"),"a2"===this.options.component&&$(this.element).find(".item-container").css("display","table-cell")},setCorrectElementHeight:function(){if("a2"===this.options.component){var e=0;$.each($(".item-container",this.element),function(){var t=$(this).outerHeight();t>e&&(e=t)}),$(this.element).height(e)}if((this.productOverview||"a4"===this.options.component)&&$(this.element).height($(".item-container",this.element).height()),this.imageComponent){var t=window.innerWidth;$(this.element).height(t>this.minWidthResize&&this.stretch?this.$parentElement.height():$(".item-container:first",this.element).height())}this.imageResize.update&&this.imageResize.update(),this.slider&&this.slider.updateSliderSize(!0)},rebuildCarouselHtml:function(){if(this.slider||"normal"!==this.carouselState){var t=3,i=window.innerWidth;$(this.element).html("");var o=$(this.element);768>i?t=1:i<this.productOverviewSmall&&(t=2);var s=e.groupBy(this.$products,function(e,i){return Math.floor(i/t)});e.map(s,function(e,t){var i='<div class="'+t+' xsmall-12 item-container show"></div>';o.append(i);for(var s=0;s<e.length;s++)$("."+t,o).append('<div class="item xsmall-12 small-6 medium-4 column">'+e[s]+"</div>")})}},setEventListenersCarousel:function(){var t=e.bind(this.gotoNextSlide,this),i=e.bind(this.gotoPrevSlide,this);if(this.$nextSlideArrow.off(),this.$nextSlideArrow.on("click",function(){t()}),this.$prevSlideArrow.off(),this.$prevSlideArrow.on("click",function(){i()}),this.videoComponent){var o=this.options.component_id;this.slider.ev.on("rsAfterSlideChange",function(){var e=this.slider.data("royalSlider").currSlide;bugaboo.videoPlayer["_"+o].afterSlideChange(e)}),this.slider.ev.on("rsBeforeMove",function(){bugaboo.videoPlayer["_"+o].beforeMove()})}},getCarouselState:function(){var e=window.innerWidth;return e<this.productOverviewMobile?"mobile":e<this.productOverviewSmall?"small":"normal"},getCarouselSettings:function(){return{autoScaleSlider:!1,autoScaleHeight:!1,controlsInside:!1,imageScaleMode:"fill",imageScalePadding:0,navigateByClick:!1,fadeinLoadedSlide:!1,keyboardNavEnabled:!1,arrowsNavAutoHide:!1,loop:!1,slidesSpacing:0,loopRewind:!0,sliderDrag:!1,numImagesToPreload:12,arrowsNav:!1,usePreloader:!1}},gotoNextSlide:function(){this.slider.next();var e=this.slider.currSlide.content[0],t=e.querySelectorAll("img")[0];if(!t.src||""===t.src){var i=/{breakpoint-name}/gi,o=t.getAttribute("data-base"),s=t.getAttribute("data-src"),n=o+s;n=n.replace(i,window.bugaboo.breakpoint),t.src=n}},gotoPrevSlide:function(){this.slider.prev()},getMenuHeight:function(){return"true"===this.options.first?this.mainMenu.height()+this.breadCrumbs.height():0},getMenuItems:function(){this.mainMenu=$(".b1-main-menu"),this.breadCrumbs=$(".b3-breadcrumbs")}},s.prototype.unload=function(){},s});